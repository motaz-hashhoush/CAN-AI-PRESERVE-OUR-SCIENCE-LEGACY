b'Towards Co-Engineering Communicating Autonomous\nCyber-physical Systems\nMarius C. Bujorianu and Manuela L. Bujorianu\xe2\x88\x97\n[Marius,Manuela].Bujorianu@manchester.ac.uk\nSchool of Mathematics, University of Manchester, UK\nAbstract\nIn this paper, we sketch a framework for interdisciplinary modeling of space systems, by proposing a holistic view. We consider different system dimensions and their interaction. Speci\xef\xac\x81cally,\nwe study the interactions between computation, physics, communication, uncertainty and autonomy.\nThe most comprehensive computational paradigm that supports a holistic perspective on autonomous\nspace systems is given by cyber-physical systems. For these, the state of art consists of collaborating\nmulti-engineering efforts that prompt for an adequate formal foundation. To achieve this, we propose\na leveraging of the traditional content of formal modeling by a co-engineering process.\nKeywords: cyber-physical systems, uncertainty, degrees of autonomy, communication, formal modeling, structured operational semantics, system co-engineering.\n\n1\n\nThe need for holistic modeling\n\nMany systems from aerospace engineering can be characterized as been cyber-physical, i.e. their dynamics is based on the interaction between physics and computation and they are networked. Satellites,\naircraft, planetary rovers are instants of cyber-physical systems (CPS). In the process of formal modeling\nof these systems, a developer should consider actually consider the interactions between communication,\nphysics and computation. We sketch a reference framework, where the subtleties of these interactions\ncan be captured. Moreover, we add a further dimension to these complex interactions by adding uncertainty. However, the special conditions in which the space systems are deployed require also a high\ndegree of autonomy, adding an extra-dimension to system modeling. We approach the issue of mastering\nthe interactions of many system dimensions for complex space systems by integrating formal modeling\ninto a larger system development process called system co-engineering. Instances of this process are the\nHilbertean formal methods [2] and the multidimensional system co-engineering (MScE) framework [1].\nAutonomous systems can be modeled from two perspectives: black box and white box. The black\nbox view is speci\xef\xac\x81c to the approaches based on hybrid dynamical systems. In these approaches, the\nsystem behavior is described as seen by an external observer. This observer records a sequence of continuous behaviors, each one triggered by a discrete transition (event). In our model, there are two types\nof discrete transitions: controlled, which are the transitions of a discrete automaton, and spontaneous (or\nautonomous), which are transitions that can not be explained using only the elements of the model. The\nsystems with spontaneous transitions are called uncertain, and they are usually modeled as random processes. Using structured operational semantics (SOS), some spontaneous transitions can be de\xef\xac\x81ned as a\nspecial class of controlled transitions that are triggered by communication. In this way, communication\nreduces the randomness of the model. In the white box view, some of the internal system structure is\nrevealed. In our framework, we explain the interaction between communication, autonomy and control\nusing the concept of nested feedback. The feedback is the fundamental structure of the controlled systems, constructed by connecting some input and output channels. A nested feedback results from adding\na feedback loop to a system that has already another feedback in its structure. When applying this concept\nto CPS, one can easily distinguish a subclass known as hierarchical hybrid systems [6]. We de\xef\xac\x81ne and\nuse nested feedbacks to explain the autonomy and its interaction with communication. Speci\xef\xac\x81cally, as\nmore nested feedbacks are added, the system autonomy increases. A system with four nested feedbacks\n\xcb\x98 \xcb\x98\nE. Denney, D. Giannakopoulou, C.S. Pasareanu (eds.); The First NASA Formal Methods Symposium, pp. 176-180\n\xe2\x88\x97 This work was funded by the CICADA project under the EPSRC grant EP/E050441/1.\n\n176\n\nCo-engineering Communicating Autonomous CPS\n\nM. Bujorianu\n\ncan be considered as fully autonomous because it has enough information structure to partially control\nitself. Systems with \xef\xac\x81ve nested feedbacks or more have additional features like concurrency and self-*\nproperties (self-recon\xef\xac\x81guration, self-healing, etc). In a hierarchy of nested feedbacks, communication\nis de\xef\xac\x81ned as the top loop. In this way, the whole behavior of the cyber-physical system is controlled\nvia communication. A rigorous study of autonomy and communication in a cyber-physical context goes\nbeyond the traditional content of formal methods, in a form of an interdisciplinary paradigm that we call\nsystem co-engineering (see [1] and the references therein). Co-engineering is a creative process combining concepts and techniques from two different scienti\xef\xac\x81c disciplines. In our approach, the system\nco-engineering is multi-dimensional, integrating formal engineering, control engineering, and mathematical engineering. The integration process departs from a mathematical model of complex systems\ncalled stochastic hybrid processes (SHS) [3].\n\n2\n\nCyber-physical systems: autonomy and communication\n\nDesigning safe autonomous space systems requires accurate and holistic models, where all interactions\nbetween orthogonal system features can be understood. In a formal approach, the \xef\xac\x81rst step will be to\nde\xef\xac\x81ne formal models for which these interactions can be mathematically studied. Such systems would\ninvolve digital control of some devices with continuous dynamics and embedded in a physical environment. They are also uncertain in the sense that they are subject to some random perturbations from the\nphysical environment. Moreover, we adopt a holistic view by studying each device in its deployment\ncontext and by proposing a concurrent model. For example, in the case of an outerspace aircraft there\ncan be communications with the ground control or/and with the ISS. Another example is that of two\nextra-terrestrial rovers that co-ordinate their activities by communicating complex data (position, etc.).\n\n2.1\n\nA formal model for cyber-physical systems\n\nFirst, we need to model the physical environment. For simplicity, we consider the system state space\nto be a subset X of the Euclidean space of dimension n (the number of relevant parameters). A system\nwill evolve within a set Q of regions (that we call formally modes or locations) de\xef\xac\x81ned as a sort of\ntopological sets (that could be open/closed/compact sets, and so on). Each mode q \xe2\x88\x88 Q is characterized\nby a predicate \xce\xb2 q . The random perturbations are modeled as a \xe2\x80\x9dwhite\xe2\x80\x9d noise, i.e. in each region there is\nde\xef\xac\x81ned a Wiener process (Wt ,t \xe2\x89\xa5 0). Note that, in different regions, the system can be subject to different\ntypes of perturbation.\n\nFigure 1: Simple and hierarchical cyber-physical systems\n177\n\nCo-engineering Communicating Autonomous CPS\n\nM. Bujorianu\n\nIn each location, the system dynamics is described by a system of deterministic differential equations\n(usually a \xef\xac\x81rst order moving equations), called the designed behavior. In practice, because the system\nbehavior is affected, in each location, by a white noise, the resulted dynamics is described by a stochastic\ndifferential equation (SDE): dx(t) = f q (x(t))dt + \xcf\x83 q (x(t))dWt and we call that the physical dynamics.\nThe controller transitions are discrete transitions between locations that are triggered by Boolean\nguards B. We call these controlled transitions. However, there is also a class of discrete transitions that\ntake place because of the system autonomy and that are called spontaneous (or autonomous) transitions.\nSome controlled transitions have communication labels l, usually denoting a communication channel.\nThese are called communication triggered transitions. The data types that can be transmitted throughout\ncommunication channels are speci\xef\xac\x81c to a mode. We denote by \xce\xb3 q the predicate that state the correctness\nof communicated data.\nIn order to predict, evaluate and control the physical dynamics on long time, we need to associate\nprobabilities to all discrete transitions. We call these jump probabilities and we denote their rates by\n\xce\xbb . Using the jump probabilities, a discrete transition can be formalised by means of a stochastic kernel\nR : X \xc3\x97 B(X) \xe2\x86\x92 [0, 1], where B(X) represents a class of universal measurable subsets of X. This is a\nspecial function, which is measurable in the \xef\xac\x81rst argument and a probability measure in the second.\nThe full formal model is described in [1]. The jump probabilities can be de\xef\xac\x81ned using the stochastic\nkernel and various parameters of the physical dynamics. This is the key to de\xef\xac\x81ne many sorts of stochastic\ndependencies between the physical behaviors (physics) and discrete transitions (the computation).\nEach execution path is a Markov string [3]. As result, the global dynamics can be formalised as a\nMarkov process (more speci\xef\xac\x81c, a stochastic hybrid process).\n\n2.2\n\nDegrees of autonomy\n\nConsidering the very harsh and highly unpredictable environments, in which space systems are deployed,\na large autonomy and high reliability are desirable. In this subsection we follow the white box view by\nde\xef\xac\x81ning an original structural classi\xef\xac\x81cation of autonomous system and indicate how communication can\nbe added by a top feedback to CPS.\nThe autonomy degree of a system is\n\xe2\x80\xa2 (no feedback) of level zero (i.e. the system is non-autonomous) if the system is without any feedback\nconnection between or within its components.\n\xe2\x80\xa2 (nested feedback) of level n if is obtained by a feedback connection between a system of (n \xe2\x88\x92 1) degree\nwith a system with a degree inferior to (n \xe2\x88\x92 1) (see Fig. 2 A.).\nLet us denote the class of n degree systems by DS(n). A balanced feedback coupling is a feedback\nconnection for which n \xe2\x88\x92 k \xe2\x89\xa4 2. The control of an un-balanced autonomous system is more dif\xef\xac\x81cult.\n\nFigure 2: Nested feedbacks: latch, automaton, processor, cyber-physical system\nLet us consider in the DS(0) class all combinational circuits and systems. Then the DS(1) class\ncontains the elementary memory functions (consider NOR gates for the components from Fig. 2 A.). The\nDS(2) class contains execution (i.e. combinatorial) elements coupled with a memory, i.e. the automata\n178\n\nCo-engineering Communicating Autonomous CPS\n\nM. Bujorianu\n\n(Fig. 2. B). The processors are in the DS(3) class (Fig. 2. C), and in the DS(4) class the computer (the von\nNeumann architecture) can be de\xef\xac\x81ned (as a un-blanced couple between a processor and a memory). We\ncan make a correspondence between this hierarchy and the formal languages hierarchy: DS(2) class ->\nregular languages; DS(3) class -> context-free languages; DS(4) class -> context-sensitive languages.\nWhen considering for level zero a continuous dynamical system we get a hierarchical hybrid system\n[6] (Fig. 1. B). A CPS contains at least three nested feedbacks (Fig. 2. D), its autonomy degree being\nthus higher then \xef\xac\x81ve (the controller is supposed to be a DS(2) automaton).\nIn [5], a feedback is modeled as a generalised relation (a span\nas in category theory) between\nsuccesive instances of the plant, modeled as objects in a suitable category. The message passing communication in a CCS style is de\xef\xac\x81ned as relations (i.e. spans, i.e. feedback) between systems. This\nconstruction can be straight forward applied to the category of SHS de\xef\xac\x81ned in [4]. Because we have\nshown in the previous section that the behaviors of CPS is a SHS, the construction can be also applied to\nCPS. A network of communicating autonomous CPS has an autonomy degree higher then six.\n\n2.3\n\nCommunicating cyber-physical systems\n\nThe study of communication in computer science produced a large number of formal models. Not surprisingly, there is wealth of formal models for hybrid systems, and even more for probabilistic systems.\nHowever, for more complex systems like SHS communication is less studied [7, 8]. A reason might\nbe the lack of interdisciplinarity, i.e. the communication is not studied in relationship with control and\nstochastic modeling. This observation is the departing point of our approach in de\xef\xac\x81ning communicating\nCPS in black box style.\nThe message passing is de\xef\xac\x81ned as an one-way communication that takes place only when the sender\nexecutes a communication triggered transition.\nl,B,R,a\n\nl,R,\xce\xbb\n\nl,B,R,a\n\nWe denote by q \xe2\x86\x92 q , q \xe2\x86\x92 q and q\nq respectively the communication triggered, controlled,\nand autonomous transitions from q to q with label l, guard B, reset map R and communicated data stored\nin the variable a. The appearance of B, a and \xce\xbb is optional.\nA communication label has two forms: l =!a, meaning the value of a is send throughout the channel\nl or ?b, meaning the value received the channel l is stored in the variable b. If the label l has the form !a\nthen the label l is like ?b and viceversa.\nThe parallel composition of two CPS (with components indexed as 1 and 2) has the parameters:\n\xe2\x80\xa2 Q = Q1 \xc3\x97 Q2 ;\n\xe2\x80\xa2 its state space is embedded in the product of the Euclidean spaces corresponding to the two CPS;\n\xe2\x80\xa2 the perturbation is modeled by the product of the two Wiener processes that describe the perturbations\ncorresponding to the two CPS;\n\xe2\x80\xa2 its modes (locations) are obtained by means of tensor products of the component locations;\nf q1\n\xcf\x83 q1\n\xe2\x80\xa2 f (q1 ,q2 ) =\nand \xcf\x83 (q1 ,q2 ) =\n;\nq2\n\xcf\x83 q2\nf\nThe concurrent composition adds the following transition rules to a parallel composition\nq1\n\nl,B1 ,R1 ,a\n\n\xe2\x86\x92\n\nq1 , q2\n\nl,B2 ,R2 ,b\n\n\xe2\x86\x92\n\nq2\n\n,\n\nl,B,R,c\n\nq1\n\nl,B1 ,R1 ,a1\n\n\xe2\x86\x92\n\nq1 , q2\n\nl,B2 ,R2 ,a2\n\n\xe2\x86\x92\n\nl,B,R,a1\n\nl,R1\n\nq2\n\n,\n\nq1\n\nl,R\n\n(q1 , q2 ) \xe2\x86\x92 (q1 , q2 )\n\nl,B1 ,R1 ,a1\n\n\xe2\x86\x92\n\n(q1 , q2 )\n\n,\n\nl,R2 ,\xce\xbb ,b\n\n; q2\n\nq1 , q2\n\nl,B ,R,a1\n\n\xe2\x86\x92\n\nl,R2 ,\xce\xbb ,a2\n\n;\n\nl =!a, B = B1 \xc3\x97 B2 , B = B1 \xc3\x97 \xce\xb2 q2 ,R = R1 \xc3\x97 R2\n\nq1 \xe2\x86\x92 q1 , q2\nl,R\n\n(q1 , q2 ) \xe2\x86\x92 (q1 , q2 )\n\n,\n\nq2\n\nwhere B = B1 \xe2\x88\xa7 B2 \xe2\x88\xa7 \xce\xb2 q\n\n(q1 , q2 )\n\nl\n\nl,R1\n\nl\n\nq1 , q2\n\n(q1 , q2 ) \xe2\x86\x92 (q1 , q2 )\n\n(q1 , q2 ) \xe2\x86\x92 (q1 , q2 )\nq1 \xe2\x86\x92 q1 , q2\n\n\xe2\x86\x92\n\nl,B ,R,c\n\n(q1 , q2 ) \xe2\x86\x92 (q1 , q2 )\nq1\n\nl,B1 ,R1 ,a\n\nq1\n(q1 , q2 )\n179\n\nl,B1 ,R1 ,a1\n\n\xe2\x86\x92\n\nl,B1 ,R1 ,a1\n\n\xe2\x86\x92\n\nq1\n(q1 , q2 )\n\nCo-engineering Communicating Autonomous CPS\n\nq1\n\nl,R1 ,\xce\xbb 1\n\n(q1 , q2 )\n\nq1 , q2\n\nl,R,\xce\xbb\n\nl\n\n,\n\n(q1 , q2 )\n\nl,B1 ,R1\n\nq1 \xe2\x86\x92 q1 , q2\nl,B,R\n\nl\n\nl\n\n, q2\n\n(q1 , q2 )\n\nl,R2 ,\xce\xbb 2\n\nl,R,\xce\xbb\n\nq2\n\n(q1 , q2 )\n\nl,R1\n\n,\n\nl,B1 ,R1\n\nl,R2\n\nq1 \xe2\x86\x92 q1 , q2 \xe2\x86\x92 q2\nl,R\n\n(q1 , q2 ) \xe2\x86\x92 (q1 , q2 )\n\n,\n\nl,B2 ,R2\n\nq1 \xe2\x86\x92 q1 , q2 \xe2\x86\x92 q2\nl,R\n\n(q1 , q2 ) \xe2\x86\x92 (q1 , q2 )\n\nl\n\n(q1 , q2 ) \xe2\x86\x92 (q1 , q2 )\nq1\n\nq1\n\nM. Bujorianu\n\nwhere B = B1 \xc3\x97 \xce\xb3 q2 and R = (R1 \xc3\x97 1) ((x1 , x2 ), \xc2\xb7) = R1 (x1 , \xc2\xb7) \xe2\x8a\x97 1x2 ,\n\nl,B2 ,R2\n\n, q2 \xe2\x86\x92 q2\nl,B,R\n\n(q1 , q2 ) \xe2\x86\x92 (q1 , q2 )\nl,R1\n\nq1 \xe2\x86\x92 q1 , q2\nl,R\n\nl\n\n,\n\nwhere B = \xce\xb3 q1 \xc3\x97 B2 and R = 1 \xc3\x97 R2\nq1\n\nl\n\nl,R2\n\n, q2 \xe2\x86\x92 q2\nl,R\n\nwhere R ((x1 , x2 ), \xc2\xb7) = R1 (x1 , \xc2\xb7) \xe2\x8a\x97 R2 (x2 , \xc2\xb7) x1 \xe2\x88\x88 \xe2\x88\x82 X q1 , x2 \xe2\x88\x88 X q1\n\n(q1 , q2 ) \xe2\x86\x92 (q1 , q2 ) (q1 , q2 ) \xe2\x86\x92 (q1 , q2 )\nThe transition map \xce\xbb is given by \xce\xbb (x1 , x2 ) = \xce\xbb 1 (x1 ) for all x1 \xe2\x88\x88 X q1 and x2 \xe2\x88\x88 X q1 ;\nIf one CPS agent is able to execute a send event and the other CPS agent does not have a matching\nreceive event, then the \xef\xac\x81rst agent executes the transition while the second agent stays in the same location. If contrary, the \xef\xac\x81rst agent can execute a controlled transition and the second agent has a matching\ncommunication triggered transition, then both agents execute respectively the send and communication\ntriggered transitions at the same time. If the \xef\xac\x81rst agent has a communication triggered transition with\nlabel l and the second agent has no communication triggered transition with label l, then the composed\nsystem has a communication triggered transition with label l outgoing from the joint location, which\ngives the possibility to interact with other CPS agent, in an other composition context. If both agents\nhave a communication triggered transition with the same label, then the composed system also has a\ncommunication triggered transition with this label. The implication of this fact is that both agents can\nexecute the communication triggered transitions at the same time in another composition context where\na third CPS agent executes a communication transition with the same label.\nThe main advantage of the reference model described in this paper is that it allows combinations of veri\xef\xac\x81cation techniques from different disciplines. For example reachability analysis can be carried out using\ncomputational methods from statistics and optimal control.\n\nReferences\n[1] Marius C. Bujorianu., Manuela L. Bujorianu, and Howard Barringer: A Formal Framework for User Centric\nControl of Probabilistic Multi-Agent Cyber-Physical Systems. Proc. of the 9th CLIMA workshop, Springer\nLNCS, (2008), in press.\n[2] Marius C. Bujorianu and Manuela L. Bujorianu: Towards Hilbertian Formal Methods Proc. of Conf. on\nApplication of Concurrency to System Design ACSD, IEEE Press (2007): 240-241.\n[3] Manuela L. Bujorianu and John Lygeros: Towards Modelling of General Stochastic Hybrid Systems. In\n\xe2\x80\x9cStochastic Hybrid Systems: Theory and Safety Critical Applications\xe2\x80\x9d LNCIS 337 (2006).: 3-30.\n[4] Manuela L. Bujorianu, John Lygeros and Marius C. Bujorianu: Bisimulation for General Stochastic Hybrid\nSystems. In Proc. of HSCC, Springer LNCS 3414 (2005):198-216.\n[5] Marius C. Bujorianu: Integration of Speci\xef\xac\x81cation Languages Using Viewpoints. In Proc. of Integrated Formal\nMethods, Springer LNCS 2999, (2004): 421-440.\n[6] John Lygeros: Hierarchical, Hybrid Control of Large Scale Systems, Ph.D. Thesis, University of California,\nBerkeley (1996).\n[7] Jose Meseguer and R. Sharykin: Speci\xef\xac\x81cation and Analysis of Distributed Object-Based Stochastic Hybrid\nSystems. Springer LNCS 3927 (2006): 460-475.\n[8] Stefan S. Strubbe, Agung Julius and Arjan van der Schaft: Communicating Piecewise Deterministic Markov\nProcesses. Conf. on Analysis and Design of Hybrid Systems (2003): 349-354.\n\n180\n\n'