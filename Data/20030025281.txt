b'Timekeeping for the Space Technology 5 (ST-5) Mission\nDave Raphael\nNASNGSFC\nCode 561\nGreenbelt, MD 2077 1\n301-286-0178\nDavid.Rauhae1-l@nasa.gov\n\nPhil Luers\nNASNGSFC\nCode 561\nGreenbelt, MD 2077 1\n30 1-286-5777\nPhiliu.J.LuersO,nasa.gov\n-\n\nVictor Sank\nGSFC/QSS Group, Inc.\nCode 567\nGreenbelt, MD 2077 1\n30 1-286-2645\nVictor.J.SankO,asfc.nasa.gov\n-\n\nAbstract - Space Technology 5, or better known as ST-5, is\na space technology development mission in the New\nMillennium Program (NMP) and NASA\xe2\x80\x99s first experiment\nin the design of miniaturized satellite constellations. The\nmission will design, integrate and launch multiple spacecraft\ninto an orbit high above the Earth\xe2\x80\x99s protective magnetic\nfield known as the magnetosphere. Each spacecraft\nincorporates innovative technology and constellation\nconcepts which will be instrumental in future space science\nmissions. A total of three ST-5 spacecraft will be launched\nas \xe2\x80\x9csecondary\xe2\x80\x9d payloads into a highly elliptical geosynchronous transfer orbit, and will operate as a 3-element\nconstellation for a minimum duration of 90 days.\n\nIn order to correlate the time of science measurements with\norbit position relative to the Earth, orbit position in space\n(with respect to other objects in space) and/or with events\nmeasured on Earth or other spacecraft, accurate knowledge\nof spacecraft and ground time is needed. Ground time as\nused in the USA (known as Universal Time Coordinated or\nUTC) is maintained by the U.S. Naval Observatory.\nSpacecraft time is maintained onboard within the Command\nand Data Handling (C&DH) system.\nThe science\nrequirements for ST-5 are that spacecraft time and ground\ntime be correlatable to each other, with some degree of\naccuracy.\nAccurate knowledge of UTC time on a spacecraft is\nrequired so that science measurements can be correlated\nwith orbit position relative to the Earth, orbit position in\nspace and with events measured on Earth or other\nspacecraft. The most crucial parameter is not the clock\noscillator frequency, but more importantly, how the clock\noscillator frequency varies with time or temperature (clock\noscillator drift). Even with an incorrect clock oscillator\nfrequency, if there were no drift, the frequency could be\nassessed by comparing the spacecraft clock to a ground\nclock during a few correlation events. Once the frequency\nis accurately known, it is easy enough to make a regular\n\n\xe2\x80\x99 0-7803-7651-X/03/$17.00 0 2003 IEEE\n\n* IEEEAC paper # 1418, Updated December 3,2002\n\nGeorge Jackson\nNASA/GSFC\nCode 561\nGreenbelt, MD 2077 1\n301-286-3255\nGe0rge.L.Jackson@nasa.gov\n-\n\nadjustment to the spacecraft clock or to calculate the correct\nground time for a given spacecraft clock time. The\noscillator frequency, however, is temperature dependent,\ndrifts with age and is affected by radiation; hence, repeated\ncorrelation measurements are required.\nTABLE CONTENTS\nOF\n1\n2\n3\n4\n\n5\n\n6.\n\n7.\n\n8.\n\n9.\n10.\n11.\n\nINTRODUCTION\n\nST-5MISSION\nOVERVIEW\nPROGRAM TECHNOLOGIES\nNEWMILLENNIUM\nTIMING\nREQUIREMENTS\n4.1 Accuracy Requirement\n4.2 Knowledge Requirement\n4.3 Origin of Timing Requirement\n4.3.1\nScience Rationale\nIncremental Time with Respect to\n4.3.2\nScience Data\n4.3.3\nNavigation and Tracking Time\nRequirement\n4.3.4\nData Time Tagging Requirements\nRETURN DATA\n\nDELAY\n(RDD) TIME\nCORRELATION\n\nMETHOD\nSPACECRAFT\nIMPLEMENTATION\n6.1 C&DH Hardware\n6.2 Flight Software\n6.2.1 Spacecraft Universal Time (S/C UT)\n6.2.2\nUT Correction Factor (UTCF)\n6.2.3 Leap Seconds\n6.2.4\n1 Hz Adjust Mechanism\n6.2.5\nOnboard Time Management\nST-5 CORRELATION\nMETHOD\n7.1 One Way Method: Return Data Delay (RDD)\nBasic Concept, Return Data Delay\n7.1.1\nMethod\nGROUND\nSTATION\nTIMEKEEPING\nCONCLUSION\nACRONYM\nLIST\nBIOGRAPHIES\n\n~\n\nI\n\nI\n\n1. INTRODUCTION\n\ngeo-synchronous transfer orbit, with a period of about 10.5\nhours, a perigee distance of about 220 kilometers (km) and\nan apogee distance of about 38,000 km. All three will share\nthe same orbit plane, and the separation distance between\nspacecraft near apogee is expected to be between 100 and\n1,000 km. The spacecraft spin rate will be about 20\nrevolutions per minute (RPM).\n\nThe C&DH hardware will meet the following requirements\nfor ST-5:\nTime correlation knowledge between two spacecraft\nshall be less than 10 milliseconds (ms).\nTime correlation knowledge between spacecraft\nUniversal Time and UTC shall be less than 5 ms.\ne\nTime correlation data fiames from the spacecraft shall\nbe time tagged to an accuracy of at least 0.5 ms of\nonboard spacecraft time.\ne\nSpacecraft Universal Time vs. UTC shall be less than or\nequal to 1 second over one complete orbital period over\nnormal operational temperature ranges.\n0\nTemperature measurements of the onboard clock shall\nbe telemetered to the ground to facilitate clock stability\ncalculations.\nTime tagging of science validation data shall have a\nresolution of at least 0.1 ms.\n0\nThe spacecraft shall provide the ability to update and\nadjust the onboard clock.\n\xe2\x80\x99\n\n3. NEWMILLENNIUM\nPROGRAM\nTECHNOLOGIES\nThe purpose of NASA\xe2\x80\x99s New Millennium Program is to\ndevelop and flight validate the critical \xe2\x80\x9cbreakthrough\xe2\x80\x9d\ntechnologies that are needed to enable the space science and\nEarth science missions of the future. For ST-5, the focus is\non the small, low-mass and low-power theme. These\ntechnologies include a miniature and low-power X-band\ntransponder for uplink and downlink, a cold gas microthruster (CGMT) propulsion system, two variable emittance\ncontrollers (VEC) for the thermal subsystem, \xe2\x80\x9cflex\xe2\x80\x9d harness\ninterconnects for the solar panels, and a new type of 1/2 volt\nCMOS ultra low-power, radiation-tolerant (CULPRiT)\nlogic. The 112 volt CULPRiT technology, which is latchup\nimmune and hardened for up to 100 kilorads (krads) of total\nionization dose, will be verified as an integral part of the\nC&DH subsystem.\n\nThis paper provides an overview of the method that will be\nused to determine the difference or error between the\nspacecraft and ground, and also maintenance methods for\nkeeping the spacecraft within specifications.\nThe C&DH hardware uses a 24 MegaHertz (MHz) oscillator\nas baseline and the design for the spacecraft timer is\nincorporated into an Actel 54SX32 Field Programmable\nGate Array (FPGA).\n\n4. TIMING\nREQUIREMENTS\n4. I Accuracy Requirement\n\nSpacecraft (S/C) Universal Time vs. UTC shall be less than\nor equal to 1 second over one complete orbital period over\nnormal operational temperature ranges.\n\n2. ST-5MISSION\nOVERVIEW\nThe Space Technology 5 mission is a part of NASA\xe2\x80\x99s New\nMillennium Program (NMP). The ST-5 project is an inhouse development managed at the Goddard Space Flight\nCenter in Greenbelt, Maryland. A primary goal of ST-5 is\nto provide a proof-of-concept demonstration for future\nnano-satellite constellation missions. The project will\naccomplish this by developing and flying a satellite\nconstellation comprised of three small, low-power, fullservice spacecraft, each with a total mass of about 25\nkilograms (kg). During the three-month mission, each of\nthe spacecraft will demonstrate several NMP nano-satellite\nand constellation-enabling technologies. Major goals\ninclude showing that multiple spacecraft can operate\ntogether as a single constellation (and not just a group of\nindividual units) and showing that a very small spacecraft is\ncapable of research-quality science measurements.\n\nThe ST-5 S/C time shall never differ from UTC by more\nthan 1 second. Since the ST-5 S/C is without ground\ncontact for the majority of the time, the S/C clock drift must\nbe sufficiently small that this requirement is met at all times\nduring the ST-5 orbit.\nMeasuring, correlating and\ncorrecting the spacecraft time may be performed during\nevery ground pass.\n4.2 Knowledge Requirement\n\nTime correlation knowledge between two spacecraft shall be\nless than 10 milliseconds (ms). Time correlation knowledge\nbetween spacecraft Universal Time and UTC shall be less\nthan 5 ms.\nThe ST-5 individual spacecraft times shall be correlated to\none another with an accuracy of 10 ms. In lieu of interspacecraft communication, the derived requirement shall be:\nThe ST-5 S/C time shall be correlatable to UTC with an\naccuracy of 5 ms.\n\nEach 25-kg spin-stabilized spacecraft has a total power\nbudget of approximately 22 watts, which is provided by\nhigh-efficiency, triple-junction solar cell arrays and a\nlithium-ion battery. The three ST-5 spacecraft will be\nlaunched as \xe2\x80\x9csecondary\xe2\x80\x9d payloads into a highly elliptical\n\n4.3 Origin o Timing Requirement\nf\n2\n\n4.3.1\n\nScience Rationale\n\nThe assumption of the 2-minute data collection cycle relates\nto another parameter, orbit position accuracy. The perigee\nvelocity for a GTO orbit is 10.25 km/s and the apogee\nvelocity is 1.60 km/s relative to the earth. At apogee, the\nspacecraft will travel (1.6 km/s) x (20 s) = 32 km during one\ndata collection cycle and at every other point in the orbit, it\nwill travel further, up to (10.25 km/s) x (120 s) = 1230 km\nat perigee. The scientist will have to decide if this meets the\nscience requirement, the purpose here is to realize that a 50\nkm or greater orbit position, error may be well within the\nscience requirement especially for missions that map large\nregions of space.\n\nScience Requirement\n1. \xe2\x80\x9cScience events\xe2\x80\x9d (MHD waves, magnetic field\nvariations, energetic particle injection fronts, etc.) all\npropagate at the local Alfven speed -1,000 to 5,000\nkilometers per second (km/s) at ST-5 altitudes.\n2. ST-5 inter-SIC spacing will be -100 km.\n3. Time difference between the arrival of science events\namongst the 3 spacecraft will be -20 to 100 ms.\n4. To determine propagation characteristics (k-vectors\npolarization, phase speed, etc.) for these science events,\nthe accuracy of the magnetic field time tagging at each\nspacecraft (relative to each other) should be Moth of\n20-100 ms (i.e., 2-10 ms).\n\nAnother parameter to consider is earth\xe2\x80\x99s velocity around the\nsun, which is about 30 M s . For mapping the earth\xe2\x80\x99s\nmagnetosphere which is attached to the earth, this velocity\nmay not be a factor but it is large compared to the satellite\nvelocity relative to the earth.\n\nImpact of reduced accuracy requirement:\n1. With better than 10 ms timing accuracy, ST-5 may\nmake some important new \xe2\x80\x9cdiscoveries\xe2\x80\x9d relating to the\ndynamics of the inner magnetosphere.\n2. Between 10-100 ms accuracy, there is hope that the\ndata will still be meaningful.\n3. After 100 ms, it may not be possible to really intercompare the measurements for many scientific purposes\nin a meaningful manner.\n4.3.2\n\n4.3.3\n\nNavigation and Tracking Time Requirement\n\nOrbit determination is done on the ground and does not\nmake use of the onboard clock. Although attitude\ndetermination is also done on the ground, it makes use of\nobservations made on board that make measurements of the\nSun and the Earth\xe2\x80\x99s magnetic field. A spacecraft time tag is\nattached to these measurements and the information is\ntelemetered to the ground, to be used for this processing.\n\nIncremental Time with Respect to Science Data\n\nAssumptions will be made based on some of the\ncharacteristics of the Wind electron and ion detector. Clock\ncorrelation with UTC will be discussed in a later section.\n\n4.3.4\n\nData Time Tagging Requirements\n\nTime tagging will be provided for the following:\nThere is an assumption that as the spacecraft spins, particle\ncollection data will be binned based in units of 30\xe2\x80\x9d,i.e. each\nrotation is broken into 12 regions of space. Since the clock\n(counter) will drift, pointing direction cannot depend on it\nalone, however, since data from a given section of space is\nlikely to be average over only a few minutes, the angular\nerror will be of the order of (120 s) x (1x 10\xe2\x80\x9c) x ( 120\xe2\x80\x9d/s) =\n14.4 millidegrees in 2 minutes, which is insignificant. If the\nsector size were much less than 30\xc2\xb0, this accuracy would\nneed to be re-evaluated and the number of clock pulses per\nrotation (based on Sun pulse) may need to be updated more\noften.\n\n1. Sun Crossing\n2. Magnetometer Vector\n3. Downlink\n4. Every 1 sec interval\n5. S/W Trigger\n6. External Trigger\n\n5 . RETURN DATA\nDELAY\n(RDD) TIME\nCORRELATION\nMETHOD\nThe one way method of return data delay is reasonably\nsimple and most common because it has the minimum\nequipment requirement, however its accuracy is limited and\nit is prone to mistakes when an attempt is made to use it for\naccuracy better than about 1 ms. In this method, a specific\nevent in the downlink stream is time tagged on the\nspacecraft, and its ground receipt time is recorded by the\nground station. Comparing these two times, taking into\naccount delays through hardware and the actual\ntransmission time, will indicate how far ahead or behind\nUTC the ST-5 spacecraft is.\n\nOver the long term, the direction in space that is allocated to\neach bin will drift if all that is used is the clock to control\nthe data binning. Based on the 1 part per million (ppm),\nclock drift rate and 120\xe2\x80\x9d/s spin rate, a 30\xe2\x80\x9d error will occur\nafter (3O0)/(12Op0/s)= 250,000 s = 2.9 days. If the clock is\nnot updated or compared to the attitude sensor (Sun pulse),\nthis precession of bin positions relative to an inertial (nonrotating) coordinate system will occur. Updating the\nnumber on clock counts per rotation will solve the problem.\nA clock correlation table will need to be maintained on the\nground for each spacecraft. A separate table containing\nattitude sensor data as a function of clock count will also be\nrequired. As an alternative, the rotation rate and phase can\nbe maintained as a function of UTC.\n\n6. SPACECRAFT\nIMPLEMENTATION\n3\n\nsampled and stored in one of two distinct 110-mapped 16-bit\nregisters (bits 15:O) under the following conditions:\n1. The MET value is latched and stored in the \xe2\x80\x9cSun\nCrossing Time Latch\xe2\x80\x9d in response to a Sun\nCrossing pulse.\n2. The MET value is latched and stored in the\n\xe2\x80\x9cDownlink Time Correlation Trigger Latch\xe2\x80\x9d in\nresponse to a Downlink Time Correlation pulse.\n\n6.1\xe2\x80\x99 C&DH Hardware\n\nThere are 31,557,600 seconds in an average year (24 x\n3,600 x 365.25 = 31,557,600) requiring a minimum of 25\nbits (225 = 33,554,432) to represent seconds. For a\ngranulation of 1 microsecond (ps) in the sub-seconds\nportion of the time, a minimum of 20 bits are required,\nhence a minimum of 45 bits are required.\n\nIt also shows how the value of the SST is sampled and\nstored in one of five distinct 110-mapped 22-bit registers\n(bits 2 1:0) under the following event conditions:\n1. The SST value is latched by the 1 Hz MET clock\ninput and stored in the \xe2\x80\x9c1 Second Latch\xe2\x80\x9d register\nevery second.\n2. The SST value is latched and stored in the\n\xe2\x80\x9cSoftware-Triggered Latch\xe2\x80\x9d register when there is\na software memory write.\n3. The SST value is latched and stored in the\n\xe2\x80\x9cExternal Trigger Latch\xe2\x80\x9d upon receipt of an active\nlow pulsed signal from the C&DH test connector.\n4. The SST value is latched and stored in the \xe2\x80\x9cSun\nCrossing Time Latch\xe2\x80\x9d in response to a Sun\nCrossing pulse.\n5. The SST value is latched and stored in the\n\xe2\x80\x9cDownlink Time Correlation Trigger Latch\xe2\x80\x9d in\nresponse to a Downlink Time Correlation pulse.\n\nThe C&DH Mission Elapsed Timer (MET), as its name\nsuggests, provides an ongoing count of the actual time\nelapsed on the spacecraft. This counter is combined with\nthe software-loaded offset timing number in a processor\nmemory location to represent the actual UTC time.\nThe MET consists of a 32-bit up-counter clocked by a 1 Hz\nclock input. This provides sufficient capability to count up\nto 232 seconds (4,294,967,296 seconds = 49,710 days or\napproximately 136 years) before the MET counter rolls\nover. The MET seconds is cleared only during a board\npower-up reset. In addition, the MET can be \xe2\x80\x9cjammed\xe2\x80\x9d\nwith a 32-bit value by the flight software via ground\ncommand to set the mission elapsed timer to the desired\ninitialization value. Jamming the MET register is\xe2\x80\x99usefhl for\nsetting the MET to a specified value for troubleshooting and\ntest purposes, as well as for reinstating the previous MET in\nthe event that the MET register is cleared due to a power-on\nreset while in flight.\n\nFigure 2 illustrates how the Magnetometer (MAG) time\ntagging is transferred from one FPGA to the next. The\nMET and SST values are stored in the \xe2\x80\x9cMAG Vector\nTrigger Latch\xe2\x80\x9d in response to a MAG Time Tag Latch. The\n48 bits of time tag are transferred a byte at a time.\n\nThe Sub-seconds Timer (SST), like the MET, keeps track of\nelapsed time by keeping a sub-seconds time count. The subseconds count can be latched and stored at certain events,\nthe value being used by the spacecraft to time tag specific\ndata and events. The SST consists of a 22-bit up-counter\nclocked by a 1 MHz clock input. This provides the C&DH\nboard with the ability to keep track of sub-seconds time at a\nresolution of 1 psec. The SST counts up to its maximum\nvalue of approximately 4.194 seconds before rolling over to\nzero and continuing its count.\n\n6.2 Flight Software\nSpacecraft Universal Time (YC UT)\n6.2.I\n\nThe S/C UT is the sum of three values: the Mission Elapsed\nTime (MET), the UT Correction Factor (UTCF), and the\nleap seconds. S/C UT has a resolution of 1 microsecond\nand is used for stored command processing.\n\nThe spacecraft hardware time is composed of the sum of the\nseconds counter and the sub-seconds counter.\n\nBecause of the complexity of storing numbers like\n12:OO:OO.OOO Noon 13 February, 2001 or 00-04417:OO:OO.OOO GMT, times on the spacecraft are stored as a\nnumber of seconds since an arbitrarily chosen epoch. For\nST-5, the epoch has been chosen as 1 January 2000 12:OO\nGMT. The S/C UT will be stored as a number of seconds\nand sub-seconds since this mission epoch.\n\nIn order to perform the RDD correlation described above,\nthe C&DH will latch the seconds and sub-seconds time of\nthe transmission of every 16th Virtual Channel 0 (VCO\nmodl6) telemetry frame. The VCO mod16 frame will occur\napproximately every 162 seconds (252 x 8 x 5 + 32\nbits1frame x 16 frames x 1 ms/bit = 161.792 s). The flight\nsoftware will gather the latched hardware time of the\ntransmission of the frame, and calculate the SIC Universal\nTime of the transmission of the VCO mod16 frame.\n\nThe first part of the SIC UT is the Mission Elapsed Time\n(MET) counter. This telemetry point is incremented once\nper second by a 1 Hz clock input. The MET may be\njammed via ground command at any time, most notably it\nmay be jammed with a value upon spacecraft power-up.\n\nA block diagram of the Time Circuit is shown in Figure 1\nand Figure 2. Figure 1 shows how the value of the MET is\n\n4\n\nTC Pulse\nSun Presence Pulse\n\nPresence\nTriggm\nLatch\n\n-\n\nTrigger\n\nLatch\n\nFigure 1 - Time Circuit Block Diagram (1 of 2)\n&bit Latch\n\nMSB\n\nI\n\nI\n\n32-bit\nSeconds\nCounter\n\n\\\n\n(31:24)\nSets\n\n4\n\n(23:16)\nsets\n\n(158)\n\n/\n\nc\n\n3\n, 8\n\nMAG_TTAGP:O]\n\n/\n\n(To Instrument FPGA)\n\n(EO)\n\n/\n\nr\n\n/\n\nr\n\n2\n\nLSE\nSubsea\n22-bit\nSub-seconds\nCounter\n(6 bits ignored)\n\nMAG-TI\'AG-LATCH\n\nMAG-lTAG-CLK\n\n1\n\nSubsecs\n(136)\n\nI\n\n%Bit\n\nUP\n> Counter\n\nFigure 2 -Time Circuit Block Diagram (2 of 2)\n\n5\n\n,16\n/\n\n6.2,2\n\nUT Correction Factor (UTCF)\n\nIn order that the spacecraft time be adjustable, and that the\nMET not have discontinuities, the spacecraft maintains a\nground commandable correction factor, the UTCF. The\nUTCF is a static value, currently an unsigned integer only\nadjusted by ground command. Because of this, it will be\ninitialized to a large positive value, most likely 4 years if the\nlaunch is in late 2003. Iflwhen the spacecraft drifts ahead of\nground time, the UTCF will be decreased via ground\ncommand. Iflwhen the spacecraft drifts behind ground time,\nthe UTCF will be increased. The UTCF may be adjusted,\nvia ground command, at any time during the mission to\nkeep the S/C UT within 1 second of UTC.\n6.2.3\n\nLeap Seconds\n\nIn order to keep the cumulative difference in UT1\n(astronomical time) and UTC less than 0.9 seconds, a leap\nsecond is added to the atomic time to decrease the\ndifference between the two. This leap second can be either\npositive or negative depending on the Earth\xe2\x80\x99s rotation.\nSince the first leap second in 1972, all leap seconds have\nbeen positive and there were 22 leap seconds in the 27 years\nto January, 1999. This pattern reflects the general slowing\ntrend of the E r h due to tidal braking.\nat\n(hm://tvcho.usno.navv.mil/leapsec.html)\nSince 1972, there has been 22 leap seconds, happening at\nirregular intervals (as little as 6 months in 1972 and as long\nas 2.5 years from July 1985 to January 1988). The USNO\nhas posted months in advance a notice when leap seconds\nwill occur, and also when they have determined that they\nwon\xe2\x80\x99t occur.\nSince the ST-5 mission is using UTC as its time reference,\nthe spacecraft must keep up with the leap seconds\nadjustments made by the USNO. The Flight Software\n(FSW) maintains a telemetry point that reflects this. The\nspacecraft leap seconds may be commanded from the\nground at any time during the mission, and most likely this\nwill happen whenever the USNO decides that a leap second\nis necessary.\n6.2.4\n\nI Hz Adjust Mechanism\n\nThe C&DH Flight Software includes a mechanism for\ncompensating for a C&DH clock oscillator that is slightly\nfast or slightly slow, resulting in an overall clock drift.\nClock drift with respect to UTC basically means that every\ntime that the C&DH hardware indicates a second has\nelapsed, actually a time slightly smaller or slightly larger\nthan a second has passed. A ground commandable\nparameter, the 1 Hz adjustment factor can be applied to the\nMET to correct for clock drift. The Flight Software, when\nreading the MET, multiplies the difference between the last\nvalue and the new value by the 1 Hz adjustment factor every\nsecond to reduce clock drift.\n\n6.2.5\n\nOnboard Time Management\n\nTime is maintained in the FSW in Mission Elapsed Time\n(MET) and Universal Time (UT) formats. The UT format is\nneeded for stored command management and is calculated\non board by adjusting the MET, adding the Universal Time\nCorrection Factor (UTCF) and the Leap Seconds once per\nsecond.\nSIC UT = 1 Hz Adjustment Factor x MET + UTCF + Leap\nSeconds\nA startup sequence that results in a correctly configured S/C\nclock may be something like:\n1. Set the seconds portion of the MET (iam occurs\non 1 sec mark)\n2. Set UTCF (iamUTCF)\n3. Adjust UTCF by adding or subtracting a specified\nvalue < 2 ms (adjust UTCF)\n4. Set a 1 Hz adjustment factor to a specified\npositive or negative value\nThe ST-5 spacecraft maintains time in a combination of\nboth hardware and software. The Flight Software uses the\nhardware counters, the MET, the UTCF and the leap\nseconds to represent one single value, the S/C UT.\nMechanisms exist for coarse adjustment of SIC UT, fme\nadjustment of S/C UT and constant adjustment to reduce\nS/C UT drift with respect to UTC. The hardware supports\nthe S/C UT to UTC correlation method that will meet the\noverall mission time accuracy requirements.\n\n7. ST-5 CORRELATION\nMETHOD\n7.1 One Way Method: Return Data Delay (RDD)\n\nRDD is an open loop method and is also called the Return\nChannel Time Delay (RCTD) method of clock correlation.\nThe spacecraft records S/C UT of the VCO mod16 telemetry\nfiames. The ground system places UTC time tags on the\nfiames as they arrive at the ground (ground receipt time,\nGRT). It is then a simple matter to subtract the various\ndelays to determine the difference between S/C UT and\nUTC.\n7.1,I\n\nBasic Concept, Return Data Delay Method\n\nThe basic concept of RDD is as follows:\nTime tag data as it leaves the spacecraft with a\nSpacecraft clock reading.\n2. Time tag the data with a ground UTC value when the\ndata is received on the ground.\n3. Using orbit knowledge, calculate the transit time from\nspacecraft to ground including equipment delays and\nsubtract this value from the ground receipt time. The\nresult is the time that the data left the spacecraft, based\non UTC.\n1.\n\nCompare the result with the spacecraft clock reading in\nthe data.\n\nspacecraft telemetry frame length, the bit that receives the\nGRT is arbitrary relative to the beginning of frame.\n\nSpacecraft range, or range propagation delay, must be\nknown for the specific time of the transit of the telemetry\ncarrying the clock reading. This delay is reported by the\nFlight Dynamics Facility (FDF) in a product called a "range\nfile." The range to the spacecraft at the time that the\nbeginning of the fiame marker left the spacecraft antenna\nmust be used.\n\nAt the spacecraft operations center, knowledge of the\noccasional GRT allows interpolation so that the GRT of the\nfrst bit of each CCSDS frame marker (FM) can be\ncalculated. Knowledge of the orbit allows the calculation of\nthe position of the spacecraft when the signal was emitted\nand thus allows the radio frequency (RF) propagation time\nto be calculated. By subtracting the RF propagation time\nand equipment delays from the GRT for a particular\n(CCSDS) fiame, we have the time, based on ground UTC,\nthat this fiame left the spacecraft. Afier subtracting the\nspacecraft transmitter and associated delays (convolutional\ncoding, Reed-Solomon coding, etc.), we have the time,\nbased on UTC, that the spacecraft clock was read.\n\n4.\n\nSatellites using the NASA ground network use the one way\nRDD method for their clock correlation. The GN, DSN, SN\n(Space Network, not used by ST-5) and commercial\nnetworks place a time tag on spacecraft telemetry data as it\nis received on the ground (GRT) to an accurate to 1 ms or\nbetter.\n\nThe fust delay that the VCO mod16 encounters in getting to\nthe ground is the delay through the remainder of the C&DH\ndownlink circuitry, including the Reed-Solomon encoder,\nthe Cyclic Redundancy Check (CRC), and the CCSDS\nrandomizer which exclusive ORs the data with a PN pattern\n(if in use). In the diagram below, this time is collectively\ncalled ~C&DH. Note that tC&DH will definitely vary with\ntelemetry rate, and will have to be determined through\nanalysis and testing prior to launch.\n\nIn order to communicate with a satellite, we need to know\nwhere it is at a certain time so that a ground antenna can be\npointed. In addition, orbit knowledge allows the ground\nreceive system to anticipate the doppler offset of the\nsatellites carrier frequency so the ground receivers local\noscillators (LOs) can be set to compensate for the offset\nwhich then allows the receiver to find and lock to the signal\nin a reasonable amount of time. When the signal from the\nsatellite is weak, a large high gain ground antenna with a\nnarrow beamwidth is required. This implies that accurate\norbit knowledge is required on the ground and the antenna\npointing requirement may be the limiting factor that sets the\norbit accuracy requirement. This is not relieved or aided by\nGPS on the satellite or by satellite autonomy, In order to\nproperly point an 1 1-meter antenna to a satellite at 5 Re\nusing an X-Band communication signal (-8 GHz,\nbeamwidth of kO.I"), it is required that we know the orbit\nposition to about 60 km. This orbit accuracy parameter is a\nmajor contributor to the absolute time correlation accuracy\nallowing us to now discuss mission time correlation.\n\nThe second delay that the frame encounters is the delay\nthrough the RF system. The RF cables and antenna\nthemselves are negligible, however the modulation circuits\nwithin the X-Band transponder will have a measurable\neffect on the telemetry. In the diagram below, this is called\ntflNDR. Note that tpNDR will vary with telemetry rate, and\nwill have to be determined through analysis and testing prior\nto launch.\nThe next delay that the frame encounters is that of the actual\ntransmission between the spacecraft and the Earth. In the\ndiagram below, this is called tTMNSMIT. This delay must be\ndetermined during the ground contact as it will vary from\norbit to orbit. However, given the ST-5 timing requirement\nof 5 ms, an error of d = c x t = 3x10\' km/s x O.OO5sec =\n1500 km can be tolerated.\n\nAs a frame of data leaves the C&DH or data recorder on its\nway to the transmitter, the beginning of the first bit of the\nframe synchronization marker is used to trigger the latching\nof the MET. The S/C UT of the VCO mod16 frame is later\nsent to the ground (could be 1 second or 1 day later). On the\nground, a clock that is tied to UTC records the arrival time\nof the data, allowing us to determine the arrival time of the\nfirst bit of the Consultative Committee on Space Data\nSystems (CCSDS) frame, the bit that triggered the onboard\nMET reading.\n\nFinally the fiame arrives at the ground station and is formed\ninto a larger ground transfer block. The ground station\nrecords the receipt time of the first bit of the data portion of\nthe block and inserts this into the block header. In the\ndiagram below, this is called tUTC\nand it is generated for\nevery ground transfer block.\n\nThe ground time tagging is usually to an arbitrary data bit at\na regular but not necessarily periodic rate. This is called a\nground receipt time (GRT). On the ground, NASCOM\nblocks or internet protocol (IP) packets may be used to\ntransport the data to the science center. The first bit of\nevery 1/100th ground packet may receive a ground time tag\nin a special field that is part of the packet. Since the ground\npacket length will not in general be the same as the\n\nThe VCO mod16 frame is located somewhere within the\nground transfer block; this will vary from block to block.\nThe ground station software must locate the VCO mod16\nfiame within the ground transfer block and determine how\nmany bits are between the VCO mod16 frame and the first\nbit of the frame (the bit that is time-tagged as tuTc). The\nnumber of bits divided by the bit rate will give you the\noffset in time to the VCO mod 16 frame. In the above\n7\n\nVCO frame with 4 LSBs of sequence count = 0000\n(VCO mod 16 frame)\nevery 161 seconds (for 1 kbit/s H/K)\nGround Station forms\n4800-bit block\n(SFDU) and\ngenerates time tERT,\nthe time that the\ntrailing edge of the\nlast bit of the 4800bit block was\nreceived.\n\nC&DH latches ST and SST\nST-5 MOC must calculate tbl,,& the\ntime difference between the\nbeginning of the 4800-bit block and\nthe VCO mod 16 frame that was\ntime-tagged by the spacecraft.\n\nI\n\n~ERT\n\nFSW reads VCO mod16 frame time\nand forms telemetry tva,\nreported t o ground in time packet\n\nmm\n\n...\n\n-\n\nError = S/C UT UTC = t\n,\n\n- (t,R,\n\n+ tblock + ttmmi+\n+ tM\n\nI block\n\n+\n\nt,\n,)\n\n8. GROUND\nSTATION\nTIMEKEEPING\n\ndiagram, this is referred to as tBLmK, and will vary with\ntelemetry rate.\n\nThe ST-5 ground station will generate time tags for all of\nthe telemetry received from the ST-5spacecraft. This time\ntag will be forwarded in the block headers from the ground\nstation to the Mission Operations Center (MOC).\nGenerally, the ground station will assemble a block of data,\nand then record in the block header the UTC for the receipt\nof the first bit of data. The time in the block header\ncombined with the telemetry bit-rate allows us to calculate\nthe time of receipt of every bit in the telemetry stream.\n\nFinally, the ground station must perform the math to\ncorrelate the block time tag, tUTCwith the S/C UT of\ntransmission for the fiame, tvco.\n\nWhere:\ntvco is reported by flight software for every VCO mod16\nframe, varies from frame to fiame.\n\n9. CONCLUSION\n\nt T is generated by the ground station for every ground\nUC\ntransfer block, varies for every block.\n\nThe ST-5 timekeeping requirements are all very realistic\nwith the large amount of reuse of ground hardware and\nflight software. However, the C&DH, the Flight Software\nand the Ground Systems must all be very well coordinated\nin order to meet all the requirements.\n\ntBLmK is calculated by locating the VCO mod16 fiame\nwithin the ground transfer block, varies from frame to\nfiame.\nt R N MT is reported by the ground station in the form of\nTAS I\nranging information, varies for each ground station contact,\nor perhaps during the contact.\nt p D is determined by the transponder manufacturer prior\nXN R\nto delivery, varies with telemetry bit-rate, but fixed\notherwise (2 fixed values, one for 1 kilobit per second\n(kbps) and another for 100 kbps)\ntC&DH is determined by the C&DH design team prior to\ndelivery, varies with telemetry bit rate, but fixed otherwise\n(2 fixed values, one for 1 kbps and another for 100 kbps)\n8\n\n10. ACRONYM\nLIST\n\nNASCOM\nNMP\nNRZ-L\nNRZ-M\n\nConsultative Committee on Space Data\nSystems\nCommand & Data Handling\nCold Gas Micro-Thruster\nComplimentary Metal Oxide\nSemiconductor\nCyclic Redundancy Check\nCMOS Ultra Low-Power RadiationTolerant\nDeep Space Network\nFlight Dynamics Facility\nField Programmable Gate Array\nFlight Software\nGigaHertz\nGreenwich Mean Time\nGround Network\nGlobal Positioning System\nGround Receipt Time\nGoddard Space Flight Center\nGeosynchronous Transfer Orbit\nHertz\nkilobits per second\nkilogram\nkilometer\nkilometer per second\nMagnetometer\nMission Elapsed Time (or Timer)\nMegaHertz\nMission Operations Center\nmillisecond\nNational Aeronautics and Space\nAdministration\nNASA Communications\nNew Millennium Program\nNon-Return to Zero Level\nNon-Return to Zero Mark\n\nPPm\n\npart per million\n\nCCSDS\nC&DH\nCGMT\nCMOS\nCRC\nCULPRiT\nDSN\nFDF\nFPGA\nFSW\nGHz\nGMT\nGN\nGPS\nGRT\nGSFC\nGTO\nHz\nkbps\nkg\nkm\nkds\nMAG\nMET\nMHz\nMOC\nms\nNASA\n\nRDD\nRF\nRPM\nRS\nSIC\nSN\nSST\nST-5\nP\n\nUSNO\nUT\nUTC\nUTCF\nVEC\n\nReturn Data Delay\nRadio Frequency\nRevolutions Per Minute\nReed-Solomon\nSpacecraft\nSpace Network\nSub-Second Timer\nSpace Technology 5\nmicrosecond\nUS Naval Observatory\nUniversal Time\nUniversal Time Coordinated\nUniversal Time Correction Factor\nVariable Emittance Controller\n\n9\n\n.\n\n11: BIOGRAPHIES\nPhilip Luers is the\nAssociate Branch\nHead of the Flight\nData Systems &\nRadiation Effects\nBranch at\nNASMGoddard Space\nFlight Center. Philip\nhas been working the\nlast 13 years\ndeveloping\nelectronics and data\nhandling technologies and infusing them intofright\nmissions. He has worked to infuse new technologies into\nflight missions including M P , EO-I, T W M , XTE, ACE,\nand SAMPEX. He participated in the timekeeping\nvalidationfor M P , EO-], T M M andXTE missions. He\nhas technical oversight of the Branch\xe2\x80\x98s Flight Ethernet,\nUltra Low Power, Spacewire, and Firewire developments.\nHis past technology developments have included Essential\nServices Node, Mongoose V, Mongoose I, Rad-Hard FPGA,\nFiber Optic Data Bus, Dual-rate 1773, and several others.\nHe has served as Associate Branch Head for the lastfwe\nyears. He earned a Bachelor of Science in Electrical\nEngineeringfrom the University of Maryland in 1988, and a\nMaster o Science in Computer Sciencefrom the Johns\nf\nHopkins University in 1997.\n\nDavid Raphael is an electrical\nengineer at NASMGoddard Space\nFlight Center 3 Flight Data\nSystems & Radiation Effects\nBranch. He is currently the\ntechnical leadfor the ST-5 C&DH\ndevelopment. He began his career\nat NASA as an internfor two\nsummers in the SICA (Summer\nInstitute in Computer\nApplications)program in 1991\nand 1992. From 1994-1996, he served as a technical lead\nat NASA\xe2\x80\x99s Wallops Flight Facilityfor all sounding rockets\nmissions involving the MMP-900 encoder gwtems,for\nwhich he wrote a NASA Reference Publication. In 1996, he\ntransfirred to the Flight Development Group at Goddard\nwhere he worked on the Earth Orbiter -I program,\ndesigning the processor boardfor the WidebandAdvanced\nRecorder Processor (WARP) and supporting WARP\ndevelopment through board, box and spacecraft level I&T\nand early orbit operations, He earned a Bachelor of\nScience in Electrical Engineeringfrom Hojitra University\nin 1992, and a Master of Science in Electrical Engineering\nfrom the Johns Hopkins University in 1999.\n\nVictor Sank is a QSS\ncontract engineer working\nat NASMGoddard Space\nFlight Center\xe2\x80\x99s\nCommunications Systems\nBranch. He is currently the\nlead designerfor\ncommunications on the ST-5\nsatellites andfor its\ntransponder development. He began his career in medical\nphysics imaging, having worked on X-ray computed\ntomography (CAlJ,positron emission tomography (PET)\nand magnetic resonance imaging (MRI). In 1985, when no\nnew imaging technique was on the horizon, he made use o\nf\nthe computing and RF experience and turned to space\ncommunications and communications coding at the\nNASNGoddard Space Flight Center. One o thefirst\nf\nprojects at the GSFC was the testing of the Comptom\nGamma Ray Observatory (CGRO) spacecraft clock\ncorrelation system through the TDRSS. Documentation on\nthe system was poor, requiring afiesh look that led to MOC\nsoftware and the User Spacecraft Clock CorrelationSystem\nUsers Guide. He earned a Ph.D. in Physicsfiom the\nPolytechnic University in 1971.\n\nGeorge Jackson is an electrical\nengineer at NASNGoddard Space\nFlight Center\xe2\x80\x99s Flight Data\nSystems & Radiation Eflects\nBranch. He is currently the lead\nengineer for the ST-5 C&DH\ndevelopment. He began his career\nat NASA\xe2\x80\x99s Wallops Flight Facility\nas a co-op student in 1991. From\nI994 - 1995, he designed, built and tested aircraft data\nsystems for airborne science projects at Wallops. In 1995,\nhe transferred to the Radiation Effects and Analysis Group\nat Goddard where he conducted radiation testing on fiber\noptic and opto-electronics components and was lead\nengineerfor afiber optic experiment on the Naval Research\nLab\xe2\x80\x99s Microelectronic and Photonic Test Bed. From I997 2000, he worked on the Earth Orbiter -I program,\ndesigning the science input board for the Wideband\nAdvanced Recorder Processor (WARP) and supporting\nWARP development through board, box and spacecraft level\nI&T and early orbit operations. He earned a Bachelor of\nScience degree in Physicsfiom Salisbury State University in\nI994 and a Master o Science degree in Electrical\nf\nEngineeringfrom George Washington University in 1999.\n\n10\n\n'