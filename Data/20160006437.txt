b'SSC14-WK-2\nThe EDSN Intersatellite Communications Architecture\nJohn Hanson, James Chartres\nMillennium Engineering and Integration Company\nNASA Ames Research Center, MS 202-3; 408-898-0376\njohn.e.hanson@nasa.gov\nHugo Sanchez\nNASA Ames Research Center\nNASA Ames Research Center, MS 244-19; 650-604-4721\nhugo.sanchez@nasa.gov\nKen Oyadomari\nStinger Ghaffarian Technologies\nNASA Ames Research Center, MS17-2; 650-604-2710\nken.y.oyadomari@nasa.gov\nABSTRACT\nThe Edison Demonstration of Smallsat Networks (EDSN) is a swarm of eight 1.5U Cubesats developed by the\nNASA Ames Research Center under the Small Spacecraft Technology Program (SSTP) within NASA Space\nTechnology Mission Directorate (STMD). EDSN, scheduled for launch in late 2014, is designed to explore the use\nof small spacecraft networks to make synchronized, multipoint scientific measurements, and to organize and pass\nthose data to the ground through their network. Networked swarms of these small spacecraft will open new horizons\nin astronomy, Earth observations and solar physics. Their range of applications include the formation of synthetic\naperture radars for Earth sensing systems, large aperture observatories for next generation telescopes and the\ncollection of spatially distributed measurements of time varying systems, probing the Earth\xe2\x80\x99s magnetosphere, EarthSun interactions and the Earth\xe2\x80\x99s geopotential. The EDSN communications network is maintained and operated by a\nsimple set of predefined rules operating independently on all eight spacecraft without direction from ground based\nsystems. One spacecraft serves as a central node, requesting and collecting data from the other seven spacecraft,\norganizing the data and passing it to a ground station at regular intervals. The central node is rotated among the\nspacecraft on a regular basis, providing robustness against the failure of a single spacecraft. This paper describes the\ncommunication architecture of the EDSN network and its operation with small spacecraft of limited electrical\npower, computing power and communication range. Furthermore, the problems of collecting and prioritizing data\nthrough a system that has data throughput bottlenecks are addressed. Finally, future network enhancements that can\nbe built on top of the current EDSN hardware are discussed.\n\nfor missions requiring multiple cooperating, networked\nspacecraft.\n\nINTRODUCTION\nThe Edison Demonstration of Smallsat Networks\n(EDSN) is a swarm of eight 1.5U Cubesats developed\nby the NASA Ames Research Center under the Small\nSpacecraft Technology Program (SSTP) within the\nNASA Space Technology Mission Directorate\n(STMD). EDSN, scheduled for launch in late 2014, is\ndesigned to explore the use of small spacecraft\nnetworks to make synchronized, multipoint scientific\nmeasurements, and to organize and pass those data to\nthe ground through their network. The EDSN swarm\nwill contribute to the understanding of the chargedparticle environment in low-earth orbit and set the stage\n\nHanson\n\nNetworked swarms of these small spacecraft will open\nnew horizons in astronomy, Earth observations and\nsolar physics. Their range of applications include the\nformation of synthetic aperture radars for Earth sensing\nsystems, large aperture observatories for next\ngeneration telescopes2,3,4 and the collection of spatially\ndistributed measurements of time varying systems,\nprobing the Earth\xe2\x80\x99s magnetosphere, Earth-Sun\ninteractions and the Earth\xe2\x80\x99s geopotential. Similar\nswarms can be used to explore the properties of other\nplanets, comets and near-earth asteroids.\n\n1\n\n28th Annual AIAA/USU\nConference on Small Satellites\n\nNot only do swarms of small, relatively low cost\nspacecraft enable missions that simply cannot be\nperformed with single, large spacecraft, these swarms\nare inherently robust against random failures. If\nproperly designed, the swarms can be regularly updated\nwith improved technologies and different payloads by\nsimply launching new spacecraft to join an existing\nswarm, providing continuous improvements to the\nmission.\n\ncorrelated science measurements and transfer the data\nto the ground4. This includes the following mission\nobjectives:\n1. Flight demonstrate one-way space-to-space\ndata transfer whereby at least 2 satellites\ntransfer data to a third satellite, which then\ntransfers the data to the ground;\n2. Flight demonstrate a system to collect multipoint science measurements, transfer science\nmeasurements to another satellite and transfer\nto the ground;\n3. Flight demonstrate a reaction wheel based\npointing system;\n4. Assess the viability of satellites built with\nCommercial Off The Shelf (COTS)\ncomponents to operate for 60 days\n\nTo field swarms of tens or hundreds of small spacecraft,\nnew communications concepts will need to be\ndeveloped to control the movement of data within the\nswarm and with the ground, pass commands between\nspacecraft and generally manage the swarm.\nTHE EDSN MISSION\nThe EDSN communications network (Figure 1) is\nmaintained and operated by a simple set of predefined\nrules operating independently on all eight spacecraft\nwithout direction from ground based systems. One\nspacecraft (the Captain) serves as a central node,\nrequesting and collecting data from the other seven\nspacecraft (the Lieutenants), organizing the data and\npassing them to a ground station at regular intervals.\nThe Captaincy is rotated among the spacecraft on a\nregular basis, providing robustness against the failure of\na single spacecraft.\n\nIn addition, EDSN will contribute to the understanding\nof the charged particle environment in low Earth orbit\nby making multiple, simultaneous measurements of the\ncharged particle event rate at each spacecraft,\ndistributed tens to one hundred kilometers apart.\nThe EDSN spacecraft have completed the fabrication\nassembly phases, and have passed random vibration and\nthermal vacuum tests as well as mission simulations\nwith all eight flight spacecraft, setting the stage for\nlaunch into low-earth orbit in late 2014.\n\nThe goal of the EDSN mission is to demonstrate that a\nswarm of satellites can make spatially distributed, time\n\nFigure 1: EDSN Communications Concept\n\nHanson\n\n2\n\n28th Annual AIAA/USU\nConference on Small Satellites\n\nFigure 2: EDSN Spacecraft Ready for Flight (eight flight units, one flight spare)\nmachined aluminum chassis with the solar panels\nclamped to the exterior.\n\nTHE EDSN CUBESATS\nThe EDSN swarm (Figure 2) consists of eight identical\n1.5U Cubesat spacecraft measuring 10 x 10 x 17 cm\nand weighing approximately 1.7 kg. The spacecraft\nleverages\ncommercial\noff-the-shelf\n(COTS)\ncomponents where possible to keep the recurring bus\ncosts down, providing a basis for future multispacecraft\nmissions.\nFurthermore, this approach allowed the\nEDSN team to use some existing test equipment and\nsoftware, reducing the amount of custom ground\nsupport equipment (GSE) that might otherwise have\nhad to be developed for the program. Some key\nsubsystems of the EDSN spacecraft use existing\nPhoneSat 2.0 hardware and software (e.g. the Nexus S\nprocessor board) further reducing cost by using\nexisting, proven hardware and software. Both the\nEDSN spacecraft and the PhoneSat 2.0 hardware were\ndeveloped by NASA Ames Research Center (ARC)\nunder the Small Spacecraft Technology Program\n(SSTP) within the NASA Space Technology Mission\nDirectorate (STMD).\n\nA Samsung Nexus S smartphone is used as the primary\nprocessor to perform such computationally intensive\nfunctions as attitude determination and control, orbit\npropagation (to determine when downlink and science\ncollection windows occur), schedule planning, and data\ncollection and packaging. The Nexus S controls all\nintersatellite and spacecraft-to-ground communications.\nFour Arduino (two ATMega2560 and two\nATMega328P) microcontrollers manage the GPS\nreceiver, science payload, various sensors and relays\nand interfaces to the attitude determination and control\nhardware. The spacecraft data bus is managed through\nthe router board, which is built around the Parallax\nP8X32A Propeller chip. All commands and data\nmoving between the various EDSN boards go through\nthe router.\nA data packet system with\nacknowledgement messages and retransmission for\ncritical packets transmitted between subsystems is\nimplemented in software on the Nexus S, Arduino and\nrouter processors.\n\nEach EDSN spacecraft (Figure 3) consists of a stack of\neight PC boards and a battery pack that plug into a\ncommon printed circuit board backplane that runs the\nlength of one 17 cm side of the spacecraft. Four rods\nwith spacers run through the corners of the boards,\nproviding structural support. The stack is enclosed in a\n\nHanson\n\nWhen the spacecraft is not performing one of its key\nactivities (e.g. taking science data, controlling attitude,\nperforming a crosslink or downlink), the Nexus is\nturned off and the spacecraft is monitored by the EPS\nboard Arduino, commonly referred to as the\n3\n\n28th Annual AIAA/USU\nConference on Small Satellites\n\n\xe2\x80\x9cWatchdog\xe2\x80\x9d. The schedule maintained on the Nexus S\ndetermines when it should be turned off. At this point a\ntimer is set on the Watchdog that turns the Nexus on\nagain at a specific future time. This low power, or\n\xe2\x80\x9cwait\xe2\x80\x9d mode that is provided by the EPS is key to the\nefficient operation of EDSN as the solar panels provide\nan orbit average power of just one watt. Solar power is\nprovided by six solar panels that use Spectrolab\nTriangular Advanced Solar Cells (TASC). 5.2 A-h of\nelectrical energy storage is provided by four lithium-ion\n18650 batteries in a COTS holder. The COTS battery\nholder provides for battery control, battery overcharge\nprotection and bus voltage regulation. A Zener diode is\nneeded to provide over-voltage protection for the bus.\nThe EPS board operates the solid state relays and\nprovides power to onboard systems. When the battery\nvoltage falls below seven volts, all non-essential\nsubsystem are turned off and the spacecraft goes into its\nlow-power \xe2\x80\x9cwait\xe2\x80\x9d mode. The spacecraft remains in\n\xe2\x80\x9cwait\xe2\x80\x9d mode until the battery voltage exceeds eight\nvolts.\n\ninstrument, developed at Montana State University, is a\nGeiger-M\xc3\xbceller tube that detects penetrating\nbeta/gamma radiation from energetic particles above a\ncertain energy threshold5.\n\nThe EDSN communications subsystem uses three\nradios to perform three different tasks. Intersatellite\ncommunication (crosslink) is performed with an\nAstroDev Lithium 1 UHF transceiver attached to a\ndeployable tape-measure monopole antenna. Crosslink\noccurs at 9600 bps under the AX.25 protocol with one\nwatt transmitted power. The Astrodev receiver is only\npowered when a crosslink has been scheduled. A\nMicroHard MHX2420 transceiver is used for S-band\ndownlink to the ground. A single S-band patch antenna\nis mounted to one end of the spacecraft. A StenSat\nUHF transmitter attached to a tape measure monopole\nantenna is used as a beacon, sending packets of data\nevery sixty seconds.\nThe attitude control system has two distinct modes of\noperation. Magnetic control is used to detumble the\nspacecraft and align it with the local magnetic field for\nGPS acquisition and downlink activities. In this mode,\nthe Nexus S magnetometer is used for attitude\ndetermination (i.e. measuring the local magnetic field)\nand six torque coils embedded in the solar panel printed\ncircuit boards (PCB\xe2\x80\x99s) are used for control. When the\nspacecraft is performing a sun-pointing demonstration,\nthree orthogonal brushless DC motor reaction wheels\ncontrol the spacecraft while the Nexus angular rate\nsensors and solar panel current monitors provide\nmeasures of the body rates and sun-vector, respectively.\nA Novatel OEMV-1 GPS receiver is used to get\nposition, velocity and time fixes approximately once\nevery 25 hours.\n\nFigure 3: EDSN Spacecraft\nCOMMUNICATIONS CONCEPT\nEDSN uses a simple concept for its intersatellite and\nspace-to-ground communications network, designed\nspecifically for the operation of multi-spacecraft\nswarms when subject to the constraints typical of\nCubesat buses and programs. The EDSN swarm is a\nhub-and-spoke network whereby one spacecraft (the\n\xe2\x80\x9cCaptain\xe2\x80\x9d) communicates with the other spacecraft (the\n\xe2\x80\x9cLieutenants\xe2\x80\x9d) to collect data packets from them using\na single common frequency. The Captain stores these\ndata and sends them to the ground along with its data\nwhen a downlink opportunity occurs.\n\nThe science payload is an Energetic Particle Integrating\nSpace Environment Monitor (EPISEM) that counts\ncharged particle events in low-earth orbit (LEO). This\nHanson\n\nThe process of passing information from one\nLieutenant (LT) to the Captain (CPT) is called a\n4\n\n28th Annual AIAA/USU\nConference on Small Satellites\n\n\xe2\x80\x9ctransaction\xe2\x80\x9d. A transaction begins when the CPT\nsends a \xe2\x80\x9cping packet\xe2\x80\x9d to the rest of the swarm using the\nLithium radio. Since the intersatellite link is omnidirectional and may be received by any LT, the ping\npacket includes information designating which LT\nshould respond. The CPT will send six pings over a\nperiod of 50 seconds to an LT. The CPT will then wait\nfor the LT to respond with its data. While the\ntransmit/receive\nantennae\nare\nomni-directional\nmonopoles, there are nulls in the antenna patterns.\nSending six pings over 50 seconds increases the\nchances that the LT will \xe2\x80\x9chear\xe2\x80\x9d the ping.\n\nnot received by the CPT, it is lost. This is acceptable\nfor EDSN since it is a demonstration of the concept of\nCubesat based data networks. The system generates\nmany more packets to pass through the network than\nare required to meet the mission objectives. As will be\ndiscussed below, it is anticipated that future\nenhancements to the architecture will provide greater\nguarantees of data transmission either through the\nimplementation of an ACK/NACK system, or delay\ntolerant networks6.\n\nWhen an LT receives a ping, it first parses the\ncommand to make sure it is valid (i.e. that the packet\nchecksum is correct) and that the ping request is for it\nand not for another LT. By giving each spacecraft a\nunique identifier (A through H), only one LT is\nauthorized to transmit data at a time. This prevents the\nLT\xe2\x80\x99s from broadcasting simultaneously and bringing all\ncrosslink communications to a halt. Once the LT\nconfirms that the \xe2\x80\x9cping packet\xe2\x80\x9d is for it, it will wait 60\nseconds to allow the CPT to stop sending \xe2\x80\x9cpings\xe2\x80\x9d. It\nthen sends a series of its data packets to the CPT, again\nusing the Lithium radio. First, one state-of-health\n(SOH) packet is created and sent over the intersatellite\nlink. This is followed by all of the science packets that\nare stored in the LT\xe2\x80\x99s science packet queue, as shown\nin Figure 4. Once the LT has transmitted all of its data,\nit turns off its Lithium radio, ends its crosslink activity\nand deletes the state-of-health and science data from its\ncrosslink queue. However, the most recent science\npacket is kept as part of a beacon packet to be broadcast\nrepeatedly by the Stensat. Note that there are no\nAcknowledge or Negative Acknowledge messages\npassed between the CPT and the LT. If a data packet is\n\nFigure 4: Lieutenant Data Structure\nAs the CPT is receiving the data packets from the LT, it\nplaces them in a first-in-first-out (FIFO) \xe2\x80\x9ctransaction\nqueue\xe2\x80\x9d in Nexus S memory (Figure 5). This queue is\npushed onto a last-in-first-out (LIFO) stack of packets\nreceived from that LT. Called the \xe2\x80\x9cdownlink stack\xe2\x80\x9d,\nthe CPT maintains one such stack for each LT, storing\nthe data for downlink to the ground when a downlink\nopportunity occurs. It also maintains a downlink stack\nfor itself, containing only the Captain\xe2\x80\x99s science packets.\nThis system was implemented to prioritize the most\nrecent SOH data over science data and recent packets\nover older packets.\n\nFigure 5: Captain Data Structures\nHanson\n\n5\n\n28th Annual AIAA/USU\nConference on Small Satellites\n\nThe CPT collects data from an LT for a fixed period of\ntime and ends the transaction once the allocated\ntransaction time has elapsed. If the LT is not in range\nto get the ping, or is \xe2\x80\x9coff\xe2\x80\x9d due to a low battery\ncondition, the CPT will listen for the entire transaction\nduration (approximately four minutes) before moving to\nthe next LT.\n\nThe system guarantees that the most recent science and\nSOH data collected by the CPT and sent to the ground\nfirst, and that the SOH packets are given priority over\nthe science data packets. Using this system, the\nordering of the crosslinked packets is optimized to\nprovide the data needed to meet the mission objectives\n\xe2\x80\x93 monitoring the health of the spacecraft through the\nSOH packets and collecting multipoint science data.\n\nThe CPT continues to collect data by sending a \xe2\x80\x9cping\xe2\x80\x9d\nto the next LT (e.g. spacecraft B), initiating a new\ntransaction with that LT. This process is repeated until\nthe CPT has attempted to initiate a transaction with\neach LT in the swarm. The set of seven transactions is\nreferred to as a \xe2\x80\x9csession\xe2\x80\x9d.\nThe \xe2\x80\x9cCaptaincy\xe2\x80\x9d of the EDSN swarm is rotated\namongst the spacecraft in a present pattern (A-B-C-DE-F-G-H-A) so that each spacecraft has the opportunity\nto be CPT. Also, the loss of any single spacecraft does\nnot end the mission, as it would if there were only one\nspacecraft designated as CPT for the entirety of the\nmission. The time during which a spacecraft is CPT is\ncalled a \xe2\x80\x9cminor cycle\xe2\x80\x9d. Prior to the start of a minor\ncycle, each spacecraft gets a GPS fix to determine GPS\ntime, and its position and velocity. GPS time is\ncompared to preloaded table of time windows given in\nCoordinated Universal Time (UTC) to determine which\nspacecraft is CPT. If a spacecraft cannot get a valid\nGPS time, it does not participate in the network\nactivities of the swarm (i.e. it does not attempt to\ncrosslink or downlink). During each minor cycle,\nbetween three and four crosslink sessions are scheduled\nat predetermined UTC times. One downlink activity is\nscheduled by the CPT per minor cycle when it predicts\nthat it will be passing over a ground station. The LT\xe2\x80\x99s\ndo not attempt to make contact with the ground station.\n\nFigure 6: Downlink Prioritization\nEach minor cycle lasts approximately 25 hours. A set\nof eight minor cycles where each spacecraft has been\nCPT once is referred to as a \xe2\x80\x9cmajor cycle\xe2\x80\x9d. It is\nanticipated that two or three major cycles will occur\nbefore the spacecraft are too far apart to crosslink,\nalthough they will continue to cycle through several\nmore major cycles before the end of the mission.\n\nThe downlink session is initiated by the ground station\nwith the Microhard S-band link. The CPT sends data\npackets to the ground in a predefined order (Figure 6).\nFirst, the state-of-health (SOH) packet is sent. This is\nfollowed by the \xe2\x80\x9cpointing packet\xe2\x80\x9d. This contains data\nrelated to the sun pointing demonstration that is\nperformed only by the CPT once per minor cycle. The\nCPT then downlinks the first data packet in each\ndownlink stack, in order of spacecraft, starting with\nSpacecraft A and proceeding through Spacecraft H.\nThe process of sending packets from the downlink\nstacks continues with the second packet in each stack\nand so on until all of the data in the downlink stacks are\nexhausted, or the link is broken. If the packets in the\ndownlink stacks are exhausted before the link is broken,\nthe CPT will repeat sending all of its downlink data, in\nthe same order until the link is broken or the downlink\nactivity times out.\n\nHanson\n\nImplementation of the crosslink communications on\nCubesats requires special consideration of their limited\npower production (approximately one watt orbit\naverage for EDSN). If each LT could leave its\ncrosslink receiver on at all times, the CPT could\nschedule crosslink sessions based solely on its own\npriorities. Unfortunately, there is not sufficient power\nfor such an implementation.\nThe EDSN\ncommunications architecture avoids this problem by\nhaving all EDSN spacecraft schedule crosslink\nactivities at fixed times in UTC. Knowing that the\ncrosslink will only occur at a specific time, the LT\xe2\x80\x99s\ncan use their radios efficiently and only turn the\nLithium-1 on when they expect to get a message from\nthe CPT.\n\n6\n\n28th Annual AIAA/USU\nConference on Small Satellites\n\nEach EDSN spacecraft uses the clock on its Phone as a\ntime reference. This clock is corrected to GPS time\nonce per minor cycle (i.e. every 25 hours) when a GPS\nfix is established. Drift of this clock due to temperature\nand aging effects could introduce an error in local time\nof as much as 12 seconds, causing the LT and CPT\nclocks to be out of synch. All time based activities\ninclude time \xe2\x80\x9cbuffers\xe2\x80\x9d at the beginning and end of the\n\nactivity to account for the relative drift of the clocks on\ndifferent platforms. For example, during a crosslink\nsession, the LT will turn on its receiver 30 seconds\nprior to the start of the session and leave the receiver on\nfor up to 30 seconds after the end, as defined by its\nclock. Figure 7 shows the sequence of events that make\nup a crosslink session, including the overlap of receiver\non-times.\n\nFigure 7: Communications Timing Diagram\nradio disable command that turns off all transmissions\nfrom the spacecraft. This is required by the FCC and is\nnot part of normal operations.\n\nSOFTWARE IMPLEMENTATION\nThe EDSN software was implemented on three\nprocessors on the spacecraft. Code on the Arduino\nmicrocontrollers perform low-level tasks such as\ninterfacing with hardware and monitoring the battery\nvoltage.\nSpecial software on the Propeller chip\nprovides data packet routing services on the spacecraft\nbus. The most critical software, in terms of the\nimplementation of the EDSN communications\narchitecture, resides on the Nexus S processor \xe2\x80\x93 the\n\xe2\x80\x9cPhone\xe2\x80\x9d. This software is an autonomous application\nbuilt on top of the Android operating system.\nLeveraging the Android software tools and\ndevelopment base helped to simplify the design and\ndecrease development time.\n\nThe EDSN application creates a schedule of \xe2\x80\x9cactivities\xe2\x80\x9d\nwith start times and durations. It then executes those\nactivities through the Phonesat Executive, its main\nthread. The Executive also determines when the phone\nshould be off, passing control of the spacecraft and a\ntime to turn the phone back on to the EPS Watchdog.\nThere are several key activities that EDSN uses to\nimplement the communication system. These include\nscience data collection, downlink, crosslink, GPS\nacquisition, and planning.\nThe downlink and crosslink activities are discussed in\ndetail above. Central to the operation of the downlink\nand crosslink activities are a set of data structures\n\nThe EDSN spacecraft operate autonomously. No\ncommands are received from the ground, other than a\nHanson\n\n7\n\n28th Annual AIAA/USU\nConference on Small Satellites\n\n(stacks and queues) that store the data packets sent\nthrough the network. These were implemented as\nshown in Figure 8 and are described above in greater\ndetail.\n\nposition. The crosslink activity is a time based activity\nand occurs at a fixed time offset from the beginning of\nthe minor cycle. On the other hand, the downlink and\nscience collection activities are position based\nactivities.\n\nPrior to the start of a minor cycle, a GPS acquisition\nactivity will have been scheduled. After the Executive\nruns that activity, the GPS state (position, velocity and\ntime) will fed into an orbit propagator that will predict\nthe position of the spacecraft as a function of time over\nthe next two minor cycles (roughly 50 hours). Using\nthe propagated orbit the satellite is able to schedule a\nset of activities based on predefined metrics and a\npriority list. Some activities are scheduled based on\ntime while others are scheduled based on the time at\nwhich the spacecraft is predicted to be at a particular\n\nFor each activity the satellite generates a table of\nopportunity windows that state when it is possible for a\nparticular activity to take place. Then based on priority\nof the activity, the activities are scheduled such that\ntheir opportunity windows do not overlap. Once the\nschedule is generated the executive starts and stops the\nactivities based on the schedule.\n\nFigure 8: EDSN Communications Data Structures\nThe mission simulation consisted of all eight flight\nsatellites in their flight configurations with spacecraft\nidentifiers, and other flight parameters. This included\nclearing the spacecraft stored time and memory at the\nstart of the test. The simulation was initiated as if the\nspacecraft were released from the launch vehicle (i.e.\nthe footswitch interrupt circuit was released) and the\nsimulation was run for about 11 days. This captured\nthe 30 hour initialization of the spacecraft, nine full\nminor cycles of 25 hours each and a transition to the\ntenth minor cycle. This demonstrated operation of the\n\nTEST RESULTS AND PERFORMANCE\nFlight Software (FSW) Release 6.5 was the final\nversion of software loaded onto the eight EDSN\nspacecraft. This release was validated through a\ncombination of unit tests at the software component\nlevel, flight software system tests at the function level\nand mission simulations that captured the performance\nof the entire EDSN system, demonstrating that the\nEDSN communications and FSW systems will meet the\nmission objectives.\n\nHanson\n\n8\n\n28th Annual AIAA/USU\nConference on Small Satellites\n\nEDSN network over a full major cycle with every\nspacecraft holding the role of Captain at least once and\none spacecraft being Captain twice. A GPS simulator\nwas not available for the mission simulation. So,\nduring the GPS acquisition activities at the starts of\nminor cycles, ground support equipment (GSE) was\nused to \xe2\x80\x9cspoof\xe2\x80\x9d the GPS packet that the processor\nexpected from the GPS receiver. The position and\nvelocity vectors in the GPS packets were generated\nusing STK.\n\ncrosslink to occur). In a few instances, the downlink in\na minor cycle was scheduled before the Captain\ncollected all of its science data. These data were stored\nuntil the next minor cycle and passed to the next\nCaptain, as expected.\nOther issues, not related to the operation of the EDSN\nnetwork were observed, dealing primarily with the\nbehavior of the Stensat beacon, as implemented by\nEDSN. It was noted that the beacon packets from some\nspacecraft overlapped each other, despite the system\nbeing designed with differing transmission offsets\nbetween spacecraft to prevent this from occurring. In\nsome instances, the periodicity of the beacon packets\nwould change when transitioning from Phone operation\nto the Watchdog low power mode. Finally, on a few\noccasions, the GPS receiver on a spacecraft detected a\nGPS signal from the in-lab repeater before the \xe2\x80\x9cspoof\xe2\x80\x9d\nmessage could be uploaded from the GSE. Since the\nposition, velocity and time did not match those of an\norbital trajectory, the spacecraft flagged the GPS data\nas invalid and then attempted to get another GPS fix, as\nit was designed to do.\n\nPower to the spacecraft was provided by GSE power\nsupplies and included models of the solar eclipse and\nexpected electrical power levels produced by the solar\narrays, with some margin (i.e. power available in the\ntest was less than what is predicted for flight). The\nspacecraft bus voltages were monitored in real-time\nusing GSE computers with LabView. All RF activities\nwere monitored with GSE as well. A Microhard\nground station was used to emulate the ground station\nat Santa Clara University and collect spacecraft data in\na flight-like condition. The Microhard was manually\nset to initiate contact with the spacecraft five to ten\nminutes after the expected scheduled contact to allow\nthe team to collect power data during the downlink\nactivity and to simulate the uncertainty that will exist in\nthe timing of the ground station contact. A spare\nLithium-1 radio was reconfigured to monitor the\ncrosslink activity, but did not interact with the system.\nAn Alinco UHF transceiver was used to monitor the\nspacecraft beacon messages, emulating ground stations\nso that the spacecraft could operate in a flight-like\nconfiguration. While the beacon is not part of the\nEDSN network communications system and is not\nneeded to meet the mission objectives, it will be used in\nflight to provide additional data on the performance of\nthe network. All of these data were recorded by GSE\nand stored for later processing. The flight-like data\nwere used after the completion of the mission\nsimulation to validate performance per the Mission\nSimulation Test Procedure and verify requirements.\n\nFUTURE ARCHITECTURE ENHANCEMENTS\nThe coordinated operation of many spatially distributed\nspacecraft will open new markets and enable new\nscientific breakthroughs that can only be achieved with\nswarms of capable, low cost spacecraft making\nmeasurements simultaneously at different locations.\nThis will finally put smallsats on the same stage as their\nmuch larger brethren by showing that multiple small\nspacecraft can perform missions that simply cannot be\ndone with a single, traditional spacecraft, no matter how\nlarge it is.\nEDSN is an important demonstration of key\ncommunications capabilities that are necessary to\nrealize the goal of swarms of Cubesats operating in\nunison to create a system of systems that is truly greater\nthan the sum of its parts. Using its simple hub-and\nspoke polling system, the 1.5U EDSN spacecraft will\ndemonstrate:\n\nThe EDSN spacecraft passed all tests, clearing flight\nsoftware as ready for flight in November, 2014.\nSpecifically, the spacecraft met all mission objectives,\ntransmitting science and state-of-health data to the\nground stations over both the crosslink-downlink\nchannel and the beacon channel.\nPackets were\ncollected from all eight spacecraft, even though some\nbeacon packets were lost due to poor orientation in the\nlaboratory relative to the ground station, or to\nsimultaneous transmission by two or more spacecraft.\nFurthermore, the network behaved as expected even in\nthe face of a missed Captain (due to a GSE failure in\nthe GPS packet loading) and missed crosslink\nopportunities (due to the Captain scheduling a higher\npriority operation when the Lieutenants expected a\nHanson\n\n\xe2\x80\xa2\n\xe2\x80\xa2\n\xe2\x80\xa2\n\xe2\x80\xa2\n\xe2\x80\xa2\n\n9\n\nTime synchronized measurements on spatially\ndistributed platforms\nCollection of data from all spacecraft in the\nswarm with a single central spacecraft\nOne-way operation of the swarm (data\ncollection) through a single spacecraft that is\nin periodic contact with the ground\nAutonomous operation of the swarm (i.e.\nwithout intervention from ground control)\nRedundancy in swarm operations through the\nsimple, pre-scripted periodic hopping of the\nCaptain\n28th Annual AIAA/USU\nConference on Small Satellites\n\n\xe2\x80\xa2\n\nFuture missions can use the EDSN communications\narchitecture as a basis for networking a small number of\nspacecraft together, provided the spacecraft do not drift\nbeyond their crosslink communications range during\nthe mission. Obviously, this architecture can be used\nfor additional investigations in the Earth environment\nand Earth-sun interactions by flying similar spacecraft\nin other orbits, sampling other orbit altitudes and the\nVan Allen belts. An enhanced spacecraft bus would\nallow investigations of the Earth\xe2\x80\x99s Magnetopause,\nMagnetosheath and Magnetic Tail. These spacecraft\ncould use the EPISEM as a payload, or fly sensitive\nmagnetometers, Langmuir probes or electrometers.\n\n\xe2\x80\xa2\n\xe2\x80\xa2\n\xe2\x80\xa2\n\n\xe2\x80\xa2\n\nThe EDSN architecture can be enhanced to provide\nadditional capabilities to Cubesat swarms, further\nexpanding their utility. These include:\n\xe2\x80\xa2\n\xe2\x80\xa2\n\n\xe2\x80\xa2\n\n\xe2\x80\xa2\n\n\xe2\x80\xa2\n\xe2\x80\xa2\n\xe2\x80\xa2\n\nHanson\n\n\xe2\x80\xa2\n\xe2\x80\xa2\n\nControlling the spacecraft in the swarm by\nrouting commands from the ground through\nthe network to individual spacecraft;\nAutonomous configuration of the network by\nselection of the Captain (or Captains) based on\ndata available to the spacecraft in the swarm.\nFor example, multiple spacecraft could\n\xe2\x80\x9cnegotiate\xe2\x80\x9d who should be Captain at any\ngiven time based on the amount of data needed\nfor downlink, the power state of the spacecraft\nor the quality of the ground station pass. This\ncan be compared to the EDSN approach to\nCaptain selection, which is predetermined\nbefore the mission even flies and programmed\ninto every spacecraft;\nPrecise time synchronized measurements by\nradio command from the Captain, whereby\nevery LT in a swarm would take data upon\nreceiving a command from the CPT;\nImproved synchronization of time across the\nswarm either by using the crosslinks to lock all\nclocks in the swarm to the CPT, or by\nproviding each spacecraft with a high quality\nlocal clock (e.g. chip-scale atomic clock) to\nimprove time knowledge between GPS\nupdates;\nCollection of GPS pseudo-range and carrier\nphase data for precision position and swarm\ngeometry knowledge via differential GPS;\nMapping of network topology to determine\nwhich spacecraft can communicate with which\nspacecraft;\nRouting of packets through the network by\nmultiple hops based on the network topology\nmap so that spacecraft not in direct contact\nwith the CPT can still pass their data to the\nground;\n\nAllowing multiple Captains to take advantage\nof more ground pass opportunities to get more\ndata from the swarm to the ground;\nPassing of large data files between spacecraft\n(e.g. image files);\nPrioritization of data messages by the Captain\nor Lieutenant for downlink;\nAddition of ACKnowledge/NACKnowledge\nprotocol during crosslink and downlink\ntransactions to increase the probability that\ndata packets pass through the network and are\nnot dropped;\nScheduling of downlinks to multiple ground\nstations to increase data throughput;\nAddition of a standard network layer to the\nsystem to take advantage of COTS software\nand protocols;\nInterlinking of multiple Captains to create a\n\xe2\x80\x9ccluster of clusters\xe2\x80\x9d.\n\nThe extension of the EDSN communications\narchitecture through a series of small satellite\ndemonstrations will enhance the capabilities of swarms\nof Cubesats to perform vital, cutting edge research and\nto open new commercial markets\nCONCLUSIONS\nThe EDSN communications architecture provides a\nrobust, low cost and simple system that can be\nimplemented on Cubesat-class spacecraft, with their\nneed for low-power, COTS solutions. As such, this\narchitecture can be the basis of swarm missions in the\nimmediate future and for missions requiring\nincremental improvements as described above.\nThe EDSN spacecraft have passed all of their\nenvironmental and functional tests.\nMission\nsimulations of the eight flight spacecraft have\nestablished that the flight software and communications\narchitecture are ready for flight and will meet the\nmission requirements.\nWhen it flies in late 2014, EDSN will open new\nopportunities for small spacecraft to contribute to\nscientific and commercial endeavors in space.\n\n10\n\n28th Annual AIAA/USU\nConference on Small Satellites\n\nACKNOWLEDGMENTS\nThe authors would like to acknowledge the entire\nEDSN team for their dedicated support, effort and\naccomplishments. Thanks to the Montana State\nUniversity science team for the payloads, science\ndirection and support during integration and testing.\nThe continued support of Santa Clara University for\nmission operations is greatly appreciated. Special\nrecognition to the Small Spacecraft Technology\nProgram (SSTP) within the Space Technology Mission\nDirectorate (STMD) for funding the EDSN Project.\nREFERENCES\n1.\n\nNational Research Council, \xe2\x80\x9cHeliophysics - The\nSolar and Space Physics of a New Era Recommended Roadmap for Science and\nTechnology 2009\xe2\x80\x932030,\xe2\x80\x9d Washington, DC: The\nNational Academies Press, 2009\n\n2.\n\nNational Research Council, \xe2\x80\x9cEarth Science and\nApplications from Space: National Imperatives\nfor the Next Decade and Beyond,\xe2\x80\x9d Washington,\nDC: The National Academies Press, 2007.\n\n3.\n\nBentum, M. J., Verhoeven, C. J. M., Boonstra, A.\nJ., van der Veen, A. J. and Gill, E. K. A., \xe2\x80\x9cA\nnovel astronomical application for formation\nflying small satellites,\xe2\x80\x9d Proceedings of the 60th\nInternational Astronautical Congress, Daejeon,\nRepublic of Korea, 12\xe2\x80\x9316 October 2009.\n\n4.\n\nChartres, J., Sanchez, H., Hanson, J. \xe2\x80\x9cEDSN\nDevelopment Lessons Learned,\xe2\x80\x9d Proceedings\nfrom the 28th Annual AIAA/USU Conference on\nSmall Satellites, 2014\n\n5.\n\nGunderson, A., Klumpar, D., Crawford, A., \xe2\x80\xa8\nHandley, M., \xe2\x80\xa8Keith Mashburn, K., \xe2\x80\xa8 Mosleh, E.,\nSpringer, L., Cockrell, J. \xe2\x80\x9cSimultaneous MultiPoint Space Weather Measurements using the\nLow Cost EDSN CubeSat Constellation,\xe2\x80\x9d\nProceedings from the 27th Annual AIAA/USU\nConference on Small Satellites, 2013\n\n6.\n\nIvancic, W., et al. \xe2\x80\x9cDelay/Disruption-Tolerant\nNetwork Testing Using a LEO Satellite\xe2\x80\x9d.\nProceedings of the NASA Earth Science\nTechnology Conference, June, 2008.\n\nHanson\n\n11\n\n28th Annual AIAA/USU\nConference on Small Satellites\n\n'