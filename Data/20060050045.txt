b'Source of Acquisition\nNASA Washington, D. C.\n\nI111llllIlIIIINIlllllllllUIIl11111II\nlII ll 1\nl 1lll\nII\nUS007042199Bl\n\n(12)\n\nUnited States Patent\n\n(io)\n\nBirchenough\n\n(45)\n\nPatent No.:\nUS 7,042,199 B1\nDate of Patent:\nMay 9,2006\n\nI\n\nLEU 1 1\n7SERIES CONNECTED BUCK-BOOST\nREGULATOR\n\nUS. PATENT DOCUMENTS\n3,582.765 A\n4,578.630 A *\n4,709,323 A\n5,208.740 A\n5,307.004 A\n5,559,684 A\n5,623.398 A\n5,949,224 A\n5,994,882 A *\n5,998,971 A *\n6,275.016 B1\n6.348,781 B1\n6.469,476 B1\n\nInventor: Arthur G. Birchenough, Brook Park,\nOH WS)\nAssignee: The United States of America as\nrepresented by the Administrator of\nthe National Aeronautics and Space\nAdministration, Washington, DC (US)\nNotice:\n\nSubject to any disclaimer, the term of this\npatent is extended or adjusted under 35\nU.S.C. 154@) by 234 days.\n\nAppl. No.: 10/629,875\nFiled:\n\nU.S. C1.\n\n(57)\n\n323/271; 3631132\n\n................ 3231266,\n3231268,270,271,273,275,279,282,285;\n363117,98, 132\n\nField of Classification Search\n\nSee application file for complete search history.\n\n--I\nQ3\n\n-I\n\n.......................\n\n3231271\n\nLien\nEhsani\n\nCarsten\nOhms et al.\nBeach et al.\nBarkaro\nMa ............................\n3231222\nHsu et al. ................... 323272\nIvanov\n\nMidya et al.\nBarrett et al.\n\nABSTRACT\n\nA Series Connected Buck-Boost Regulator (SCBBR) that\nswitches only a fraction of the input power, resulting in\nrelatively high efficiencies. The SCBBR has multiple operating modes including a buck, a boost, and a current limiting\nmode, so that an output voltage of the SCBBR ranges from\nbelow the source voltage to above the source voltage.\n11 Claims, 5 Drawing Sheets\n\nT\n\nQ1\n\nMcCabe\n\nGrosch\n\nPrimary Examiner-Matthew V. Nguyen\n(74) Attorney, Agent, or Firm-Peame & Gordon LLP\n\n(2006.01)\n(2006.01)\n\n.......................................\n\n611971\n311986\n1111987\n511993\n411994\n9J1996\n411997\n911999\n1111999\n1211999\n812001\na2002\n10/2002\n\n* cited by examiner\n\nJul. 28,2003\n\nInt. c .\n1\nGOSF 1/40\nHOZM 7/5387\n\nReferences C%gd\n\n(56)\n\nUS. Patent\n\nMay 9,2006\n\nUS 7,042,199 B1\n\nSheet 1 of 5\n\nQ1\n\ni\n\nQ3\n\ni\n\nGND\n\xe2\x80\x99\n\n\\\n\n10\n\nOf\n\nf\n20\n\nFIG.1\n\nP\n\niiL\n\n- GND (\n\n>LOAD\nBUS\nVOUT\n\nUS. Patent\n\nMay 9,2006\n\nUS 7,042,199 B1\n\nSheet 2 of 5\n\n\'IN\n\nI\n\n1\n\nDC-DC CONVERTER\n\nT\n\n"IN\n\n1_\n\nGND\n\'\n\n\\\n10\'\n\n/\n\n20\'\n\n>\'\n-\n\n~L\nVOUT\n\nU.S. Patent\n\nMay 9,2006\n\nSheet 3 of 5\n\n"IN\n\nUS 7,042,199 B l\n\nOUT\n\nI\n\nDC-DC CONVERTER\nI\n\nT\n\n70"\n\n20 "\n\nFrt3.6\n\ngL\n\n>\'\n-\n\n\'OUT\n\nU.S. Patent\n\nMay 9,2006\n\nSheet 4 of 5\n\nUS 7,042,199 B1\n\nFl G . 7\n\nPE\nWX\nINPUT\nCOMM\n\nP WM\nCOMMANDS\n\nTO POWER\nSWITCHES\nQ1-Q8\n\nf\n\n30\n\nQ9\n\nON /OFF\n\nU.S. Patent\n\nMay 9,2006\n\nUS 7,042,199 B1\n\nSheet 5 of 5\n\nI2\n\n180\n\n10\n\n150\n\n8\n\n120\n\n6\n\n309\n\n4\n\n60\n\n8\n\nE\n<\n\nB\n\n(into output filter)\n2\n\n30\n\n0\n\n80\n\nI80\n\n240\n\nMilliieconds\n\nFIG.9\n\n320\n\n400\n\nUS 7,042,199 B1\n1\n\n2\n\nFor applications where output voltages equal to, or lower\nthan, an input voltage are desirable, a buck converter is\nappropriate. However, it is desirable to have a converter\ndesign which provides a wide range of output voltages, both\nORIGIN OF THEi INVENTION\n5 greater than, and lesser than, input voltage. Further, high\nthe\nefficiency would be quite beneficial in such a design. The\nThe invention described herein was made by an employee\nresulting buck-boost converterwould thereby be quite useful\nof the United States Government and may be manufactured\nin a wide variety of applications, including orbital or interand used by or for the Government for Government purplanetary applications.\nposes without the payment of any royalties thereon or\nLO\ntherefor.\nSUMMARY OF THE INVENTION\nThis application relates generally to DC-to-DC convertershegulators. More specifically, this application relates to a\nProvided is a series connected buck-boost regulator comSeries Connected Buck-Boost Regulator (SCBBR) that only\nprising: a control circuit; a switching circuit for connecting\nswitches a fraction of the input power, with the regulator\nhaving multiple operating modes including a buck, a boost, 15 to a source voltage; and an output circuit connected to the\nswitching circuit and for outputting a load voltage. The\nand a current limiting mode.\ncontrol circuit controls the output circuit and the input\ncircuit for operating the regulator in a plurality modes\nBACKGROUND OF THE INVENTION\nincluding: a current limiting (CL) mode, a buck mode; and\n20 a boost mode. Further, only a fraction of an output power of\nImprovements in the efficiency and size of DC-DC\nthe regulator is switched by the switching circuit during one\nconverters and/or regulators have resulted from advances in\nor both of the buck and the boost modes.\ncomponents, primarily semiconductors, and improved\nFurther provided is a series COM&&\nbuck-boost regutopologies. To a lesser extent, improvements in passive\nlator which has a control circuit and a transformer having a\ncomponents, topologies, and soft switching schemes have 25 primary winding and a center-tapped secondary winding,\nalso provided benefits. This is even tme for linear regulators,\nwherein the center tap of the secondary winding is for\nwhere higher temperature components have reduced size\nconnecting to a source voltage.\nand weight, and lower dropout voltage semiconductors and\nThe regulator also has a switching circuit controlled by\ndrive techniques have reduced the power loss.\nthe control circuit and for pulse-width-modulating the\nOne topology which has shown very high potential in 30 source voltage for inputting into the primary winding, with\nlimited applications is the Series Connected Boost Unit\nthe switching circuit including four P W switches con(SCBU), wherein a small DC-DC converter output is\nnected in a bridge configuration with the primary winding\nconnected in series with the input bus to provide an output\nconnected to a center of the bridge. Each PWM switch has\nvoltage equal to, or greater than, the input voltage. Because\na diode connected i parallel.\nn\nonly a fraction of the power throughput is switched by the 35 The regulator also has an output circuit controlled by the\nDC-DC converter, the overall system efficiency is very\ncontrol circuit and C O M & ~ ~to the secondary winding for\nhigh. But this technique is limited to applications where it is\noutputting a load voltage, with the output circuit having two\nsufficient that the output voltage is never less t a the input\nhn\npairs of two series connected output switches connected in\nvoltage.\nparallel. Again, each output switch also has a diode conIn the typical boost mode, the low voltage output of a 40 nected in parallel.\nsmall DC-DC converter is connected in series with the\nStill further provided is the above regulator also having a\ninput voltage. The output voltage can then be adjusted h m\nfirst transformer diode connected to a terminal of the secessentially equal to the input voltage up to the input voltage\nondary winding; a second transformer diode connected to\nplus the maximum output voltage of the DC-DC converter.\nanother terminal of the secondary winding; and a transFor example, a regulator for a 100 volt 1 kw bus could be 45 former shorting switch connected to the center tap of the\nconstructed with a DC-DC converter having a 100 volt\nsecondary and also connected to the first and the second\nnominal input, and a 0 to 10 volt output and a 100 watt, 10\ntransformer diodes for shorting the secondary on command\namp, rating. The configuration would allow regulating the\nfrom the control circuit.\noutput to up to 10% higher t a the input, and yet only use\nhn\nEven further provided is the above regulator, wherein the\nswitching and filtering components sized for 10% of the 50 PWM switches include a first switch, a second switch, a\ntotal rating, and it therefore offers greatly reduced size and\nthird switch, and a fourth switch, and further wherein the\npower loss. The technique is very useful in situations where\noutput switches include a ffh switch, a sixth switch, a\nit\nthe input/output voltage ratio is relatively small, the output\nseventh switch, and an eighth switch.\nis always greater t a the input, and isolation between the\nhn\nDuring the boost mode, the control circuit of the above\ninput and output is not required.\nun\n55 regulator is operated to continuously t r on the fifth switch\nand the sixth switch, and continuously turn off the transThe change from linear to switching regulators was\nformer shorting switch.\nrevolutionary, and the power loss and therefore size of\nAlso during the boost mode, the control circuit of t e\nh\nregulators made a large step decrease. Since then the single\nregulator cycles througha plurality of boost states including:\nmost significant parameter determining converter efficiency\nand size, for a given frequency, has been the h a rating. The 60 a first boost state wherein the first, fourth, and seventh\nswitches are on and further wherein the second, third, and\nsize of components to switch, transform, and filter is relaeighth switches are off; a second boost state wherein the\ntively independent of the topology, as the same amount of\nseventh and eighth switches are on, and further wherein the\npower is switched, rectified, and stored in filter components.\nfirst, second, thir4 and fourth switches are o@, and a t i d\nhr\nThe technique of partial power processing, wherein only a\nsmall fraction of the total output power is required to buck 65 boost state wherein the second,third and eighth switches are\non and further wherein the first, fourth, and seventh switches\nor boost the input to the desired output voltage, can signifiare OK\ncantly reduce the converter size and power loss.\nSERIES CONNECTED BUCK-BOOST\nREGULATOR\n\nUS 7,042,199 E1\n3\n3\n\n4\n\nDuring the buck mode, the control circuit of the regulator\ntional buck converter to operate at very low output to input\ncontinuously turns on the seventh switch and the eighth\nvoltage ratios, and it can also operate as a boost converter to\nswitch, and continuously turns off the transformer shorting\nboost the output voltage above the input voltage. This\ndisclosure describes the operation and performance of an\nswitch.\nAlso during the buck mode, the control circuit cycles 5 example SCBBR contigured as a bus voltage regulator\nthrough a plurality of buck states including: a h t buck state\nproviding d % voltage regulation range, bus switching,\nO\nwherein the &st, fourth, and sixth switches are on and\nand overload limiting, operating a up to, or even over, 98%\nt\nfurther wherein the second, third,and fifth switches are 0\n%\nefficiency.\nThe series connected buck-boost technique expands the\na second buck state wherein the fiflh and sixth switches are\non, and further wherein the first, second, third, and fourth 10 array of applications considerably by also allowing the\nswitches are 0 and a third buck state wherein the second,\n%\noutput to be lower than the input. This allows essentially\nthird, and fifth switches are on, and further wherein the first,\ntwice the regulation range for a given size converter as\ncompared to either a buck or a boost converter, standing\nfourth, and sixth switches are off.\nalone. A circuit enhancement allows operation of t e same\nh\nDuring the current l i t i n g mode, the control Circuit of the\nregulator continuously turns off the first, second, third, and 1s converter in a more conventional buck mode, so that the\nfourth switches, and continuously tuns on the transfonner\noutput can be regulated down to zero volts, if desired,\nallowing operation as a current limiting voltage regulation\nshorting switch.\nAlso during the current limiting mode, the control circuit\nremote power controller (RPC). The only major restriction\non the use of this device is that it does not typically offer\ncycles through a plurality of CL states including: a first CL\nstate wherein the fifth, sixth, seventh, and eighth switches 20 inputloutput isolation in its normal application.\nNote that in the description and accompanying figures,\nare on; and a second CL state wherein the fifth, sixth,\nonly the primary components of the various embodiments of\nseventh, and eighth switches are off.\nAnd further provided is the above regulator fuaher comthe SCBBR circuit are listed and/or shown. Peripheral\nprising: a freewheeling diode connected between the output\ncomponents (such as filters, power supplies, and biasing\ncircuit and a groun4 and an inductor for connecting the 25 circuits, for example) are not shown, but are well known in\nthe art.\noutput circuit to a load.\nFurther, the control circuit of the above regulator can also\nFIG. 1is a schematic showing the primary components of\nthe SCBBR circuit. The switching circuit 10 includes four\ncontrol a duty cycle of the pulse-width-modulation of the\nsource voltage and also drives the output circuit such that the\nswitches, Q,-Q4- Four diodes D1-D4 are also utilized in the\noutput voltage can be vaned in a range from a minimum 30 switching circuit 1 0 as shown in FIG. 1 suchthat each switch\nQ, has a diode D, in parallel (where \xe2\x80\x9cn\xe2\x80\x9d ranges from 1-4).\nvoltage less than the source voltage to a maximum voltage\nThe switching circuit 10 connects to a primary Tp of a\ngreater than the source voltage.\nStill further, the above regulator can also have some\ntransformer T, as also shown in FIG. 1. The source voltage\nsubstantial fraction of the power input by the source voltage\nV,, is also connected to the switching circuit 10 as shown in\nnot be pulse-width-modulated by the switching circuit dur- 35 the figure.\nThe switching circuit 10 is used to pulse-width-modulate\ning one or both of the modes.\n(PWh4) the input voltage V for input into the primary\n,\nBRIEF DESCRIPTION OF THE DRAWINGS\nwindmg Tp of the transformer T. This PWM function of the\nswitching circuit 10 is controlled by a control circuit 30\nFIG. 1is a schematic diagram of one embodiment of the 40 (discussed below and shown in FIG. 8) which controls,\ninvention;\namong other things, the action of the switches Q,. The\nFIG. 2 is a schematic diagram of another embodiment of\ncontrol circuit 30 % d e r controls a duty cycle of the PWM\nthe invention;\n(i.e., the length of time the switches stay odoff). In this way,\nFIG. 3 is a block diagram showing the boost mode\nthe input voltage V is converted into a PWM voltage input\n,\nconcept applied to a DC-to-DC converter;\n45 into the primary Tp for conversion by the transformer T into\na secondary voltage in the secondary winding T,. (note that,\nFIG. 4 is an effective schematic showing the implemenunder some operating modes--e.g., the buck mode distation of the boost mode concept of FIG. 3;\nFIG. 5 is a block diagram showing the boost mode\ncussed below-the primary T acts as a secondary, whereas\n,\nconcept applied to a DC-to-DC converter;\nthe secondary winding Ts acts as a primary).\nFIG. 6 is an effective schematic showing the implemen- 50 An output circuit 20 is also shown in FIG. 1. A secondary\nvoltage is generated in the secondary winding T, of the\ntation of the buck mode concept of FIG. 5;\nFIG. 7 is an effective schematic showing the implementransformer T by the PWM of V , by the input circuit 10.\n,\ntation of the current limiting mode concept;\nThis secondary voltage is input into the output circuit 20 by\nFIG. 8 is a schematic diagram showing the control circuit\nthe connections as shown in the figure. The input voltage V ,\n,\nof still another embodiment of the invention;\n5s is also input into a center tap of the secondary winding T, of\nFIG. 9 is a graphical plot of the output voltage and current\nthe transformer T thus allowing some input power to bypass\n,\ncurves of a prototype implementation of the invention using\nthe switching circuit 10, and thereby increasing the overall\nefficiency of the SCBBR.\nclosed loop regulation.\nThe output circuit 20 has four switches, Qs-Qs. Four\nDETAILED DESCRIPTION OF THE\n60 diodes D,-D, are also utilized in the output circuit 20 as\nPREFERRED EMBODIMENTS\n,\nshown in FIG. 1such that each switch Q has a diode Dm\nin parallel (where \xe2\x80\x9cm\xe2\x80\x9d ranges from 5-8). The switches Q,\nThe Series Connected Buck-Boost Regulator (SCBBR)\nof the output circuit are also controlled by the control circuit\nconcept extends partial power processing technique used in\n30 (as discussed below). - fteewheeliig diode D which\n4\n.\nthe SCBU to applications where the desired output voltage 65 typically operates as an uncontrolled switch, and an lnductor\nL are also used in the output circuit 20 as shown in the figure.\ncan be higher and/or lower than the input voltage. The\nimplementation described herein can operate as a convenIn this manner the output circuit outputs a load voltage Vzn.\n\nUS 7,042,199 B1\n6\n\n5\nFIG. 2 shows the circuit of FIG. 1 with additional components to provide additional functionality to the SCBBR.\nSwitch Q and diodes D9 and D,, are added as shown in the\nfigure to enable the current limiting mode described in more\ndetail below. The switch Q9will also typically be controlled 5\nby the control circuit 30.\nPreferably, all of the switches will be implemented using\nsemiconductor switches, such as FETs, for example. Other\nsemiconductor switches may also be used, as the application\nrequires. High efficiency and low power consumption of the 10\nswitches are desirable characteristics. other types of\nhaving low power consumption .&high efficiency\ntraits that can operate at the desired switching cycle can also\nbe used.\nThe operation of the circuit is described best by separating 1s\nthe modes of operation and describing them individually,\nhereinbelow:\nA diagam of the power flow in the boost mode is shown\nin the block diagram of FIG. 3. In the boost mode, the output\nof a low voltage converter is added in series with the input 20\nvoltage to provide an output voltage equal to or grater than\nthe input. Thus, Power from the ConVerta is added to the\noutput to increase the voltage.\nThe SCBBR boost implementation described as an\nexample uses a full-bridge input stage and a Center\n25\ntransformer-rectifier output stage as shown i the effective\nn\nschematic O FIG. 4 (Which does not Show the switches\nf\nthat are\nconducting\nOff).\nWhen\nthe PrinlarY side switches Ql-Q, are\nOff\nthere is no voltage across the primary T of the transformer 30\n,\nT, and the input voltage V,, is connected to the output\nthrough an input filter, the secondary of the transformer, the\nrectifier diodes, and an output filter.\nWhen the switches of the input bridge are conducting, a\nvoltage is impressed on the secondary T, of the transformer 35\nT. The instantaneous output at the rectifiers D7 & D, is the\ninput voltage V,, plus the transformer secondary voltage,\nwhich is equal to the input voltage divided by the transformer turns ratio. By varying the PWM duty cycle from 0\nto 100% the average output V can be controlled between\n,\na minimum of the input voltage, and a maximum of the input\nPlus the boost Provided by the transformer\xe2\x80\x99s setsmoothes the Output and the\nOndaryOutput. The Output\naverage Output\nconduction losses in the 45\nfilters and rectifiers, will be:\nV.,= v,+V,,*(PJVd Duty Cycie)/(Turns Ratio)\n\nThe turns ratio for the prototype design was chosen to be 2:1,\nallowing the output to be boosted up to 150% of the input.\nHowever,\nPractical ~WJX\n(and/or duty Cycle) can\nbe chosen, as desired.\nThe buck mode of the SCBBR operates in a very different\nmode, but uses essentially the same components as t e boost\nh\nmode. The power flow of the buck mode is as shown in the\nblock diagram of FIG. 5. The input voltage is greater than\nthe desired output voltage. The concept of operation is that\nthe hput of a DC-DC converter is connected in series, with\nopposed polarity to the SCBBR input bus, and the output of\nthe DC-DC converter is connected in parallel with the\nSCBBR input bus.\nThe voltage drop across the input of the DC-DC conh\nverter reduces the SCBBR output voltage, and t e power\nassociated with this voltage drop is returned to the input bus\nby the DC-DC converter. The operation is similar to\nplacing a battery in series with the input bus, in one direction\n(similar to as shown by FIG. 3) it increases (boosts) the\n\noutput voltage. When it is connected \xe2\x80\x9cbackwards\xe2\x80\x9d (similar\nto as shown by FIG. 5) it decreases (bucks) the output\nvoltage. In the boost case, the battery would be discharged\nas would be expected, but in the buck case the battery would\nbe charged (and eventually overcharged). The use of a\nDC-DC converter allows a continuous process.\nNote\nthe scBBR, the\nand output voltages are\nalways positive and that the SCBBR input and output\ncurrents are always positive. However, in terms of the\nDC-DC converter within the SCBBR, the voltage on the\ninput bus side is always positive and the current in the output\nbus side is\nPositive, but the\nthe\nbus\nside of the DC-DC converter itself is positive in the boost\nmode and negative in the buck mode, and the voltage at the\nOUtpUt bus side O the DC-DC converter itself will be\nf\npositive for the boost mode and negative for the buck mode.\nThe effective schematic for buck mode operation is shown\nin FIG. 6 (which does not show the switches and/or diodes\nthat are always conducting and/or always off). Many of the\nsame components used for the boost converter are used for\nthe buck converter, although in different roles. The centertapped side of the transformer T,: which was the secondary\nin the boost mode acts as a primary (whereas the primary Tp\nacts as a sccondaxy in this mode). The rectifier diodes of the\nboost converter are replaced by switches.\nthe actual\napplication the buck mode switches are\nin series with\nthe boost mode rectifiers, as shown in FIGS. 1 and 2.) The\nswitches, which switched the primary of the transformer in\nthe boost mode, now function as a full-wave bridge rectifier\nusing the body diodes (or synchronous rectification with the\nswitches).\nIf the t r ~ f O r m e r\nVoltage Was less than 1:1, a negative\noutput voltage could be generated, and the net power flow i\nn\nthe SCBBR would be back to the inputs although that is not\ncontemplated as a primary use of the device. The SCBBR\ncan also operate in a mode where the power flow is from the\noutput to the input if synchronous rectification is used at all\npoints, and it makes some sense for use as a \xe2\x80\x9cregenerative\xe2\x80\x9d\nsort of application. This ability will be discussed below.\nContinuing the disc~ssionof the buck mode shown in\nFIGS. 5 & 6, the output voltage of the DC-DC converter\nis recirculated back to the input bus ofthe SCBBR, Varying\nthe duty cycle of the switches controls the ratio between the\ninput and output voltage of the converter. Since the input bus\nvoltage fixes the output voltage of the DC-DC converter,\nthe effect of varying the duty cycle is to vary the voltage\n50 drop between the input bus and the SCBBR output voltage.\nThe switching action of the two switches in the buck\nconverter of FIG. 6 might also be considered unusual in that\nthey are controlled such that either one or both switches are\nalways tamed on, they are both never off simultaneously,\n5s even during the switching cycle. It is a current fed mode of\noperation. When both switches are conducting there is no\nvoltage drop (except the small conduction losses) across the\ninput of the D C D C converter, so the output voltage of the\nSCBBR is equal to its input voltage. When one switch is\n60 open, the voltage across the transformer output will be equal\nto the SCBBR input bus voltage since it is clamped to that\nvalue by the bridge rectifiers. Therefore the input voltage\nacross the converter will be equal to the input bus voltage\ndivided by the transformer turns ratio. Varying the duty\n65 cycle controls the average voltage dropped across the\nDC-DC converter, and therefore the SCBBR output voltage.\n\nUS 7,042,199 B1\n\n7\n\n8\n\nThe SCBBR output voltage in the buck mode can be\ncomputed as:\n\noutput the e5ciency will increase (synchronous rectification), and the SCBBR can operate in a regenerative mode\nwherein power is actually returned to the source from the\nload The regenerative operation in the CL mode is possible\nif the free wheeling diode D,is replaced with a switch.\nFinally, various output filter designs can be utilized for\nsmoothing the output voltage for load protection and/or\nregulation. In addition, input filters can be added to the\ndevice, if necessary, to smooth the input voltage as well.\nThe control circuitry, an example of which is shown inthe\nschematic of FIG. 8, can consist of 3 Pulse Width Modulators A, B, & C, one for each mode, and a mode switching\ncircuit D to switch between either the Current Limit or the\nBuck and Boost Modes. Steering logic 35 is included to\nsupply the proper PWh4 pulses to the appropriate power\nswitches QI-Qs. The steering logic circuit could utilize\ndigital logic to connect the PWM signals and the mode\ncommand from the comparators (in the pulse width modulators) to the appropriate switches as defined in the logic\ntable (given below). A single analog PWM input command\nis input to the circuit. The PWM command can be generated\nfrom voltage and current regulating circuitry (not shown)\nused to control the voltage ration between the input bus and\nthe output bus. Typically, Ref A>Ref B>Ref C>Ref D. The\ncontrol for switch Q is not shown in the diagram, but can\nbe similarly implemented.\nThe highest PWM command signals produce boost mode\nPWM commands to the switches. Intermediate level commands produce Buck mode PWM signals. Normally, the\ncircuit operates in either the boost or buck mode, but for\ninput to output voltage ratios of nearly 1, the circuits may\noperate in both modes simultaneously.\nThe steering logic is set up so that the PWM switching\ncommands in these two modes intersperse with each other\nwithout interference. Thus there can be either a slight\noverlaD in control ranEe wherein both modes co-exist, zero\nover16 (ideal) or a slight underlap wherein for a small\ncommand range neither boost nor buck mode PWM comm a are generated, without significantly affecting the\ncircuits\' performance. A lower level PWM comand input\nis used to generate PWM comands for the Current Limit\nmode. ~n additional circuit in the logic decides when the\ncommands are low enough to use the current\nLimit\ninstead of the buck mode, and switches logic to prevent buck\nmode pWM commands and enable current limit mode PWM\ncommanh.\n. ne\nalso\non a power\nswitch to the current firnit\nswitch which effectively &ofis the power\nto\nreduce voltage\non the power switches during the\ncurrent l i t mode. The mode switching between the current\nlimit mode and the buck and boost modes incorporates\nhysteresis to eliminate any indecision as to which operating\nmode to use caused by noise near the emition point.\nThe switching sequence goes through four states in the\nboost and buck modes, and 2 states in the current limitkg\nmode, as shown in the following table:\n\nVo6,=V,,,-V,,*(PKU Duty Cycle)l(Turns Ratio)\n\nWhere a PWM Angle of 0 has t e switches closed all the\nh\ntime and an angle of 100% corresponds to each switch being\nclosed 50% of the time. Except for the sign in the equation,\nthis equation is identical to the one for the boost mode. By\nredefining the duty cycle for maximum buck to be -100%,\nthe equations become identical, and for a 2:l turns ratio\ntransformer, the output can be varied from 50% to 150% of\nthe input voltage.\nThe third mode of operation, the Current Limiting (CL)\nmode, an effective schematic of which is shown in FIG. 7,\nuses many of the components used in the boost and buck\nmodes, as well as some additional components. It uses a\ncompletely different mode of switching, and allows operation down to 0 output voltage to allow an increased operating range, and particularly an OFF mode and turn-on/\noverload limiting function. In the CL mode the primary or\nfull wave bridge side of the converter switches serve no\npurpose, and they are all tuned off. The switches Qs-Qs, also\nused for the buck mode on the output bus side of the\nconverter, are switched simultaneously, with Q5/Q7 and\nQiQ8 each effectively acting as one switch and the transformer has no voltage across it. A diode is added between the\nFET switches and common, and the FET switches, the\ndiode, and the output inductor function as a conventional\nbuck converter as shown in FIG. 7. The transformer has no\nfunction in this mode, and in fact is shorted by an auxiliary\nswitch (Q9 in FIG. 2) to reduce voltage transients.\nIn this CL mode, t e output voltage can be computed as:\nh\n\ns\n\nio\n\nis\n\n20\n\n2s\n\n30\n\nVou,=V,,*(PKU Angle)\n35\n\nAlthough the form of this equation is quite different from\nthe boostand buck mode equations given previously, the\noutput voltage is still defined only by the input voltage and\nP w angle, and the o ~ t p can be controlled between 0\n~t\nvolts and the input voltage. Acmab\', the range in this mode 40\noverlaps the range in the SCBBR buck mode, but with\ntypically lower efficiency and higher ripple currents in the\nfilters. In the prototype, the switching frequency is increased\nfor Operationin the cL mode to reduce the current\nThe current limit mode is typically Useful only during turn 45\non and overload conditions, or if the output voltage must be\nlower than that that can be obtained with the SCBBR\noperating in buck mode. Also, the equation is only valid for\ncontinuous conduction where the inductor L current never\ngoes to 0.\nso\nEssentially, overlaying the boost, buck, and current limit\nmode effective schematics reveals the complete SCBBR\nS S ~ ~\nschematic, as previously ~ ~ S C U and shown in FIG. 2.\nThis discussion has heretofore assumed that the input and\noutput currents of the SCBBR are always positive. However, ss\nif synchronous rectification is used on both sides of the\nDC-DC converter, then current flow can be in either\ndirection. This can be very useful because the magnetizing\ncurrent of the transformer can be supplied from the input\nsource, otherwise there would be a minimum output current 60\nMODEISWE\n(that required to magnetize the transformer) below which the\nBoost Mode State A:\nSCBBR buck mode would not operate. Switches that can\nconduct in both directions are already desireable on two of\nBoost Mode state B:\nthe switches on the SCBBR output. The logic to control the\nprimiXY switches is StraightforWard (and discussed below), 65 Buck Mode state A:\nand provides the magnetizing current discussed above. By\nBuckMode State B\nalso using active switches in the other two positions, the\n\ni: E:& g:\nzi\n\nQ1.\n\nQ21\n\n4\n4\n\nQ3\n\nQs\n\nQ\n.\n5\n\n4\n7\n\nON\nOFF\n\nOFF\nOFF\n\nON\n\ng.\n\nON\nON\n\nON\nON\n\nOFF OFF\n\nON\n\nT\ni\n\nON\n\nOFF\n\nON\n\nOFF\n\nOFF\n\nOFF OFF\n\nON\n\nON\nON\n\nON\nON\n\nOFF\nOFF\n\nON\nON\n\nQs\n\n%\n\nUS 7,042,199 B1\n9\n\n10\n\nadded to accomplish this. The first an instantaneous overcurrent sense at twice rated current to shut off all switches\n-continued\nand limit the peak current into the output filter. The second\nQI,\nQ2,\nis a linear proportional pus integral current regulation loop\nMODEISTATE\nQs\nQ6\nQ7\nQ8\nQ9\n5 at 1.5 timesratedcurrenttocontrolthePWMangleuntilthe\nBuck Mode state c:\nOFF ON ON OFF ON ON OFF\noutput voltage recovers ani! the voltage regulator takes over.\nBuck Mode S a e D:\ntt\nOFF OFF ON ON ON ON OFF\nImplementation of these loops was successful as illustrated\nCLModeStateA\nOFF OFF ON ON ON ON ON\nCL Mode state B:\nOFF OFF om OFF OFF om ON\nin FIG. 9, which shows the\n*Om\ning a large capacitor as a transient load while running at\nIO rated current. The capacitor is 100 times the output filter\nStates A and C in the boost and buck modes range from\ncapacitance so the output voltage collapses almost com0 to 50% duty cycle, and at the boost and buck modes can\npletely. The insmtanmus overcurrent sensing limits the\nbe running simultaneously as long as the total duty cycle of\ninitial spike of current (into the filter), and then the SCBBR\nruns under current limit until the capacitor is charged. The\nboth modes is less than 50%. In the current limit mode, the\nduty cycle of either state can be 0 to 100%. Depending on 15 current sensing and the data plotted are the current into the\noutput filter. This is the same as the currents that is in the\nthe control logic employed, the buck modes and the CL\nmodes can be executing simultaneously, if desired, or the\noutput switches, and it is the critical current to be controlled\ncontrol system can switched discretely between these\nfor protection of the SCBBR.\nmodes.\nThe invention has been described hereinabove using\n20 specific examples; however, it will be understood by those\nPrototype Regulator\nskilled in the art that various alternatives may be used and\nHigh efficiency is possible\nthe SCBBR\nif\nequivalents may be substituted for elements or steps\nthe circuit is optimized for low losses. As such, the design\ndescribed her&., without deviating from the scope of the\ncan use rather large semiconductors and magnetic compoinvention. Modifications may be necessary to adapt the\nnents, and a relatively low switching frequency. Smaller 25 invention to a particular\nor to particular needs\ncomponents can be used where a small, compact size is\nwithout departing from the scope of the invention. It is\ndesired (although efficiency may suffer).\nintended that the invention not be limited to the particular\nAcurrent development of the SCBBR is for an application\nimplementation described herein, but &at the claims be\nas a he1 cell regulator. The pmtotype SCBRR is being tested\ngiven their broadest interpretation to cover embodiall\nwith a simulated fuel cell scaled at 50% of the voltage and 3o merits, literal or equivalent, covered thereby.\n10Y0 the current rating of t eintended fuel cell. The target\nof\nh\nWhat is\nis:\nfuel cell is rated a 10 kw, 340 volts no load (170 for the\nt\n\'a A series\n.\nbuck-boost\ncomprising:\nsimulator), 200 volts full load (100 volts for the simulator),\ncircuit;\nat 50 amps (5 maps for the simulator). The intended load is\nto a Source\na 270-volt (135 volts for the simulated system) bus. The 35 a switching circuit for\nan output circuit connected to said switching circuit and\nefficiency of the\ndoesn\'t fall greatly until about\nfor outputting a load voltage, wherein\n10%load. The power loss is a relatively constant 2 to 3 watts\nsaid control circuit controls said output circuit and said\nbelow 50% power. These efficiencies are for the power stage\ninput circuit for operating said regulator in a plurality\nonly, the control power requirement, including gate drive, of\nof modes including:\nthe prototype is 3 to 4 watts.\n40\na current limiting (CL) mode;\nThe DC resistance of the series connected components of\na buck mode; and\nthe prototype (the input filter, the transformer secondary, the\na boost mode,\nsecondary switches, and the output filter) is 0.15 ohms,\nwherein Only a fraction Of an Output power Of said\naccounting for 0.25% loss at 2 amps, and 0.6% loss at 5\nregulator is switched by said switching circuit during\namps load. Two-thir&jof the loss at full load is due to 45\none or both of the buck and the boost modes; and\nswitching losses or resistive losses in the primary and\na transformer having a primary winding and a centermagnetic components core losses.\ntapped secondary winding, wherein the center tap of\nVoltage regulation in a converter is primarily a measure of\nsaid secondary winding is for connecting to the source\nthe performance of the voltage regulation feedback loop.\nwinding is \'Onand wherein said\nThe regulation can be as good as the regulator, independent 50\nnected to said switching circuit, and further wherein\nof the transfer characteristics of the converter. However, the\nsaid secondary winding is connected to said output\npreceding discussion discussed the transfer functions of this\ncircuit.\nconverter and the similarity of them throughout the three\n2. A series ~onnected\nbuck-boost regulator comprising:\nimplied that the output voltage could be\ndifferent modes,\ncircuit;\ndetermined based on the input voltage, the transformer ratio, 55 a\nand the PWM angle. Open loop regulation generally cona switching circuit for connecting to a source voltage;\nan output circuit Connected to said switching circuit m d\ntimes into the current limit mode also, but not as accurately.\nfor outputting a load voltage, wherein\nA closed loop regulator is also included on the prototype\nsaid control circuit controls said output circuit and said\nSCBBR. Its only function is to trim out the remaking output\ncircuit for operating said regulator in a Plurality\nerrors, so its control range can be limited to altering the 60\nof modes including:\noutput voltage only a few percent, and it can use only the\na current limiting (CL) mode;\nintegral of the voltage error. Transient response, and dampa buck mode; and\ning, can be provided by the open loop pa% which simplifies\nthe design of the integral controller path.\na boost mode,\nwherein only a fraction of an output power of said\nA discussed so far, the SCBBR is typically a stiff voltage 65\ns\nregulator is switched by said switching circuit during\nsource, and to be usefbl in a real system the ability to limit\none or both of the buck and the boost modes;\ncurrents into an overload is desired. Two circuits can be\n\nUS 7,042,199 B1\n11\nand wherein said switching circuit includes a first\nswitch, a second switch, a third switch, and a fourth\nswitch in a bridge configuration,and further wherein\nsaid output circuit includes a series connected fifth\nand sixth switch connected to a series connected\nseventh and eighth switch.\n3. The regulator of claim 2, wherein, during said boost\nmode, said control circuit continuously turns on said fifth\nswitch and said sixth switch, and further wherein said\ncontrol circuit cycles through a plurality of boost states\nincluding:\na first boost state wherein the first, fourth, and seventh\nswitches are on and further wherein the second, third,\nand eighth switches are oQ\na second boost state wherein the seventh and eighth\nswitches are on, and M e r wherein the first, second,\nthird, and fourth switches are 0% and\na third boost state wherein the second, third and eighth\nswitches are on and further wherein the first, fourth,\nand seventh switches are off.\n4. The regulator of claim 2: wherein, during said buck\nmode, said control circuit continuously turns on said seventh\nswitch m d said eighth switch, and further wherein said\ncontrol circuit cycles through a plurality of buck states\nincluding:\na first buck state wherein said first, fourth, and sixth\nswitches are on and further wherein said second, third,\nand fifth switches are off;\na second buck state wherein said fifth and sixth switches\nare on, and further wherein said first, second, third, and\nfourth switches are 0% and\na third buck state wherein said second, third, and fifth\nswitches are on, and further wherein said first, fourth,\nand sixth switches are off.\n5. The regulator of claim 2, wherein, during said current\nlimiting mode, said control circuit continuously turns off\nsaid first, second, third, and fourth switches, and further\nwherein said control circuit cycles through a plurality of CL\nstates including:\na first CL state wherein said fifth, sixth, seventh, and\neighth switches are on; and\na second CL state wherein said fifth, sixth, seventh, and\neighth switches are off.\n6. The regulator of claim 2, further comprising a ninth\nswitch connected to said secondary winding which is turned\noff by said control circuit during said boost and said buck\nmodes, but is turned on during said CURRENT LIMITING\nmode to short out said secondary winding.\n7 The regulator of claim 2, wherein each switch has a\n.\ndiode placed in parallel.\nS. The regulator of claim 7 further comprising:\n,\na ninth switch connected to said center tap of said\nsecondary winding which is turned off by said control\ncircuit during said boost and said buck modes, but is\nturned on during said CURRENT LIMITING mode to\nshort out said secondary winding;\na freewheeling diode connected between said output\ncircuit and a ground;\na first transformer diode connecting a terminal of said\nsecondary to said ninth switch;\na second transformer diode connecting another terminal\nof said secondary to said ninth switch; and\nan inductor for connecting said output circuit to a load.\n9. The regulator of claim 8, wherein, during said boost\nmode, said control circuit continuously turns on said fifth\nswitch and said sixth switch, and continuously turns off said\n\n12\nninth switch, and further wherein said control circuit cycles\nthrough a plurality of boost states including:\na first boost state wherein the first, fourth, and seventh\nswitches are on and fuaher wherein the second, t i d\nhr,\nand eighth switches are 0%\n5\na second boost state wherein the seventh and eighth\nswitches are on, and fitrther wherein the first, second,\nthird, and fourth switches are 0% and\na third boost state wherein the second, third and eighth\nswitches are on and further wherein the first, fourth,\n10\nand seventh switches are 0%\nand wherein, during said buck mode, said control circuit\ncontinuously turns on said seventh switch and said eighth\nswitch, and continuously turns off said ninth switch, and\n15 further wherein said control circuit cycles through a plurality\nof buck states includinR:\na first buck state wherein said first, fourth, and sixth\nswitches are on and further wherein said second, third,\nit\nand ffh switches are off;\n20\na second buck state wherein said fifth and sixth switches\nare on, and further wherein said first, second, third, and\nfourth switches are 0% and\na third buck state wherein said second, third, and fifth\nswitches are on, and further wherein said first, fourth,\n25\nand sixth switches are 0%\nand further wherein, during said CLJRRENT LIMTING\nmode, said control circuit continuously turns off said\nfirst, second, third, and fourth switches, and continuously turns on said ninth switch, and further wherein\nsaid control circuit cycles through a plurality of CL\n30\nstates including:\na first CL state wherein said fifth, sixth: seventh, and\neighth switches are on; and\na second CL state wherein said fifth, sixth, seventh, and\neighth switches are off.\n35\n10. A series connected buck-boost regulator comprising:\na control circuit;\na switching circuit for connecting to a source voltage;\nan output circuit connected to said switching circuit and\nfor outputting a load voltage, wherein\n40\nsaid control circuit controls said output circuit and said\ninput circuit for operating said regulator in a plurality\nof modes including:\na cumnt limiting (CL) mode:\n45\na buck mode; and\na boost mode,\nwherein only a fraction of an output power of said\nregulator is switched by said switching circuit during\none or both of the buck and the boost modes;\nand\na transformer having a primary winding and a centertapped secondary winding, with t e center tap for\nh\nconnecting to the source voltage, wherein\n55\nsaid switching circuit includes a first switch, a second\nswitch, a third switch, and a fourth switch in a bridge\nconfiguration, said primary winding of said transformer\nconnected to a center of said bridge, and further\nwherein\n60\nsaid output circuit includes a series connected fifth and\nsixth switch connected to a terminal of said secondary\nwinding and connected to a series connected seventh\nand eighth switch connected to another terminal of said\nsecondary winding, and also wherein\n65\na ninth switch is included in said regulator for shorting out\nsaid transformer secondary winding on command from\nsaid control circuit.\n\nUS 7,042,199 B1\n13\n\n14\n\n11. The regulator of claim 10,wherein, during said boost\na first buck state wherein said first, fourth, and sixth\nmode, said control circuit continuously turns on said fifth\nswitches are on and further wherein said second, third,\nand fifth switches are off;\nswitch and said sixth switch, and continuously turns off said\nninth switch, and further wherein said control circuit cycles\na second buck state wherein said fifth and sixth switches\n5\nthrough a plurality of boost states including:\nare on, and further wherein said first, second, third,and\nfourth switches are o a and\na first boost state wherein the first, fourth, and seventh\nhr,\na third buck state wherein said second, t i d and fifth\nswitches are on and further wherein t e second, third,\nh\nswitches are on, and further wherein said first, fourth,\nand eighth switches are 0%\nand sixth switches are 0%\na second boost state wherein the seventh and eighth\nsaid CURRENT LIMITING\nswitches are on, and further wherein the first, second, 10 and further Wherein,\nmode, said control circuit continuously turns off said first,\nthird, and fourth switches are off; and\na third boost state wherein the second, third and eighth\nsecond, third, and fourth switches, and continuuuslyturns on\nsaid n n h switch, and further wherein said control circuit\nit\nfie first, fourth,\nswitches are on and M~~\ncycles through a plurality of CL states including:\nand seventh switches are 0\n%\na first CL state wherein said f f h sixth, seventh, and\nit,\nand wherein, during said buck mode, said control circuit lS\neighth switches are on; and\ncontinuously t r s on said seventh switch and said eighth\nun\na second CL state wherein said fifth, sixth, sex7enthand\nswitch, and c o n ~ u o u s ~ y off said\nturns\nand\neighth switches are off.\nfurther wherein said control circuit cycles through a plurality\nof buck states including:\n* * * * *\n\n'