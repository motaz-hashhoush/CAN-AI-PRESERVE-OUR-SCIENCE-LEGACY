b'111111111111111111111111111111111111111111111111111111111111111111111111\n\n(12) United States Patent\n\n(io) Patent No.:\n\nHeineek et al.\n\n(45) Date of Patent:\n\n(54) AIR-TO-AIR BACKGROUND ORIENTED\nSCHLIEREN TECHNIQUE\n\nJan. 1,2019\n\n(58) Field of Classification Search\nCPC . G06T 5/002; G06T 5/50; G06T 2207/10032;\nG06T 2207/20224; B64D 47/08; H04N\n7/183\n(Continued)\n\n(71) Applicant: The United States of America as\nRepresented by the Administrator of\nthe National Aeronautics and Space\nAdministration, Washington, DC(US)\n\n(56)\n\nReferences Cited\nU.S. PATENT DOCUMENTS\n\n(72) Inventors: James Thomas Heineck, San Jose, CA\n(US); Daniel William Banks,\nCarmichael, CA (US); Edward Treanor\nSchairer, Palo Alto, CA (US); Paul\nStewart Bean, Lancaster, CA (US);\nEdward Andrew Haering, Jr.,\nLancaster, CA (US); Brett Arnold\nPauer, Tehachapi, CA (US); Brittany\nJoan Martin, Edwards, CA (US);\nDavid Nils Larson, Lancaster, CA (US)\n\n3,693,015 A *\n5,534,995 A *\n\n9/1972 Funk, Jr.................... B64F 1/00\n250/564\n7/1996 Weinstein ............ GO1N 21A55\n356/129\n(Continued)\n\nOTHER PUBLICATIONS\nRichard, H. et al. `Background oriented schlieren demonstrations",\nFinal Report No. 8963-AN-015 (European Research Office, Edison\nHouse, Old Marylebone Road, London NW15TH, United Kingdom) May 2001, pp. 1-37.\n(Continued)\n\n(73) Assignee: The United States of America as\nRepresented by the Administrator of\nNASA, Washington, DC (US)\n(*) Notice:\n\nUS 10,169,847 B1\n\nSubject to any disclaimer, the term ofthis\npatent is extended or adjusted under 35\nU.S.C. 154(b) by 147 days.\n\nPrimary Examiner Marnie Matt\n(74) Attorney, Agent, or Firm\nChristopher J. Menke;\nRobert M. Padilla; Mark P. Dvorscak\n\n(21) Appl. No.: 15/229,555\n\n(57)\n\n(22) Filed:\n\nAn air-to-air background-oriented Schlieren system and\nmethod for measuring and rendering visible density changes\nin air that cause a refractive index change by an airborne\nvehicle. A sensor aircraft equipped with a high-speed visible\nspectrum camera travels at low airspeed on a predetermined\nroute and on a level altitude over a background having\nconsistent contrast and sunlight reflectivity. The target aircraft, traveling on the same predetermined route but at an\naltitude between the sensor aircraft and the ground (background) passes beneath the sensor aircraft. The camera on\nthe sensor aircraft captures a series of images including a\nreference image immediately before the target aircraft enters\nthe image frame followed by several data images as the\ntarget aircraft passes through the image frame. The data\nimages are processed to calculate density gradients around\n(Continued)\n\nAug. 5, 2016\nRelated U.S. Application Data\n\n(60) Provisional application No. 62/202,015,filed on Aug.\n6, 2015.\n(51) Int. Cl.\nG06T 5/00\nB64D 47/08\n\n(2006.01)\n(2006.01)\n(Continued)\n\n(52) U.S. Cl.\nCPC .............. G06T 5/002 (2013.01); B64D 47/08\n(2013.01); G06K 9/6202 (2013.01); G06T 5/50\n(2013.01);\n(Continued)\n\nReference image\n\nABSTRACT\n\nDiwort.d image\n\n.gaad\xc2\xaeu~\n=~aap\n;day from a\n...W. dal\n\n\xc2\xb0\n\nMINIMUM\n\xe2\x80\x94"--\n\nw t\n\n.worawaavw\ni\n\n/\n\nOcn~re aaer~ ~\'\nt\n,\n\nInterrogation areas(1AJ\nCarraiaticn mag\n\nUS 10,169,847 B1\nPage 2\nthe target aircraft. These density gradients include shockwaves, vortices, engine exhaust, and wakes. Air density\ngradients cause a refractive index change in the fluid and a\nslight distortion in the background pattern ofthe data image.\nImage processing that compares the data image to the\nreference image yields the difference caused by the density\ngradient.\n10 Claims, 9 Drawing Sheets\n\n(51) Int. Cl.\nG06T 5/50\n(2006.01)\nH04N 7/18\n(2006.01)\nG06K 9/62\n(2006.01)\nG06T 7/00\n(2017.01)\n(52) U.S. Cl.\nCPC ........... G06T 7/0026 (2013.01); H04N 7/183\n(2013.01); G06T 2207/10032 (2013.01); G06T\n2207120224 (2013.01)\n(58) Field of Classification Search\nUSPC .......................................................... 348/147\nSee application file for complete search history.\n\n(56)\n\nReferences Cited\nU.S. PATENT DOCUMENTS\n\n9,599,497 B1 * 3/2017 Haering, Jr. .......... GO1F 1/7086\n2006/0262324 AT* 11/2006 Hays ...................... GO1N 21/47\n356/519\n2014/0267781 AT* 9/2014 Buckner .............. GO1N 21A55\n348/187\n2014/0340502 AT* 11/2014 Freeman ................... G06T 7/20\n348/79\n2017/0082124 AT* 3/2017 Kremeyer ................. B61C 7/00\n2017/0315564 AT* 11/2017 Thomas ................. G05D 1/104\n\nOTHER PUBLICATIONS\nBanks, D., "Fundamental Aeronautics Program! Supersonics Project\', Technical Presentation; National Aeronautics and Space Administration; Dryden Flight Research Center, Mar. 2011 Technical\nConference, Cleveland, OH, pp. 1-18.\nRaffel, Markus, `Background-oriented schlieren (BOS) techniques", Exp Fluids (2015) 56:60, pp. 1-17.\nHargather, M.J. et at,"Natural-background-oriented schlieren imaging", Exp Fluids, Jul. 2009, pp. 1-10.\n\n* cited by examiner\n\n.1\n\ndetu uoglejano~\n\nog aoll\n\n~ awejopm\n\nSeen aoaje ojxgq/U~\n\na\n\nU.R. Patent\n\nJan 1 2019\n\nSheet 2 of\n\nUS 10,169,847 GI\n\nInstimem\nplatform\n+r\n\n% umeG\nplatform altitude,\ne\n\nTarget\nT,arge!\nplane\n\n\xc6\x92brie!!|dude\n\n.\n\n~\n\n,roue,\naltitude\n\xc6\x92 l\n2300#~\n\xc2\xab \xc2\xabg\nif ya,.\npJ\n\nFIG.2\n\nU.S. Patent\n\nJan. 1, 2019\n\nUS 10,169,847 B1\n\nSheet 3 of 9\n\ni\n\nE\n\nThe\n\n..\n.............~....;\n\nFIG..\n\nE\nET?~#1~\'c.......~~~.`....-..,~.e.._...m,,.,t\n\n!Time 3-.a.-.~\n\n-----\n\nU.S. Patent\n\nJan. 1, 2019\n\nUS 10,169,847 B1\n\nSheet 4 of 9\n\nNt\n\nU.S. Patent\n\nJan. 1, 2019\n\nUS 10,169,847 B1\n\nSheet 5 of 9\n\n5\nc\'k\n\n04\n\nAM.\n\nx"I l\n~\n\nsf\n\naka:\n\nt ~\n\nohs ~ ~ .:~,\n\n~.#~ ~\n\n~\n\n4\n\nak\n\nas\n\nMV~~\n\n~~ ~\n\n.:.~ ~~\n4` \'~~,\xe2\x80\xa2~ ~`>~$~;\nrP ,~\n\n,\n~\',~\nR\n\ns :ag\n\n,\nYRgg r\n\n\xc2\xb0 ~;yoo\nc~\xc2\xaeag\ngld Fy ~pk aeie~\n\n~. ~\n\n$.~~\xe2\x80\xa2\na3:\n\nr~\n\n5\n\nt ..,\n\neFF\n\n~\xc2\xb0t?.g"\n\na . ~,\n\nSta\n~\',v\n\na\n\n-~;\xc2\xb0~\n\n\':\n\nW\n\nV.\n\xc2\xb0\' S\n\nxa,\n\neo\nkQ\n\nA\n\np\na\n\nF\n\na\n\n$\n\nit,F\n~>\n\n<\', as\'\'\n\n~kv\n\n> "^S \xc2\xb0\n\n3\n\nr .#~ k\n\n# iE g,:\nr..\n\n# g :3 d>\n\ns\n\nPAY\na\n\n>a\n\nlow\nY\n\nDOW=\nSao\n\niF PT\xe2\x80\xa2\n9"\n\nz\na.,.\n~F~.\n\na.\xe2\x9c\x93\n\nb~Rs.\'\n\nQj\n\nVWQ;\noil\n>\n\ns\na *~\nP\n\nU.\n\nAj\na~\n\n3\ns\n\nF~\n\na\n\n\',\'\n\n..4 ~~ <\n\n\'"` s\n\nF\n\na\'`\n`$\n\nu~. ~\'\naz\n\n+s R.\n\n$\na y\n\na\n\n_\n\n6\n\nb\n\n~\n\n.00\n\nscowl""\'3\n\n\xc2\xb0a\n\n,8\n\n~ a a\n\n~ ay\n\n,\n\ne\n\ne"\xe2\x80\x94\n\nsa\n\n\'s\n\nsY,.\n\na\n\n\\\n\nd\n\n3`\n\na.\n\nx\na\n\nYo\'6 a\'s.\n\n,R \xe2\x80\xa2.\n\nS\n,_ , }o\n\n\'R\n\n1fSz\n\n,..\n\nk\n\nxy, m\n\n.,\n\na\xe2\x80\xa2.\n\nm-k\'\n\n\'~.\n\n\xe2\x80\x9e~\n\np\nar^\n\n6 \xe2\x80\xa2 .a\n\n.\n\n$\n\n\'..\n\n110%\n\n"\n\nJrF\n\n\xe2\x80\xa2,\n\nA\n\nW\na\'x 5... g\xe2\x80\x9e\n\n,,\n\naa~\n\nX\n\n~w.\'"\'s\xe2\x80\xa2 +\n\nL\n\nfiK\n\n^~\n\n.sue\n\n\'ct`,a\n\nf\n4\'\n\n,\'\n\n\'\xc2\xb0\n\n<.~\n\n.,\n\n..\' qa\n\n\xe2\x80\xa2,p~a;~ ~..,\n\nU.S. Patent\n\nJan. 1, 2019\n\nSheet 6 of 9\n\nUS 10,169,847 B1\n\nt.~\n\nU.S. Patent\n\nJan. 1, 2019\n\nSheet 7 of 9\n\nfri\n\nUS 10,169,847 B1\n\n0\n\nw\n\nFT\n\nei\n\nU.S. Patent\n\nJan. 1, 2019\n\nSheet 8 of 9\n\nUS 10,169,847 B1\n\nU.S. Patent\n\nJan. 1, 2019\n\nSheet 9 of 9\n\n~,\n\nUS 10,169,847 B1\n\nUS 10,169,847 B1\n2\nAIR-TO-AIR BACKGROUND ORIENTED\nSCHLIEREN TECHNIQUE\n\nSUMMARY OF THE INVENTION\n\nPRIORITY CLAIM\n5\n\nThis application claims priority to Provisional Patent\nApplication No.62/202,015,Airborne Background Oriented\nSchlieren Technique, filed on Aug. 6, 2015, the contents of\nwhich are incorporated herein in its entirety.\n10\n\nORIGIN OF INVENTION\nThe invention described herein was made in the performance of work under a NASA contract and by an employee\nof the United States Government and is subject to the\nprovisions of Section 20135(b) of the National Aeronautics\nand Space Act (51 U.S.0 20135(b)), as amended, Public\nLaw 85-568 (72 Star. 435, 42 U.S.C. \xc2\xa7 2457), and may be\nmanufactured and used by or for the Government for government purposes without payment of any royalties thereon\nor therefore.\n\n15\n\n20\n\nTECHNICAL FIELD\nThe present invention relates to an air-to-air Background\nOriented Schlieren Technique for visualizing supersonic\nflow phenomena with full-scale aircraft in flight.\n\n25\n\nBACKGROUND OF THE INVENTION\n30\n\nThe determination of the location and strength of shockwaves and vortices is fundamental to understanding the flow\naround an aircraft. These features are strong enough to affect\nthe environment that the vehicle inhabits. For example, they\ncan cause drag and/or produce undesirable noise. The\nresearcher must be able to predict and mitigate the effects of\nthese flow features.\nThe best method for discovering new physics and/or\nvalidating computational models is by making measurements on a full-scale aircraft in flight. Importantly, a technique that can visualize and measure the strength of flow\nfeatures would be highly advantageous to researchers.\nAn early method for airborne Schlieren makes use of the\nsun\'s edge as viewed through a telescope. The aircraft was\nobserved and recorded through a telescope on the ground\npointed at the sun as the aircraft passed through the field of\nview. The aircraft\'s shockwaves would distort the edge of\nthe sun. High speed imaging of the fly-by was processed to\nextract the distorted edge and create a streak image of the\nairplane and its shockwaves. This method has the advantage\nof having the imaging system on the ground, thus reducing\nthe cost by eliminating the observer aircraft.\nThe imagery of the shockwaves from this earlier method\nwas unfortunately limited by the narrow field of view\ndefined by the sun. Further, ground-based systems, using the\nsun as a light source, have produced good results but\nbecause of the distance involved did not have the desired\nspatial resolution to resolve small-scale shock structures\nnear the aircraft. Also, the solution from this method does\nnot currently have a theory or method by which the density\ngradient can be derived and thereby measured.\nAccordingly, in light of the shortcomings of the previous\nsolutions, there clearly exists a need for a modern version of\nthe airborne Schlieren method to capture images of shockwaves created by supersonic airplanes that includes\nincreased field of view and resolution enabling more precise\ncalculations.\n\n35\n\n40\n\n45\n\n50\n\n55\n\n60\n\n65\n\nThe basis of this manifestation of the Background Oriented Schlieren (BOS) method uses a slow moving sensor\nairplane outfitted with at least one viewport-mounted camera, a target airplane (airborne vehicle) passing between the\ncamera, and a natural background such as desert floor\npopulated with desert flora as the speckle for the background. The sensor airplane is used to capture images ofthe\nsubject airborne vehicle where those images are processed in\nsuch a way as to reveal the density gradients (i.e. shockwaves, vortices, jet plumes) and measure the amount of\ndistortion they cause in the background. This basic technique is hereafter referred to as the Airborne Background\nOriented Schlieren method.\nThe present invention also utilizes BOS for yielding\nmeasured deflection distances, which can be used to determine the strength of a given density gradient. The deflection\ndistance is the apparent shift of the speckles in the reference\nbackground image caused by the refractive index gradient\ncaused by the density gradient.\nOne embodiment of the present invention includes an\nobserver aircraft that flies at a high altitude and at a\nrelatively low speed. The camera system located on the\nobserver aircraft is focused on the terrain. The target aircraft\nis accelerated to its desired air speed and is navigated to fly\nbelow the observer aircraft at a prescribed altitude and\nthrough the field ofview ofthe cameras. The cameras record\nthe passage of the target aircraft.\nAnother embodiment of the invention includes the use of\none (or more) high speed digital cameras whose spectral\nsensitivity can span 300 mu to 900 mu. Using additional\nmatched and synchronized cameras improves the quality of\nthe data.\nAnother aspect of the invention is to process the images\ntaken by the observer aircraft to extract the density gradient\ninformation. A reference background image is chosen from\nthe recorded sequence. Any image in the sequence prior to\nthe entrance of the target aircraft in the field of view can be\nused as the reference background image.\nA further aspect of the invention includes: (1)registering\nthe data image to the reference image to minimize the\ndisplacement between the reference and data image due to\nmovement of the observer aircraft, (2) defining of an interrogation grid that defines the measurement points,(3)tracking the movement of the target aircraft; and (4) measuring\nthe displacement of the background between the reference\nand data images at each node of the interrogation grid by\nimage cross correlation and/or optical flow algorithms. The\ncalculated x and y deflections are collected and saved in a\ndata array for further analysis. A contour plot of the deflection quantities yields a Schlieren image.\nAn additional aspect of the invention is for the Airborne\nmethod that processes the entire image sequence of the\nfly-by in order to yield a large number of instantaneous\nsamples of the flow structure. If the flight conditions of the\ntarget aircraft are constant, the large number of instantaneous samples can be averaged to yield a smooth, clear\nrendering ofthe density gradients in the Schlieren image and\nprovide low noise data for calculating the density gradients.\nThis requires tracking the aircraft and offsetting the data at\neach image to account for its displacement.\nThe BOS method also advantageously allows researchers\nto see the shockwave geometry in the real atmosphere as the\ntarget aircraft flies through temperature and humidity gradients that cannot be duplicated in wind tunnels. The photographs and/or images produced by the BOS method will\n\nUS 10,169,847 B1\n3\n\n4\n\nadvantageously help researchers to validate computer simulations and wind tunnel test data used in designing future\nsupersonic aircraft.\nAccordingly, for a better understanding of the invention,\nits functional advantages and the specific objects attained by\nits uses, reference should be made to the accompanying\ndrawings, claims and descriptive matter in which there are\nillustrated preferred embodiments of the invention.\n\nAVIRIS Airborne Visible/Infrared Imaging Spectrometer\nAlt altitude\nBOS background oriented Schlieren\nCFD computational fluid dynamics\nDLR German Aerospace Center (Deutsches Zentrum fir\nLufi-und Raumfahrt e.V.)\nDn, dn, An change in an arbitrary direction\nDx, dx, Ax change in the x direction\nDy, dy, Ay change in the y direction\nFOV field of view\ng acceleration units\nIR infrared\nLCD liquid crystal display\nM Mach number\nMSL mean sea level\nNASA National Aeronautics and Space Administration\nNIR near infrared\nN. normal acceleration\nPDT Pacific Daylight Time\nPIV particle image velocimetry\nRBOS retro-reflective background oriented Schlieren\nSNR signal to noise ratio\nx longitudinal distance\ny lateral distance\nc angle of deflection\n\nBRIEF DESCRIPTION OF THE DRAWINGS\nFIG. 1 shows the workflow and principle of Schlieren\nphotography.\nFIG. 2 shows a graphical depiction of the BOS methodology.\nFIG. 3 shows a diagram of the AirBOS imaging scheme.\nFIG.4 shows the AirBOS course line and re-entry pattern.\nFIG. 5 shows the background characteristics used for\ntesting.\nFIG. 6 is a diagram showing the reflective spectra of\ndesert vegetation.\nFIG. 7 shows a raw image sequence.\nFIG. 8 shows an average sequence of AirBOS images\nwith airplane overlay.\nFIG. 9 shows an annotated average sequence of AirBOS\nimages with airplane overlay.\n\n5\n\n10\n\n15\n\n20\n\n25\n\nDETAILED DESCRIPTION OF THE\nINVENTION\n\nPrinciples of BOS\n30\n\nThe following detailed description is ofthe best currently\ncontemplated modes ofcarrying out various embodiments of\nthe invention. The description is not to be taken in a limiting\nsense, but is made for the purpose of illustrating the general\nprinciples of the invention, since the scope of the invention\nis best defined by the appended claims.\nA series of flight tests were undertaken to validate the\neffectiveness of an air-to-air background oriented Schlieren\ntechnique (AirBOS). The results of the flight-testing are\nbelieved to be the first AirBOS images obtained on a\nfull-scale supersonic airplane in flight. The flights were\nconducted in the low-altitude supersonic test range near\nEdwards Air Force Base, California.\nOne embodiment of the invention utilized a slow-moving\nsensing airplane outfitted with a nadir view port-mounted\ncamera, an airplane passing beneath the camera, and a desert\nfloor populated with desert flora as the speckle background.\nThe system design and flight planning were based on camera\ncharacteristics, aircraft coordination, and airspace limitations. Image processing required additional steps as compared with more conventional BOS applications, due to it\nbeing more complex than an equivalent static model windtunnel application.\nSignificant shock structure and apparent expansion fan\nwas observed on the target airplane. The technique was\nrelatively simple compared to other air-to-air flight-testing\nSchlieren systems that were in development. The flighttesting validated the AirBOS concept and provided high\nspatial resolution images of supersonic aircraft shock structure.\n\n35\n\n40\n\n45\n\n5o\n\n55\n\n6o\n\nNomenclature\nAirBOS air-to-air background oriented Schlieren\nA/C aircraft\nAGL above ground level\nASIS airborne Schlieren imaging system\n\n65\n\nObtaining Schlieren and shadowgraph images requires a\ndigital imaging camera, either still or video, and a suitable\nbackground that lends itself to image cross-correlation. The\nprinciple of BOS works by detecting minute shifts of a\nspeckle pattern caused by the presence of a density gradient\nthat is large enough to create a refractive index change in the\nair. A quiescent image of the background serves as a\nreference to the image of the background distorted by the\ndensity gradient. These distortions are often smaller than a\npixel; rarely can they be seen with the naked eye. The image\ncross-correlation techniques, however, as well as some optical-flow image-processing techniques, reveal these minute\ndisplacements of the speckle pattern.\nFIG. 1 shows the workflow and principle of BOS. As\nshown in FIG. 1, the ray from the background (a speckle)\npasses through a density gradient and is deflected. The angle\nof deflection, e, is proportional to the strength and optical\nthickness of the gradient. The apparent shift in the location\nof a speckle pattern is detected with image cross correlation.\nThe centroid ofthe correlation peak defines the shift, Dx and\nDy.As with all measurementtechniques that use image cross\ncorrelation, that is, PIV and surface deformation measurements (sometimes known as digital image correlation), the\nhigher the resolution of the camera, the more detail can be\ngleaned.\nIn one embodiment of the invention, a sensor with small\npixel size (4 to 10 microns) will be more sensitive to\ndetecting weaker gradients than sensors with 20- to 25-micron pixels. Cross-correlation detection algorithms comfortably detect displacement ofless than one-tenth of one pixel.\nIt follows that the smaller the pixel, the smaller the speckle\ndisplacement that can be detected. The data that result from\nthe cross-correlation are an array of points with displacements in x and y. These data can be plotted as a contour of\nDx, which is analogous to conventional Schlieren with a\nvertical knife edge. Plotting Dy is the same as having a\nhorizontal knife edge. A vector quantity of the two compo-\n\nUS 10,169,847 B1\n5\n\n6\n\nnents permits a rotation of the "virtual knife edge," which\nprovides calculated displacements in any arbitrary direction,\nDn.\n\nditioned location) and to possibly take advantage ofthe near\ninfrared (NIR) spectral band to increase the contrast of the\nplants against the background.\nThe acquired data were primarily in the visible spectra\ndue to the optics used. In this embodiment, a 105-mm lens\nwas chosen, giving an angular field of view of 8.7 by 6.8\ndeg. The magnification from that lens was also closest to\nmaintaining the desired 2 to 5 pixels per bush. Image blur\ncalculations help define the exposure time, which then\naffected the minimum lens aperture.\nThe relatively large pixel size, small focal plane array, and\nlow frame rate, as compared to other possible units, would\nbe a minimum standard for producing quality images. The\nintent of this test series was to validate the technique.\nEnhancements to the apparatus by using more capable\ncameras are within the scope of this invention. The optics\nwas a single Nikon Nikkor 105 mm lens (Nikon Corporation, Tokyo, Japan), which has a spectral range from\napproximately 0.35 to 0.90 \xc2\xb5m. Therefore, the system spectral range was approximately 0.40 to 0.90 \xc2\xb5m. The camera\noutputs both analog (RS170) and digital (CameraLink)\nformats. The analog signal was sent to a monitor (Boland\nv068 6.8-inch LCD monitor) (Boland Communications,\nInc., Lake Forest, Calif.)in the airplane cabin and the digital\ndata were sent to the data acquisition system.\nData Acquisition:\nIn one embodiment, the data acquisition system consisted\nof a standard framegrabber card connected to a standard\ncomputer processor(portable computer).In another embodiment, the laptop computer was a Panasonic CF-30 ToughBook\xc2\xae (Panasonic Corporation, Newark, N.J.). The ToughBook\xc2\xae is a ruggedized laptop that has been used on other\nflight tests. The Toughbook(k was further ruggedized for\nflight by replacing the hard drive with a solid-state drive.\nThe framegrabber was an Epix PIXCI ECB 1 card (EPIX,\nIncorporated, Buffalo Grove, Ill.).\nIn a further embodiment, Epix XCAP software (version\n3.0) was used to control the framegrabber acquisition and\nsubsequent storage on the laptop. The camera digital data\nwere output in CameraLink format. The hardware was\nlocated in the King Air cabin and operated by a flight test\nengineer. The data acquisition was manually triggered when\nthe target airplane was approximately two miles away (in\ntrail) during the acceleration. This method resulted in at least\ntwo seconds of data with system and operator lags prior to\nacquiring the target airplane in the image field, allowing the\nrecording of some reference frames prior to target acquisition.\n\nMethodology and Approach\nThe planning of the testing campaign was based on the\nrequirements of the BOS technique. Magnification was\nchosen so that the background pattern (plants) was rendered\nby 2 to 5 pixels. The flight configuration consisted of a\nslow-moving observing airplane flying at a set altitude, with\nthe supersonic test airplane flying at a lower altitude directly\nbelow the observer. The camera in the observing airplane is\nmounted in a nadir view port, added prior to this experiment.\nBased on wind tunnel and laboratory studies, the BOS\nmethod is most sensitive when the density gradient is\nlocated at approximately one-third to one-half of the distance from the camera to the background. The Airborne\nmethod does not follow this rule. The distance ratio is\nlimited only to the hyperfocal distance ofthe observing lens,\ni.e., the aircraft should be at such a distance so as to remain\nin focus even as the critical plane offocus is the ground. For\nexample,the observer at an altitude of30,000 feet fitted with\na 300 mm lens with a 650-foot hyperfocal distance can\neasily accommodate a target aircraft at 1000 foot below the\nobserver, thus making the ratio 29 3oths, or approximately\n/\n97%. Altitude, sensor, and speckle dimensions defined, a\nlens was chosen that rendered the background at the desired\nspatial frequency (2 to 5 pixels per bush). Otherwise, the\ndistance between the observer and the target can vary\naccording to the requirements of the experiment. This is\nanother advantage of the AirBOS method\nIn another embodiment, the reference images were\nacquired by the observer airplane prior to the test airplane\nentering the camera field of view, thus continuous recording\nat the maximum frame rate was necessary as the test airplane\napproached. FIG. 2 presents a graphical depiction of this\nmethodology; FIG. 3 shows the AirBOS imaging scheme.\nAircraft Configuration\nIn a further embodiment, a Beechcraft B-200 Super King\nAir (Beechcraft Corporation, Wichita, Kans., now Textron\nInc., Providence, R.I.) (henceforth referred to as the King\nAir) was chosen for the sensor platform or also known as the\nobserver plane. The King Air was equipped with two nadir\n(downward-facing) camera ports. The AirBOS test\nemployed the forward nadir port for the tests described\nherein. Further discussion of the nadir ports can be found in\nthe "Flight Operations" section below.\n\n5\n\n10\n\n15\n\n20\n\n25\n\n30\n\n35\n\n40\n\n45\n\nApparatus\nThis section includes a description of the camera, optics,\nframegrabber, and computer processor used for data acquisition and storage. The environmental qualification of the\nflight-testing equipment is also discussed.\nCamera and Optics:\nIn one embodiment, the camera chosen was a Goodrich\nSUI Visible to Short-wave IR (Goodrich/SUI SU640-SDWHVis-L7RT, FIG. 8), which has a Visible Indium Gallium\nArsenide (InGaAs) sensor with spectral range of 0.4 \xc2\xb5m to\n1.7 \xc2\xb5m, a resolution of 640 by 512 pixels, and a 25-micrometer pixel pitch. This camera has a maximum frame rate\nof 109 fps (at 640 by 512 pixels). This camera was chosen\nfor its robustness to withstand the flight environment (high\nvibration, low pressures, and cold temperatures in an uncon-\n\nFlight Operations\n\n50\n\n55\n\nThis section discusses the flight profiles used. A list ofthe\npre-selected altitude combinations, in above ground level\n(AGL), and the respective field of view (FOV)are shown in\ntable 1. These altitudes would roughly conform to the\ndesired constraints explained previously including the onethird and two-thirds distance criteria and the 2-5 pixels per\nbush (speckle) criteria.\nTABLE 1\n\n60\n\nField of view predicted with 105-mm lens based upon\npre-selected altitudes.\nKing Air altitude, AGL F-18 altitude, AGL\n65\n\n9,000 ft (2743 m)\n10,000 ft (3048 m)\n\nFOV, ft by ft(m by m)\n\n6,000 ft (1829 m) 456 by 366 (139 by 112)\n6,700 ft (2042 m) 500 by 400 (152 by 122)\n\nUS 10,169,847 B1\n7\n\n8\n\nTABLE 1-continued\n\nlow-altitude supersonic corridor, Joshua trees are very\nsparse and the observed vegetation is almost exclusively\ncreosote bushes. There are three special characteristics ofthe\ncreosote plant in this environment. The first is that it grows\nto approximately 10 ft to 12 ft in diameter (3 m to 3.7 m).\nSecond, there is a natural mechanism that maintains separation of5 ft to 10 ft(1.5 m to 3 m)between plants to prevent\nover population in water-sparse landscape (ref. 15). Third,\nfrom the air the creosote plants appear much darker than the\ndesert floor at selected wavelengths, providing a speckle\nbackground with very good contrast. This speckled pattern\nis shown in FIG. 5. Taken together, these characteristics\nmake creosote bushes the ideal background for implementing the BOS technique.\nThe spectral characteristics of desert plants are such that\nthey reflect primarily in the far red and NIR range(See FIG.\n6). FIG. 6 is from R. N. Clarke, et al., Surface reflectance\ncalibration of terrestrial imaging spectroscopy data: a tutorial using AVIRIS. U.S. Geological Survey, www.usgs.gov,\n2002. It was originally believed that to maximize contrast, a\nsensor that is sensitive to NIR, in addition to the visible,\nwould be desirable. This effect has been seen by others using\nBOS with natural backgrounds with vegetation. It turned\nout, at least for the conditions tested, that the desert floor\nreflectivity was much higher than the vegetation, so the plant\nreflectivity, and consequently the NIR reflectivity, was\ninconsequential. This may or may not be the case at other\nconditions, such as time of day or time of year.\n\nField of view predicted with 105-mm lens based upon\npre-selected altitudes.\nKing Air altitude, AGL F-18 altitude, AGL\n11,000 ft (3353 m)\n12,000 ft (3658 m)\n\nFOV, ft by ft(m by m)\n\n5\n\n7,370 ft (2246 m) 552 by 442 (168 by 135)\n8,040 ft (2451 m) 604 by 482 (184 by 147)\n\nAs previously described, the King Air was equipped with\ntwo nadir camera ports. The AirBOS tests utilized the\nforward port for this test campaign. The forward port\nappeared to be quieter in terms offlow disturbances, which\nwas desirable for reducing potential camera motion. Both\nports incorporated a door that could open in flight, reducing\nthe possibility offoreign object damage to the camera or the\nlens during takeoff, landing, and ground operations.\nThe basic setup during the flight was to fly on a single\npre-determined course line as shown in FIG. 4. The flights\nwere planned to alternate from east and west, aligning them\nwith the low-altitude supersonic corridor. All of the supersonic passes had to remain within the supersonic corridor. At\nthe end of each pass, the King Air departed the line to the\nnorth, and the F-18 to the south. Each airplane then performed a "teardrop re-entry" and re-acquired the course line\nin the opposite direction. The two aircraft maintained vertical separation during the maneuver. The F-18, due to its\nhigher speed, flew a wider and farther re-entry pattern.\nThe flights consisted of the F-18 executing a supersonic\npass (at a Mach number of approximately LI) below the\nKing Air. The F-18 remained relatively straight and level\nduring each pass. The King Air maintained the slowest\npossible stable and safe operating airspeed during these\noperations (approximately 140 knots).\nDetermining the optimal aircraft altitudes is a balance\nbetween aircraft performance, ground vegetation detail, the\napparent size of the F-18, and the largest possible viewing\narea for the target airplane to pass through. It was speculated\nthat some ground vegetation shadowing would be preferable\nto increase contrast ofthe vegetation against the desert floor.\nFor obtaining some shadowing, the optimal planned flight\ntimes were not to take place mid-day during times of the\nyear when the sun passes near the zenith. The sun elevation\nangle for this test varied between approximately 33 deg and\n69 deg. The actual flight and pass information is given in\ntable 2. The ground elevation under the flight path varied\nfrom approximately 3,000 ft to 3.500 ft.\n\n10\n\n15\n\n20\n\n25\n\n30\n\n35\n\n40\n\n45\n\nTABLE 2\n50\nFlight and pass information.\nTotal\npasses/\nin view\n\nKing\nAir all,\nft MSL\n\nF-18\nall,\nft MSL\n\n5/4\n\n7 April\n\n6/4\n\n12,20015,200\n12,20015,200\n23,000\n12,000\n\n9,20011,300\n9,20011,300\n15,300\n8,000\n\nSome clouds\n(darker)\nAltitude\noptimization\nHigh altitude\nLow altitude\n\nFlight\nno.\n\nDate,\n2011\n\n1\n2\n\nTime,\nlocal PDT\n\n55\n\n3\n4\n\nIn another embodiment of the invention, image processing algorithms were used to determine the pixel shift of the\nbackground.Pixel shift is correlated with change ofindex of\nrefraction and consequently the change in density and\nshockwave location.\nIn an additional embodiment, several steps of image\nprocessing were required to produce the Schlieren image.\nThe initial step was determining which of the numerous\npasses were the most appropriate to process. On some passes\nthe target airplane did not enter the camera view; other\npasses were over areas of the desert with sparse plant\ndensity.\nA sequence, such as that shown in FIG. 7, was extracted\nfrom each pass that was selected for processing. The first\nimage ofeach sequence was the last"clear" frame. The stack\nof subsequent images was registered to the first using\nsoftware developed at the NASA Ames Research Center\n(Moffett Field, Calif.). Each image of the sequence of\nimages is registered to the first image in the sequence by\napplying a first-order projective transformation as shown in\nequations (1) and (2):\n\nComments\n\n6 April 10:00-10:37\n\nImage Processing\n\n9:15-9:50\n\n21 April 10:47-11:27\n27 April 11:45-13:12\n\n6/4\n9/5\n\naixo + a2Yo + a3\n\n(1)\n\nC1x0 + C2Yo + 1\n\nbixo + b2Yo + b3\n\nY=\n\n()\n2\n\nC1x0+C2Y0+1\n\n60\n\nBackground Characteristics\nThe dominant plant that can be seen from medium to high\naltitude in the Mojave Desert is the creosote bush with\ninterspersed Joshua trees. In the specific area under the\n\nx=\n\n65\n\nwhere(xo, yo are pixel coordinates in the first image and (x,\n)\ny) are the corresponding pixel coordinates in the current\nimage. The eight coefficients of this transformation (a1-3,\nb1-3, c1-2 are determined by defining at least four well)\nseparated points (for example, near the corners) in the first\nimage and computing, by image cross correlation, the positions of these points in each subsequent image. This yields\n\nUS 10,169,847 B1\n9\n\n10\n\na set of 2 by n linear equations, where n is the number of\npoints (>=4), which can be solved for the unknown coefficients. Then the transformed pixel coordinates of each point\nin the current image are computed from equation (1) and\nequation (2). This method eliminated differences in the\nimages that were not due to disturbances created by the\nshockwaves ofthe test airplane,for example, differences due\nto pitch, roll, or yaw of the observer airplane.\nOnce the images are registered, local displacements ofthe\nbackground due to disturbances created by the test airplane\nare determined by defining an interrogation grid and computing the displacement of each node by image cross correlation. These data were processed using PIVview (Pivtec\nGmbH, G6ttingen, Germany). The interrogation window\nsize was determined by trial and error to be the smallest\nwindow that resulted in a signal-to-noise ratio (SNR)of the\ncross correlation function of at least four. An SNR offour is\nconservative for obtaining a resolvable peak in the correlation that was measurable. That is, with a lower SNR it was\ndifficult to measure the subpixel shifts. The grid density was\nthen chosen to produce 82-percent overlap between adjacent\nwindows. The 82 percent was using the interrogation area\nthat yielded the SNR of four, which was 12 pixels. The\nprocessing of the correlations used the multi-grid method,\nstarting with 64-by 64-pixel windows, then refined to 16 by\n16 pixels. A high-pass filter of5 by 5 was implemented prior\nto the correlation pass. The peak finder was a 5 by 5\nGaussian fit, owing to the size ofthe plants and the high-pass\nfilter. Finally, a conservative outlier detection was performed, which permitted interpolation from the nearest\nneighbors.\nThe data from this correlation step produce an array\ndataset of i, j, dx, dy, and SNR for each correlation. In this\ncase the array data were further processed using PIVview,\nhowever, many other commercially available and self-developed plotting programs could be used. The displacements\nof dy were made into a grayscale contour plot and exported\nas bitmaps to produce the final single-instance Schlieren\nimage. A noise band may appear at the top of the processed\nimages due to that portion of the new frame that does not\nmap onto the reference frame because ofthe forward motion\nof the observer airplane. As a last step, an overlay of the\nairplane was placed onto the image, because the airplane\nimage was lost due to the cross-correlation process; an\nexample is shown in FIG. 8.\n\nto 0.5 ms; and on flight 4 the exposure was initially set at\n0.25 ms and further reduced during flight to 0.2 ms. The\nfaster exposures resulted in crisper images due to the reduction in motion-based blur. It may be necessary, however, to\nhave brighter conditions in order to take advantage of the\nsignificantly faster exposure times. The background for\nflights 3 and 4 was also much more uniform than that of\nflight 2 and, though flight 1 backgrounds were quite good,\nthe longer duration in exposure time blurred some of the\ndetail in the shock structure. It appears that within the\nparameters tested, flight 4 was the most optimized (that is,\nbackground, time of day, overall brightness, and exposure\ntime).\n\n5\n\n10\n\n15\n\nTABLE 3\nSpecific flight conditions of each aircraft pass presented. Flight\n4 represents the best known configuration.\n\nFlight\n1\n2\n25 3\n3\n4\n4\n4\n\n35\n\n40\n\n45\n\n50\n\nRaw and Processed Data\n55\n\nThe flight conditions, camera exposure, and approximate\nsun elevation of each of the passes presented are shown in\ntable 3. In addition to the changes in altitudes and position\nof the pre-determined course line, the main parameter that\nwas changed was the camera exposure time (or integration\ntime). The lens was set for f/11 throughout the test. This\nsetting was believed to be the best compromise to get a\nnear-pinhole effect but allow enough light to get the shortduration exposures. On the first flight the exposure was set\nto approximately 5 ms. The first flight day was the darkest\nflight day due to some cloud cover. In flight 2 the exposure\nwas reduced to 4.072 ms; flight 3 was significantly reduced\n\nF-18\nall, ft\nMSL\n\nF-18\nMach\n\nTime of\nday\n(local,\nPDT)\n\n1\n4\n2\n7\n3\n6\n9\n\n13,200\n13,200\n23,520\n15,200\n12,000\n12,200\n12,000\n\n9,900\n10,060\n15,300\n10,000\n8,000\n8,000\n8,000\n\n1.08\n1.09\n1.09\n1.05\n1.03\n1.03\n1.03\n\n10:09\n\xe2\x80\x949:35\n10:58\n11:19\n12:45\n12:52\n13:00\n\nSun\nExposure, elevation,\nms\ndeg\n5.0\n4.072\n0.5\n0.5\n0.2\n0.2\n0.25\n\n43\n37\n52\n55\n69\n69\n69\n\n30\n\nResult and Discussion\nThe test campaign consisted of four flights with 26 total\npasses. Of the 26 passes, 17 passes captured the airplane or\nshocks in the camera field of view. The passes deemed to\nhave the best overall characteristics were then processed.\n\nPass\n\nKing\nAir\nall, ft\nMSL\n\n20\n\n6o\n\n65\n\nThe closer flights (those having less vertical separation\nbetween observer and target), as expected, produced images\nwith more spatial resolution. Even in the images from the\nfarthest flights (those having the most vertical separation)\nthe shockwaves persist through the end ofthe frame without\nmuch apparent attenuation. There is some expected spreading of the features, most notably the apparent expansion\nregion from the wing upper surface.\nAverage Data\nIn one embodiment, image averaging is a technique used\nto reduce noise and consequently improve the quality of\nimages. The averages shown herein are ofthe bitmap images\ngenerated using the data plotting software that produce the\ninstantaneous images. Averaging was performed to use the\nsame image registration utility that was used on the raw\nreference and data images. By cross correlating on the\nairplane noise "blob" (the result of the cross correlation of\nthe airplane image), the stack of usable images were aligned\nand a grayscale image average was calculated pixel by pixel.\nThe averaged images shown in FIGS. 8 and 9 clearly\nshow the major shock structure generated by the airplane,\nincluding the over-wing expansion and shock around the\ncanopy. One can see where the weaker shocks coalesce with\nthe stronger shock in the far field. The relative ease with\nwhich results were obtained successful results after the\nfirst flight pass suggests that any effort to optimize this\ntechnique could pay large dividends to the test community.\nThere seems to be no impediment to achieving the same\nlevel of quality with AirBOS as with a wind-tunnel system,\nbecause the desert floor provides an ideal speckle pattern. As\nwell, in the years since this first series of flights, new\ncameras have become available that have capabilities that\ncan produce more detailed results.\nIt should be understood that the foregoing relates to\nvarious embodiments ofthe invention and that modifications\n\nUS 10,169,847 B1\n11\n\n12\n\nmay be made without departing from the spirit and scope of\n3. The system of claim 1 wherein the processor registers\nthe invention. It should also be understood that the present\nthe data images to the reference image to minimize the\ninvention is not limited to the designs mentioned in this\ndisplacement between the reference and data images due to\napplication and the equivalent designs in this description,\nmovement of the sensor aircraft.\nbut it is also intended to cover other equivalents now known 5\n4. The system of claim 1 wherein the density changes\nto those skilled in the art, or those equivalents which may\ninclude at least one of shockwaves, vortices, engine exhaust,\nbecome known to those skilled in the art in the future.\nwakes, and air disturbances.\n5. The system of claim 1 wherein the distance ratio\nINDUSTRIAL APPLICATION\nbetween the visible spectrum camera and the natural back10\nground is limited only to the hyperfocal distance of the\nThe invention disclosed herein pertains to an air-to-air\nobserving lens.\nbackground oriented Schlieren (AirBOS) system used for\n6. A method for visibly rendering the density changes in\nimaging the shockwaves caused by supersonic aircraft. The\nair caused by an airborne vehicle, the method comprising the\nAirBOS system is useful in helping future engineers to\ndesign a quiet supersonic transport vehicle by being able to\nunderstand the detailed shock structure of high-speed aircraft in flight.\nWhat is claimed is:\n1. A system for visibly rendering the density changes in\nair caused by an airborne vehicle, the system comprising:\na natural background with consistent contrast and sunlight\nreflectivity;\na sensor aircraft moving at slow airspeed and at level\naltitude;\na target aircraft moving at a level altitude between the\nsensor aircraft and the natural background and in-line\nand beneath the sensor aircraft;\na visible spectrum camera and a data capture device\nresiding on the sensor aircraft for capturing a reference\nimage that does not include the target aircraft, and for\ncapturing a series of data images of the target aircraft\nand associated refractive air distortion in the air\nthrough which the target aircraft passes beneath the\nsensor aircraft; and\na processor to correlate the series of data images of the\ntarget aircraft and associated air distortion, and to\nsubtract the reference image from the data images of\nthe target aircraft and associated air distortion, and to\ncompute the average of the data images showing the\nvisible density changes in the air.\n2. The system of claim 1 wherein the visible spectrum\ncamera has a spectral range of no longer than 0.9 micrometers, resolution of at least 640 by 512 pixels, no longer than\n25 micrometer pixel pitch, and a frame rate of at least 100\nframes per second.\n\n15 steps:\n\n~~\n\n25\n\n30\n\n35\n\n40\n\nflying a sensor aircraft at slow airspeed and at level\naltitude over a natural background having consistent\ncontrast and sunlight reflectivity;\nflying a target aircraft at level altitude where the altitude\nof the target aircraft is between the sensor aircraft and\nthe natural background and the path of the target\naircraft is in-line with the sensor aircraft;\ncapturing a series of visual spectrum images that include\nat least one reference image before the target aircraft\nenters the image frame and two or more data images\nwhere the target aircraft is passing through the image\nframe; and\ncorrelating the series of data images and mathematically\ncomparing the reference image to compute an average\nof the data images showing the visible density changes\nin the air.\n7. The method of claim 6 wherein the density changes\ninclude at least one of shockwaves, vortices, engine exhaust,\nwakes, and air disturbances.\n8. The method of claim 6 wherein the data images are\nregistered to the reference image to minimize the displacement between the reference and data images due to movement of the sensor aircraft.\n9. The method of claim 8 further including movement\ntracking of the airborne target aircraft.\n10. The method of claim 9 further including measurement\nofthe displacement ofthe background between the reference\nand data images at each node in the interrogation grid by\nimage cross correlation and optical flow procedures.\n\n'