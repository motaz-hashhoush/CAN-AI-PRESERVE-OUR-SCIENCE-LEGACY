b'1111111111111111111inum11111uu\n(12) United States Patent\n\n(1o) Patent No.:\n(45) Date of Patent\n\nNixon\n\n6,385,657 B1 *\n6,467,003 B1 *\n6,577,636 B1 *\n6,940,816 B2\n7,054,966 B2 *\n7,433,984 B2 *\n7,467,245 B2\n7,505,891 B2\n7,594,057 B1\n7,739,436 B2 *\n7,912,068 B2\n8,135,893 B2 *\n8,204,037 B2 *\n8,498,276 B2 *\n2009/0141744 Al*\n\n(54) SCHEDULED PERIPHERAL COMPONENT\nINTERCONNECT ARBITER\n(75) Inventor: Scott Alan Nixon, Phoenix, AZ (US)\n(73) Assignee: Honeywell International Inc.,\nMorristown, N7 (US)\n(*) Notice:\n\nSubject to any disclaimer, the term of this\npatent is extended or adjusted under 35\nU.S.C. 154(b) by 140 days.\n\n(21)\n\nAppl. No.: 13/557,343\n\n(22)\n\nFiled:\n\n(51)\n\nParady .......................... 709/251\nDoerenberg et al. ......... 710/117\nSang et al . ................. 370/395.7\nMcDonnell\nWells et al . ................... 710/100\nDas et al . ...................... 710/117\nMetsker\nLin\nGandhi et al.\nMeyer ........................... 710/111\nEberle et al.\nBrindle ......................... 710/117\nPoledna et al . ............... 370/350\nHall et al . ..................... 370/336\nPoledna et al . ............... 370/503\n\nAlmeida, L. et al.; FTT-CAN: A Network-Centric Approach for\nCAN-Based Distributed Systems, DET-IEETA Universidade de\nAveiro, P-3810-193 Aveiro, Portugal.\n\nPrior Publication Data\nUS 2014/0032804 Al\n\nFeb. 10, 2015\n\n:\n\nOTHER PUBLICATIONS\n\nJul. 25, 2012\n\n(65)\n\n5/2002\n10/2002\n6/2003\n9/2005\n5/2006\n10/2008\n12/2008\n3/2009\n9/2009\n6/2010\n3/2011\n3/2012\n6/2012\n7/2013\n6/2009\n\nUS 8,954,643 B2\n\nJan. 30, 2014\n\n* cited by examiner\n\nInt. Cl.\n(2006.01)\n(2006.01)\n\nG06F 13100\nG06F 13/372\n\nU.S. Cl.\n\nPrimary Examiner Brian Misiura\n(74) Attorney, Agent, or Firm\nIngrassia Fisher & Lorenz,\n\nUSPC .............. 710/124; 710/45; 710/111; 710/117\n\nP.C.\n\n(58) Field of Classification Search\nCPC ................ G06F 13/362; G06F 13/372; H04L\n12/40013; H04L 12/40026; H04L 12/4035\n\n(57)\n\n(52)\n\nABSTRACT\n\nSystems and methods are described for arbitrating access of a\ncommunication bus. In one embodiment, a method includes\nperforming steps on one or more processors. The steps\n\nUSPC .................................... 710/45, 117, 124, 111\n\nSee application file for complete search history.\n\ninclude: receiving an access request from a device of the\n(56)\n\nReferences Cited\n\ncommunication bus; evaluating a bus schedule to determine\nan importance of the device based on the access request; and\nselectively granting access of the communication bus to the\ndevice based on the importance of the device.\n\nU.S. PATENT DOCUMENTS\n5,867,480 A\n5,907,689 A\n6,240,475 B1 *\n\n2/1999 Thomas et al.\n5/1999 Tavallaei et al.\n5/2001 Anubolu ....................... 710/107\n\n11 Claims, 4 Drawing Sheets\n\n20\n\n32\n\n30\n\n~\n\n3S\n\n42\n\nAccess Request\n. ...................\n-squest\n. .............................. .\n\np\n\nModule\n\nA cean\ntats\nu\n\n1\n\nAccess Control\n\nModule\n\n...........P"\n\n44\n\n.\' 3 il\n\n. 3, 2 i s\n\nice:\n\n.............................\n\nAccess Data\nCurrent\nTime Slot\n\n40\n38\n\n34\nScheoule\nDatastore\n\nU.S. Patent\n\nFeb. 10 , 2015\n\n~\n\nUS 8,954,643 B2\n\nSheet 1 of 4\n\n~\n\nI\n\n~\n\n~\n\n~\n\nI\n\n~\n\nI\n\nI\n\nU.S. Patent\n\nFeb. 10, 2015\n\nSheet 2 of 4\n\nUS 8,954,643 B2\n\nNI\n\ne\n6\nz\n\n1\n\nC\n\nU\n7\nC+F\n~\n\nCZE\n\ntG\nLiF\nL~F\n\nU.S. Patent\n\nFeb. 10,2015\n\n<\n\nIN:\n\nlov\n\nco\n\n<\n\nSheet 3 of 4\n\nUS 8,954,643 B2\n\nU.S. Patent\n\nUS 8,954,643 B2\n\nSheet 4 of 4\n\nFeb.10,2015\n\n--------------\n\n/\n\n/\n\n-------------------------------\n\nLO\n\n0\nCD\n\nw\nall\n\nELI\n\n\\\n\n)\n\na,\n\n0\n\ng\\\n\n~\n\n\\\n\n10\'\n~\n\nUS 8,954,643 B2\n2\nSCHEDULED PERIPHERAL COMPONENT\nINTERCONNECT ARBITER\nSTATEMENT REGARDING FEDERALLY\nSPONSORED RESEARCH OR DEVELOPMENT\n\ndevice based on the access request; and selectively granting\naccess of the communication bus to the device based on the\nimportance of the device.\nOther embodiments, features and details are set forth in\n5 additional detail below.\n\nBRIEF DESCRIPTION OF THE DRAWINGS\nThis invention was made with U.S. Government support\nunder Contract No NNJT06TA25C awarded by NASA\nThe present invention will hereinafter be described in conJohnson Space Center The government has certain rights in\nlo junction with the following figures, wherein like numerals\nthis invention.\ndenote like elements, and\nFIG.1 is a functional block diagram illustrating a network\nTECHNICAL FIELD\nthat includes scheduling methods and systems in accordance\nwith exemplary embodiments;\nThe present disclosure generally relates to data transmis15\nFIG. 2 is an illustration of a bus schedule of the scheduling\nsion, and more particularly relates to methods and systems for\nmethods and systems in accordance with exemplary embodimanaging the transmission of data over a communications\nments;\nnetwork based on data importance.\nFIG. 3 is a dataflow diagram illustrating a scheduling module in accordance with exemplary embodiments; and\nBACKGROUND\n20\nFIG. 4 is a flowchart illustrating a scheduling method in\naccordance with exemplary embodiments.\nWhen used in a real-time system that requires a high level\nof determinism, the variability of traffic timing on a periphDETAILED DESCRIPTION\neral component interconnect (PCI) bus can cause transmission issues. For example, data from devices that have high 25\nThe following detailed description of the invention is\nimportance may not be able to make it on the bus if data from\nmerely example in nature and is not intended to limit the\nlower importance devices have been granted access. This is a\ninvention or the application and uses of the invention. Furresult of using the standard PCI arbiter which relies on a\nthermore, there is no intention to be bound by any theory\npresented in the preceding background or the following\nsimple fairness algorithm that has no knowledge of data or\nso detailed description. As used herein, the term "module" refers\ndevice importance or higher level system timing issues.\nto any hardware, software, firmware, electronic control comAs a result, it is desirable to provide methods and systems\nponent, processing logic, and/or processor device, individufor monitoring and transmitting data according scheduling\nally or in any combination, including, without limitation: an\nmethods and systems that take into account importance of\napplication specific integrated circuit (ASIC), an electronic\ndata or devices. Other desirable features and characteristics\nwill become apparent from the subsequent detailed descrip- 35 circuit, a processor (shared, dedicated, or group) and memory\nthat executes one or more software or firmware programs, a\ntion and the appended claims, taken in conjunction with the\ncombinational logic circuit, and/or other suitable components\naccompanying drawings and this background of the inventhat provide the described functionality.\ntion.\nTurning now to the figures and with initial reference to\n4o FIG. 1, an exemplary network 10 for providing communicaBRIEF SUMMARY\ntions between one or more devices 12a-12n is shown to\ninclude a scheduling system in accordance with various\nAccording to various exemplary embodiments, systems\nembodiments. Although the figures shown herein depict an\nand methods are described for arbitrating access of a commuexample with certain arrangements of elements, additional\nnication bus. In one embodiment, a method includes perform- 45 intervening elements, devices, features, or components may\ning steps on one or more processors. The steps include:\nbe present in actual embodiments. It should also be underreceiving an access request from a device of the communicastood that FIG. 1 is merely illustrative and may not be drawn\ntion bus; evaluating a bus schedule to determine an importo scale.\ntance of the device based on the access request; and selecEach device 12a-12n of the exemplary network 10 may be\ntively granting access of the communication bus to the device 5o a fixed device or a mobile device that communicates data\nbased on the importance of the device.\naccording to one or more networking protocols. In various\nIn another exemplary embodiment, a system includes a\nembodiments, the devices 12a-12n of the network include\nfirst module that receives an access request from a device of\nnavigation devices, aircraft component control devices, and/\nthe communication bus and that evaluates a bus schedule to\nor any other devices of an aircraft 16. As can be appreciated,\ndetermine an importance of the device based on the access 55 the scheduling methods and systems of the present disclosure\nrequest. A second module selectively grants access of the\nmay be applicable to various devices of various systems and\ncommunication bus to the device based on the importance of\nis not limited to the present example. The data is communithe device.\ncated from one device 12a-12n to another device 12a-12n\nIn still another exemplary embodiment, a computer prothrough a communication bus 18. The communication bus 18\ngram product is provided for arbitrating access of a commu- 60 can be a parallel or a serial communication bus that is wired,\nnication bus. The computer program product includes a tanwireless, or a combination thereof.\ngible storage medium readable by a processing circuit and\nAt least one of the devices 12a-12n, for example device\nstoring instructions for execution by the processing circuit for\n12a, includes a scheduling module 20 in accordance with\nperforming a method. The method includes performing steps\nexemplary embodiments. As can be appreciated, the schedon one or more processors. The steps include: receiving an 65 uling module 20 may also be implemented on all of the\naccess request from a device of the communication bus;\ndevices 12a-12n or a group of the devices 12a-12n and is not\nevaluating a bus schedule to determine an importance of the\nlimited to the present example. The scheduling module 20\n\nUS 8,954,643 B2\n3\n\n4\n\nincludes a bus schedule 22 (FIG. 2). The scheduling module\ncurrent time slot 38 according to other methods and is not\n20 grants access to the communication bus 18 for the various\nlimited to the present example.\ndevices 12a-12n based on the bus schedule 22 (FIG. 2). The\nOncethe access requestmodule 30 retrieves the access data\nbus schedule 22 stores data indicating an importance of the\n40, the access request module 30 evaluates the status indicadevices 12a-12n and/or the data from the devices 12a-12n.\n5 tors 26a-26n to determine if the particular device has access\nIn various embodiments, as shown in FIG. 2, the bus schedto that time slot of the communication bus 18. For example,\nule 22 includes one or more data elements 24a-24n associated\nthe access request module 30 evaluates the status indicator\nwith one or more time slots of the communication bus 18.\n26a-26n (e.g., the bit or other number of bits/bytes) associEach data element 24a-24n stores status indicators (e.g., one\nated with the device 12a-12n to see if it is set to one (or other\nbit, or other number of bits/bytes) 26a-26n. The status indi- io value indicating TRUE). If the status indicator 26a-26n is set\ncators 26a-26n are associated with a device 12a-12n on the\nto one, then an access status 42 is set to indicate that access is\ncommunication bus 18 and are set to indicate whether the\ngranted for the particular device 12a-12n. If, however, the\ndevice 12-12n may have access to the communication bus at\nstatus indicator 26a-26n is set to zero, then the access status\nthat time slot. Thus, devices 12a-12n with higher importance\n42 is set to indicate that access is not granted for the particular\nmay have access to the communication bus 18 for all of the 15 device 12a-12n.\ntime slots while devices with lower importance may only\nThe access control module 32 receives as input the access\nhave access to the communication bus 18 for a subset of time\nstatus 42. Based on the access status 42, the access control\nslots.\nmodule 32 generates access signals 44 to permit or deny the\nBefore granting access to the communication bus 18, the\ndevice 12a-12n access to the communication bus 18 (FIG. 1).\nscheduling module 20 checks the status indicator 26a-26n of 20 For example, if the access status 42 indicates that the device\nthe data element 24a-24n for the particular time slot to see if\n12a-12n does not have access to the time slot, no access\nthe device 12a-12n is permitted to use the communication bus\nsignals 44 are generated. If, however, the access status 42\n18 for transmission. If the status indicator 26a-26n indicates\nindicates that the device 12a-12n does have access to the time\nthat the device 12a-12n may have access to the communicaslot, the access signals 44 are generated to permit the transtion bus 18 at the particular time slot, the scheduling module 25 mission of data in the current time slot on the communication\n20 grants the device 12a-12n access to the communication\nbus 18 (FIG. 1).\nbus 18.\nReferring now to FIG. 4, and with continued reference to\nReferring now to FIG. 3, a dataflow diagram illustrates\nFIGS. 1-3, a flowchart illustrates a scheduling method that\nvarious embodiments of the scheduling module 20. Various\ncan be performed by the scheduling module of FIG. 1 in\nembodiments of scheduling modules 20 according to the 3o accordance with the present disclosure. As can be appreciated\npresent disclosure may include any number of sub-modules\nin light of the disclosure, the order of operation within the\nembedded within the scheduling module 20. As can be appremethods is not limited to the sequential execution as illusciated, the sub-modules shown in FIG. 3 may be combined\ntrated in FIG. 4, but may be performed in one or more varying\nand/or further partitioned to similarly arbitrate access to the\norders as applicable and in accordance with the present discommunication bus. Inputs to the scheduling module 20 may 35 closure.\nbe received from other modules (not shown) of other devices\nAs can be appreciated, the scheduling method may be\n12a-12n (FIG. 1), and/or determined/modeled by other subscheduled to run based on predetermined events, and/or can\nmodules (not shown) within the scheduling module 20. In\nrun continually at predetermined intervals during operation\nvarious embodiments, the scheduling module 20 includes an\nof the device 12a or the communication bus 18.\naccess request module 30, an access control module 32, and a 40\nThe method may begin at 100. The current time slot 38 is\nschedule datastore 34.\nincremented (e.g., as discussed above) at 110. It is determined\nThe schedule datastore 34 stores the bus schedule 22 (FIG.\nwhether an access request 36 is received at 120. If an access\n2). As can be appreciated, the bus schedule 22 (FIG. 2) can be\nrequest 36 is received at 120, the access data 40 for the current\npreconfigured and stored in the schedule datastore 34, and/or\ntime slot 38 is retrieved from the bus schedule 22 stored in the\ncan be configurable based on devices 12a-12n (FIG. 1) that 45 schedule datastore 34 at 130 and is evaluated at 140. If the\nmay be added to or removed from the communication bus 18\naccess data 40 indicates that the device 12a-12n has access to\n(FIG. 1).\nthat time slot (e.g., the bit associated with that device is one or\nThe access request module 30 receives as input access\nTRUE) at 140, then access is granted to the device and access\nrequests 36. The access requests 36 indicate a device\'s intent\nsignals 44 are generated at 150. Thereafter, the method may\nto utilize the communication bus 18 (FIG. 1) for transmission 50 end at 160.\nof data. When an access request 36 is received, the access\nIf, however, the access data 40 indicates that the device\nrequest module 30 retrieves access data 40 that includes the\n12a-12n does not have access to that time slot at 140, access\nstatus indicators 26a-26n (FIG. 2) from the bus schedule 22\nis denied at 170 and the current time slot 38 is incremented\n(FIG. 1) that is stored in the schedule datastore 34. The access\n(e.g., as discussed above) at 180. Thereafter, the access data\nrequest module 30 retrieves the access data 40 based on a 55 40 for the next time slot is retrieved from the bus schedule 22\ncurrent time slot 38 of the communication bus 18 (FIG. 1).\nstored in the schedule datastore 34 at 130 and is evaluated at\nIn various embodiments, the access request module 30\n140. This loop continues until the access data 40 indicates that\nmanages the currenttime slot 38 ofthe communication bus 18\nthe device 12a-12n has access to the time slot at 140. There(FIG. 1). For example, the access request module 30 initialafter, the method may end at 160.\nizes the current time slot 38 to a predetermined number (e.g., 60\nAlthoughthe exemplary methodis discussed with regard to\nzero). Thereafter, the access request module 30 increments\na single access request being received and evaluated, it is\nthe current time slot 38 after predetermined intervals of time\nappreciated that in various embodiments, multiple access\npass (e.g., every xmilliseconds). Once the current time slot 38\nrequests may be received and processed substantially simulreaches a predetermined maximum (e.g., equal to one minus\ntaneously for each time slot. In various embodiments, if more\nthe number of time slots in the schedule), the access request 65 than one request is received and each of the requests is\nmodule 30 resets the current time slot 38 to zero. As can be\nenabled for the current time slot, various methods may be\nappreciated, the access request module 30 may manage the\nperformed to determine which request is granted access. The\n\nUS 8,954,643 B2\n5\nmethods may include, but are not limited to, priority based on\nFIG. 2 (e.g., left to right or right to left), traditional fairness\nmethods, methods evaluating the amount of data to transfer,\netc.\nAs can be appreciated, one or more aspects of the present\ndisclosure can be included in an article of manufacture (e.g.,\none or more computer program products) having, for\ninstance, computer usable media. The media has embodied\ntherein, for instance, computer readable program code means\nfor providing and facilitating the capabilities of the present\ndisclosure. The article of manufacture can be included as a\npart of a computer system or provided separately.\nAdditionally, at least one program storage device readable\nby a machine, tangibly embodying at least one program of\ninstructions executable by the machine to perform the capabilities of the present disclosure can be provided.\nWhile at least one example embodiment has been presented in the foregoing detailed description of the invention,\nit should be appreciated that a vast number of equivalent\nvariations exist. It should also be appreciated that the embodiments described above are only examples, and are not\nintended to limit the scope, applicability, or configuration of\nthe invention in any way. Rather, the foregoing detailed\ndescription will provide those skilled in the art with a convenient road map for implementing various examples of the\ninvention. It should be understood that various changes may\nbe made in the function and arrangement of elements\ndescribed in an example embodiment without departing from\nthe scope of the invention as set forth in the appended claims\nand their legal equivalents.\nWhat is claimed is:\n1. A method of arbitrating access of peripheral devices on\na peripheral component interconnect (PCI) bus, comprising:\nperforming on one or more processors,\nstoring a plurality of time slots for each peripheral\ndevice of the peripheral devices on the PCI bus in a\nbus schedule;\nsetting a status indicator for each time slot of each\nperipheral device of the peripheral devices on the PCI\nbus in the bus schedule;\nreceiving an access request from a peripheral device of\nthe PCI bus;\ndetermining a current time slot;\nevaluating the status indicator stored in the time slot\nassociated with the current time slot of the bus schedule to determine an importance of the peripheral\ndevice; and\nselectively granting access of the PCI bus to the peripheral device based on the importance of the peripheral\ndevice, wherein the status indicators are single bit\nstatus indicators and are associated with peripheral\ndevices on the PCI bus.\n2. The method of claim 1 wherein the determining the\ncurrent time slot is based on a predetermined time interval.\n3. The method of claim 1 wherein the importance of the\nperipheral device is based on whether the peripheral device is\npermitted to transmit data during a time slot of the PCI bus.\n4. The method of claim 1 wherein the granting access to the\nPCI bus comprises generating access signals to permit transmission of data by the peripheral device on the PCI bus.\n5. A system for arbitrating access of peripheral devices on\na peripheral component interconnect (PCI) bus, comprising:\n\n6\n\n5\n\n10\n\n\xe2\x80\xa2 datastore that stores a plurality of time slots for each\nperipheral device of the peripheral devices on the PCI\nbus in a bus schedule, and that stores a status indicator\nfor eachtime slot of eachperipheral device of theperipheral devices on the PCI bus in the bus schedule;\n\xe2\x80\xa2 first module that receives an access request from a peripheral device of the communication bus, that determines a\ncurrent time slot, and that evaluates the status indicator\nstored in the time slot associated with the current time\nslot of the bus schedule to determine an importance of\nthe peripheral device based on the access request; and\n\n\xe2\x80\xa2 second module that selectively grants access of the PCI\nbus to the peripheral device based on the importance of\n15 the peripheral device, wherein the status indicators are\nsingle bit status indicators and are associated with\nperipheral devices on the PCI bus.\n\n20\n\n6. The system of claim 5 wherein the first module determines the current time slot based on a predetermined time\ninterval.\n7. The system of claim 5 wherein the importance of the\nperipheral device is based on whether the device is permitted\nto transmit data during a time slot of the PCI bus.\n\n25\n\n30\n\n8. The system of claim 5 wherein the second module grants\naccess to the PCI bus by generating access signals to permit\ntransmission of data by the peripheral device on the PCI bus.\n9. A computer program product for arbitrating access of\nperipheral devices on a peripheral component interconnect\n(PCI) bus, comprising:\na tangible storage medium readable by a processing circuit\nand storing instructions for execution by the processing\ncircuit for performing a method comprising:\n\n35\n\n40\n\nstoring a plurality of time slots for each peripheral device\nof the peripheral devices on the PCI bus in a bus schedule;\nsetting a status indicator for each time slot of each peripheral device of the peripheral devices on the PCI bus in the\nbus schedule;\nreceiving an access request from a peripheral device of the\nPCI bus;\ndetermining a current time slot;\n\n45\n\nevaluating the status indicator stored in the time slot associated with the current time slot of the bus schedule to\ndetermine an importance of the peripheral device; and\n\n50\n\nselectively granting access of the PCI bus to the peripheral\ndevice based on the importance of the peripheral device,\nwherein the-status indicators are single bit status indicators that are associated with peripheral devices on the\nPCI bus.\n\n55\n\n10. The computer program product of claim 9 wherein the\nimportance of the peripheral device is based on whether the\ndevice is permitted to transmit data during a time slot of the\nPCI bus.\n\n11. The computer program product of claim 9 wherein the\ngranting access to the PCI bus comprises generating access\n60 signals to permit transmission of data bythe peripheral device\non the PCI bus.\n\n'